{"meta":{"title":"å¤§ç†Šçš„ä¸ªäººåšå®¢","subtitle":"å¤§ç†ŠBIGBEAR","description":"","author":"å¤§ç†Š","url":"http://blog.pulsating.cn","root":"/"},"pages":[{"title":"404","date":"2021-03-09T08:25:30.000Z","updated":"2022-01-09T13:55:48.190Z","comments":true,"path":"404/index.html","permalink":"http://blog.pulsating.cn/404/index.html","excerpt":"","text":""},{"title":"about","date":"2021-03-09T09:11:14.000Z","updated":"2022-01-09T13:55:48.199Z","comments":true,"path":"about/index-1.html","permalink":"http://blog.pulsating.cn/about/index-1.html","excerpt":"","text":""},{"title":"å…³äº","date":"2022-01-09T13:55:48.674Z","updated":"2022-01-09T13:55:48.674Z","comments":false,"path":"about/index.html","permalink":"http://blog.pulsating.cn/about/index.html","excerpt":"","text":"layout: cvtitle: Xiaoyu Liuâ€™s CV è”ç³»æˆ‘ mail: ccliuxy@gmail.com tel: 16605123405 pages: https://liuxiaoyucc.github.io/cv/ gitee: https://gitee.com/yuxiaoliu blog: http://blog.pulsating.cn/ æ•™è‚²ç»å†å“ˆå°”æ»¨å¸ˆèŒƒå¤§å­¦ HARBIN COMMON UNIVERSITY 2013.9 - 2017.6 è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ä¸“ä¸š å­¦å£«å­¦ä½ å…³äºæˆ‘ 4å¹´å·¥ä½œç»éªŒ 2017.6 - ç°åœ¨ phpå·¥ç¨‹å¸ˆ 2017.9 - ç°åœ¨ è·¨ç«¯åº”ç”¨å¼€å‘ 2019 - ç°åœ¨ å·¥ä½œç»å†æ— é”¡NTT-DATAæ•°æ®æœ‰é™å…¬å¸ 2017.3 - 2017.7å®ä¹ ç”Ÿ å•å…ƒæµ‹è¯•(æ—¥è¯­ç›¸å…³) PHP Zend FrameWorkæ¡†æ¶ä¸Šæ‰‹(ç†Ÿæ‚‰Zendæ¡†æ¶) perlåŸºç¡€ è‹å·å°å®‡å®™ä¿¡æ¯ç§‘æŠ€æœ‰é™å…¬å¸ 2017.9 - ç°åœ¨phpå·¥ç¨‹å¸ˆ äº‘æ‰“å°å¼€æ”¾å¹³å°å¼€å‘åŠç»´æŠ¤,Api+åå° å¯¹æ¥ç¬¬ä¸‰æ–¹æ”¯ä»˜æ¥å£,ä¾‹å¦‚è¾¾è¾¾,èœ‚é¸Ÿ åŠŸèƒ½å‹æœåŠ¡å·å¼€å‘, å¤–å–å¤§ä¼˜æƒ (å¤–å–çº¢åŒ…) å¤–å–æµ·æŠ¥(é¥¿äº†ä¹ˆå•†æˆ·å¹³å°+å¾®ä¿¡å…¬ä¼—å·+å°ç¨‹åº) windowså®¢æˆ·ç«¯è½¯ä»¶ (å®¢æœåå°, èŠå¤©) å°é¢˜å®å…¨ç«¯, å·²ä¸Šçº¿å®‰å“åŠiOSå¸‚åœº å¼€æºé¡¹ç›® å›¾ç‰‡è½¬å•è‰²ä½å›¾ (bitmap) æ–‡ç« åœ°å€ ç§»åŠ¨ç«¯èŠå¤©app (ç¬¬ä¸‰æ–¹, åŒ…æ‹¬ç¯ä¿¡, goeasy, tim) github äº¬ä¸œæ—¥å¸¸åŠ©æ‰‹(æŠ“åŒ…, æ¨¡æ‹Ÿè¯·æ±‚) github ç½‘æ˜“äº‘éŸ³ä¹demo (github)[https://github.com/liuxiaoyucc/cloudmusic] æŠ€èƒ½ phpåç«¯ å°ç¨‹åºå¼€å‘ å¾®ä¿¡å…¬ä¼—å·å¼€å‘ hybrid appå¼€å‘ windowså®¢æˆ·ç«¯ php crawler çˆ±å¥½ è¯»ä¹¦ ç¾é£Ÿ"},{"title":"åˆ†ç±»","date":"2019-12-20T13:00:36.190Z","updated":"2019-12-20T13:00:36.190Z","comments":false,"path":"categories/index.html","permalink":"http://blog.pulsating.cn/categories/index.html","excerpt":"","text":""},{"title":"contact","date":"2021-03-09T09:11:28.000Z","updated":"2022-01-09T13:55:48.200Z","comments":true,"path":"contact/index.html","permalink":"http://blog.pulsating.cn/contact/index.html","excerpt":"","text":""},{"title":"friends","date":"2021-03-09T09:11:46.000Z","updated":"2022-01-09T13:55:48.201Z","comments":true,"path":"friends/index.html","permalink":"http://blog.pulsating.cn/friends/index.html","excerpt":"","text":""},{"title":"links","date":"2019-11-12T02:57:13.000Z","updated":"2020-01-13T14:24:45.795Z","comments":true,"path":"links/index.html","permalink":"http://blog.pulsating.cn/links/index.html","excerpt":"","text":"aa"},{"title":"404 Not Foundï¼šè¯¥é¡µæ— æ³•æ˜¾ç¤º","date":"2019-11-15T15:04:30.000Z","updated":"2019-12-20T13:00:36.191Z","comments":true,"path":"charitable/index.html","permalink":"http://blog.pulsating.cn/charitable/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2019-12-20T13:00:36.195Z","updated":"2019-12-20T13:00:36.195Z","comments":false,"path":"repository/index.html","permalink":"http://blog.pulsating.cn/repository/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2019-12-20T13:00:36.196Z","updated":"2019-12-20T13:00:36.196Z","comments":false,"path":"tags/index.html","permalink":"http://blog.pulsating.cn/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"çƒ­æ‰˜è’‚, å†¬æ—¥å›é­‚","slug":"hot-toddy-in-snow-winter","date":"2022-01-15T12:52:14.000Z","updated":"2022-01-15T13:34:16.438Z","comments":true,"path":"2022/01/15/hot-toddy-in-snow-winter/","link":"","permalink":"http://blog.pulsating.cn/2022/01/15/hot-toddy-in-snow-winter/","excerpt":"ä»Šå¤©ä¸‹äº†å¥½å¤§çš„é›ªå“‡, é£è´¼å†·, æ¥ä¸€æ¯çƒ­é¸¡å°¾é…’å§, çº¢èŒ¶çƒ­æ‰˜è’‚, å¸®ä½ æŠµå¾¡å¯’å†·çš„å†¬å¤©","text":"ä»Šå¤©ä¸‹äº†å¥½å¤§çš„é›ªå“‡, é£è´¼å†·, æ¥ä¸€æ¯çƒ­é¸¡å°¾é…’å§, çº¢èŒ¶çƒ­æ‰˜è’‚, å¸®ä½ æŠµå¾¡å¯’å†·çš„å†¬å¤© é£Ÿæå‡†å¤‡ææ–™ååˆ†çš„ç®€å•, åŸºæœ¬ä¸Šå®¶é‡Œéƒ½ä¼šæœ‰ æ©™å­1ä¸ª æŸ æª¬åŠä¸ª, å¤šäº†ä¼šå¾ˆé…¸ æ¢¨å­1ä¸ª (éå¿…é¡»), æœ€å¥½æ˜¯é›ªæ¢¨, æ²¡æœ‰é›ªæ¢¨å…¶ä»–çš„ä¹Ÿè¡Œ, æŒ‘æ±å¤šçš„,ç”œçš„ çº¢èŒ¶åŒ…2åŒ… (æ²¡æœ‰çº¢èŒ¶åŒ…å¯ä»¥è‡ªåˆ¶, æˆ‘è¿™åœ¨è¯ç®±é‡Œç¿»å‡ºçš„çº±å¸ƒ, åšäº†2ä¸ªçº¢èŒ¶åŒ…, çº±å¸ƒæœ€å¥½æ²¸æ°´ç…®ä¸€ä¸‹, è¿™é‡Œè¦æ³¨æ„, æœ‰çš„æ˜¯åŒ»ç”¨çº±å¸ƒ, ä¼šæœ‰è¯ç‰©, æœ€å¥½ç”¨æ™®é€šçš„çº±å¸ƒ) å¨å£«å¿Œ, éšä¾¿é€‰, é€‰ä½ æœ€å–œæ¬¢å–çš„, æˆ‘è¿™é‡Œç”¨çš„æ˜¯é»‘ç™½çŒ« èœ‚èœœ åˆ¶ä½œæ­¥éª¤ æ°´æœå…¨éƒ¨åˆ‡ç‰‡ æŠŠé”…æ”¯æ¥èµ·æ¥, æ°´æœä¸‹é”…, åŠ æ°´ (1å‡æ°´å¤§æ¦‚å¯ä»¥åšä¸ª3æ¯çš„æ ·å­, 1æ¯60mlå¨å£«å¿Œ, çœ‹ä½ çš„é…’é‡å’Œå°ä¼™ä¼´çš„æ•°é‡) å¤§ä¼™ç…®æ²¸, æ”¾å…¥çº¢èŒ¶, æ”¹æˆå°ç«å’•å™œå’•å™œå’•å™œå’•å™œ, è®¡æ—¶2-3åˆ†é’Ÿ (åˆ«å¿˜è®°äº†, ç…®è¿‡å¤´å°±ä¸å¥½å•¦) ç­‰å¾…çš„æ—¶å€™, è¶ç€é”…ä¸æ³¨æ„, å¼€å§‹å‡†å¤‡é…’, æ‹¿å‡ºä½ æœ€çˆ±çš„æœ€å¥½çœ‹çš„æ¯å­, åŠ å…¥60mlå¨å£«å¿Œ(é…’é‡ä¸å¥½å¯ä»¥å‡åŠ), 1å‹ºèœ‚èœœ, æ…åŒ€ æ‹¿å‡ºè‚‰æ¡‚, ç”¨ç«æœºç¨å¾®çƒ§ä¸€ä¸‹, æ¿€å‘è‚‰æ¡‚çš„é¦™æ°”, æ’å…¥æ¯ä¸­, å®Œç¾ é”…é‡Œçš„æœå­æ°´å¥½å•¦, å¿«å¼€é”…, å°†æœå­æ°´èˆ€å…¥æ¯ä¸­, è°ƒåŒ€ è¿™ä¸€æ­¥å¯ä»¥å¼€å§‹æ‹ç…§äº†å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ, å¯ä»¥åœ¨é”…é‡Œæ‰¾1ç‰‡è‚‰ä½“å®Œå¥½çš„æ©™ç‰‡æ”¾å…¥æ¯å­é‡Œè£…é¥° å–å§, åˆ«ç­‰äº†, è¶çƒ­ å–, ç…§ç‰‡ å‘³é“å¥½æäº†, ä¸€å£ä¸‹å», é¼»å­ç›´æ¥é€šé€šé€šé€šé€šé€šé€šé€é€é€é€é€é€é€é€, ä¸€æ¯ä¸‹å», ä¼šå‡ºå¾ˆå¤šå¾ˆå¤šæ±—, æ³¨æ„åˆ«ç€å‡‰äº†, æ³¨æ„æ³¨æ„æ³¨æ„æ³¨æ„! åˆ«å–å¤šäº†, ä¸€æ¯60ml, å–1æ¯å°±æ˜¯1ä¸¤é…’","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"æ—¥å¸¸","slug":"å¤§ç†ŠBIGBEAR/æ—¥å¸¸","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E6%97%A5%E5%B8%B8/"},{"name":"é¸¡å°¾é…’","slug":"é¸¡å°¾é…’","permalink":"http://blog.pulsating.cn/categories/%E9%B8%A1%E5%B0%BE%E9%85%92/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"http://blog.pulsating.cn/tags/%E6%97%A5%E5%B8%B8/"},{"name":"ç¾é£Ÿ","slug":"ç¾é£Ÿ","permalink":"http://blog.pulsating.cn/tags/%E7%BE%8E%E9%A3%9F/"},{"name":"é£Ÿè°±","slug":"é£Ÿè°±","permalink":"http://blog.pulsating.cn/tags/%E9%A3%9F%E8%B0%B1/"},{"name":"é¸¡å°¾é…’","slug":"é¸¡å°¾é…’","permalink":"http://blog.pulsating.cn/tags/%E9%B8%A1%E5%B0%BE%E9%85%92/"}]},{"title":"2022å¹´çš„ç¬¬ä¸€ä¸ªå‘¨æœ«","slug":"First-Weekend-of-2022","date":"2022-01-09T14:34:22.000Z","updated":"2022-01-09T15:42:49.669Z","comments":true,"path":"2022/01/09/First-Weekend-of-2022/","link":"","permalink":"http://blog.pulsating.cn/2022/01/09/First-Weekend-of-2022/","excerpt":"æ–°å¹´äº†, åˆæƒ³åˆ°æˆ‘å°˜å°å·²ä¹…çš„blog, å®åœ¨æ„§ç–š, ä»Šå¤©è¿™ç¯‡æ–‡ç« çš„ä¸»é¢˜å°±æ˜¯é€›åƒé€›åƒ, å¼€å¿ƒå°±å®Œäº‹äº†","text":"æ–°å¹´äº†, åˆæƒ³åˆ°æˆ‘å°˜å°å·²ä¹…çš„blog, å®åœ¨æ„§ç–š, ä»Šå¤©è¿™ç¯‡æ–‡ç« çš„ä¸»é¢˜å°±æ˜¯é€›åƒé€›åƒ, å¼€å¿ƒå°±å®Œäº‹äº† Day 1å­¦é™¢è·¯ çƒ¤å†·é¢ è·¯è¾¹çš„çƒ¤å†·é¢, å¥½åƒæœ‰è¾£æ¤’, æœ‰è¾£æ¤’çš„çƒ¤å†·é¢æ€ä¹ˆå¯èƒ½æ­£å®—å‘¢, æ‹‰é»‘äº†, ä¹Ÿå¯èƒ½æ˜¯æˆ‘å¿˜è®°å’Œè€æ¿è¯´å£å‘³äº†, å˜¿å˜¿å˜¿å˜¿å˜¿ å¥¶èŒ¶ å«å•¥æ¥ç€, èœœè¯­ä»™è¸ª? é‚£ä¸ªè¡€ç³¯ç±³çš„ç‰¹åˆ«å¥½å–, è¿™æ¬¡çº¢è±†çš„å°±ä¸€èˆ¬äº†, å¥¶èŒ¶å¤ªçŠ¯ç½ªäº†, ä»¥åå°‘å–ä¸ºå¦™ ç­‰å°ä¼™ä¼´, æ€ä¹ˆå˜æˆå°ä¼™ä¼´ç­‰æˆ‘äº†å‘¢å“ˆå“ˆå“ˆå“ˆå“ˆ, æˆ‘æ­£åƒç€å‘¢, äººå®¶å°±åˆ°äº† ä¸‡è±¡æ±‡ (ä¸–èŒ‚å¤§é“) æŒ‰æ‘©æ¤…å€™åœº è¿™æ¬¡è¿™ä¸ªæŒ‰æ‘©æ¤…, æ¯”æˆ‘ä¹‹å‰ä½“éªŒè¿‡çš„éƒ½è¦èˆ’æœä¸€äº›, å¯ä»¥è°ƒèŠ‚åŠ›åº¦ ç”µå½± é›„ç‹®å°‘å¹´ è™½ç„¶æœ‰è¤’æœ‰è´¬, ä½†æ˜¯æˆ‘è§‰å¾—æ˜¯æˆ‘ä»Šå¹´çœ‹è¿‡çš„æœ€å¥½çš„ç”µå½±äº†, çœŸå‚», è¿™å¹´å¤´æ€ä¹ˆè¿˜æœ‰å‚»ç“œè¯»æç™½? çœŸå¥½, è¿™å¹´å¤´å±…ç„¶è¿˜æœ‰äººç›¸ä¿¡è¯—. å’¸é±¼ç¿»èº«çš„ä¸»é¢˜, è™½ç„¶èµ¢äº†èˆç‹®, ä½†æ˜¯ç»“å±€è¿˜æ˜¯è¦å›å½’ç°å®, é˜¿å¨Ÿä»æ—§å»äº†ä¸Šæµ·æ‰“å·¥, å¨Ÿå¦¹ä¹Ÿæœ‰äº†ç”·æœ‹å‹, è¿™åˆç†å—? è¿™å¤ªä»–å¨˜çš„åˆç†äº† æèŒ‚æ¢å¤ªå­ ä¸€éƒ¨ç¬‘ç‚¹å°¬ç‚¹éƒ½å¾ˆå¤š, èƒ½è®©ä½ ç¬‘, ä¹Ÿèƒ½è®©ä½ è„šè¶¾æŠ ç©¿é‹åº•çš„ç”µå½± çƒ§ä»™è‰ è¶…å¤§æ¯æœé¥® å­¦é™¢è·¯å¤œå¸‚ å¿ƒå¿ƒå¿µçš„ç« é±¼å°ä¸¸å­æ²¡æœ‰ç« é±¼, è¯´å¥½çš„ä¸­å›½äººä¸éª—ä¸­å›½äººå‘¢ å…³ä¸œç…® ä¸€èˆ¬ä¸ä¼šåƒç¬¬äºŒæ¬¡ çƒ¤é±¿é±¼, æœ‰ç‚¹å’¸, æ•´ä½“æ˜¯å¥½çš„ ç‚¸é¸¡æŸ³ç‚¸è˜‘è‡ å—¯å¥½åƒå¥½åƒ å¤§ç¢—éº»è¾£çƒ«, å¾®è¾£å°±å¾ˆè¾£, å—ä¸äº† æ°´æœåº—, è‰è“ä¸å¥½åƒ æ‹‰é»‘ å®¶é‡Œ ç…®çº¢é…’, æ—¶éš”å¥½ä¹…å¥½ä¹…å¥½ä¹…, ç»ˆäºåˆåšäº†ä¸€æ¬¡, è¿™æ¬¡å‘³é“æ›´é…¸äº†, å¯èƒ½æ˜¯èº«è¾¹æ²¡æœ‰ç”œèœœèœœçš„äººäº†, å˜¿å˜¿å˜¿, å¯»æ€å–å®Œèƒ½ç¡çš„èˆ’æœä¸€ç‚¹, ç»“æœä¸€èˆ¬ä¸€èˆ¬ ç¡å‰èŠå¤© åˆæ²¡ç¡å¥½ Day 2ä¸­å¤®å¤§è¡—æ™šä¸Šçš„ä¸­å¤®å¤§è¡—ç‰¹åˆ«ç¾, å¤©æ°”å¯’å†·ä¹ŸæŒ¡ä¸ä½æµªæ¼«çš„äººä»¬ è¿˜æœ‰ä¸çŸ¥é“èƒ½ä¸èƒ½ä¸‹å¾—å»å˜´çš„å„ç§ç³–è‘«èŠ¦, ç”Ÿå§œ, çƒ¤è‚ , äº”èŠ±è‚‰, åªæœ‰ä½ æƒ³ä¸åˆ°, æ²¡æœ‰ä»–åšä¸å‡ºæ¥çš„, æˆ‘æ„¿ç§°è€æ¿ä¸ºç³–è‘«èŠ¦é¬¼æ‰ æ¾èŠ±æ±Ÿç•”å…è´¹å…¥åœºå“¦, æœ‰å¾ˆå¤šå†°ä¸Šæ¸¸ç©é¡¹ç›®, é¡¹ç›®å•ç‹¬æ”¶è´¹çš„, è¿˜æœ‰å¤§æ»‘æ¢¯, è™½ç„¶æ²¡æœ‰å†°é›ªå¤§ä¸–ç•Œçš„å¤§, ä½†æ˜¯åº”è¯¥ä¹Ÿå¾ˆnice, ä»Šå¤©æ˜¯ä¸€ä¸ªäººæ¥çš„, æ‰€ä»¥æˆ‘å°±æ²¡æœ‰å…¥åœº, ç›´æ¥å»éš”å£åƒå¥½åƒçš„äº† èºè›³ç²‰ç¬¬ä¸€æ¬¡åƒèºè›³ç²‰, ç‚¹äº†ç¬‹å°–, çœŸçš„æŒºé¦™çš„å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ, å°±æ˜¯åº—é‡Œçš„å‘³é“æœ‰ç‚¹ä¸å‹å¥½, åƒçš„äººè¶…å¤š å­¦é™¢è·¯å¤œå¸‚ä»Šå¤©çš„ä¸»è§’æ˜¯è‡­è±†è…, é“›é“›é“›é“› å¸ˆå¤§å¤©æ¡¥è¿™æ›¾æ˜¯æˆ‘æ¯å¤©å¿…ç»çš„ä¸€é“æ¡¥, æ€€å¿µing, ä¸€èµ°ä¸Šæ¥, ç¬é—´æƒ³èµ·äº†è®¸å¤šæ„‰å¿«çš„æ—¥å­, æ—©å…ˆæˆ‘è®°ç€ä¸¤æ—è¿˜æœ‰è®¸å¤šå°æ‘Šå°è´©, å¯èƒ½æ˜¯å­¦æ ¡æ”¾å‡äº†, æ²¡æœ‰äººè¿‡æ¥æ‘†äº†, æ‹äº†ä¸€å¼ æ¡¥ä¸‹çš„ æ‰æ‰å¥¥ç‰¹è±æ–¯ ç”µç©åŸ ä»Šå¤©è¿æ°”ä¸é”™, æŠ“äº†ä¸¤ä¸ªå…”å­, å“­è¾½, ç¬¬ä¸€æ¬¡å•Š, è¶çƒ­ä¹°å¼ åˆ®åˆ®ä¹å¥½äº†, æœ€åè®©æˆ‘å‚»çœ¼çš„æ˜¯, å›å®¶çš„æ—¶å€™å¿˜è®°å½’è¿˜å……ç”µå®äº†, æŒºå‚»é€¼çš„å°± è¶…å¸‚ è¿™æ‰æ˜¯ä»Šå¤©çš„ä¸»è¦ç›®çš„, æˆ‘æ˜¯æ¥ä¹°é…’å…·å’Œè°ƒé…’çš„ææ–™çš„, å¯æƒœä¹°çš„ä¸æ˜¯å¾ˆå…¨, è¿˜æ˜¯è¦åˆ°ç½‘ä¸Šä¹°ä¸€é, ä½†æ˜¯ä¹Ÿæ»¡è½½è€Œå½’, æ•´æ•´ä¸¤è¢‹å­, å¿ƒç–¼é’±åŒ… æ„‰å¿«çš„å‘¨æœ«å¤ªçŸ­æš‚äº†, ä»Šå¤©å‡†å¤‡äº†å¥½å‡ ç§çƒˆé…’, è°ƒä¸€æ¯ä¸€ä¼šå°±ç¡äº†, æƒ³ä¸åˆ°æ›¾ç»ç¡çš„å’ŒçŒªä¸€æ ·çš„æˆ‘, å±…ç„¶ä¼šæœ‰ä¸€å¤©å› ä¸ºç¡ä¸äº†å®‰ç¨³è§‰é—¹å¿ƒ","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"æ—¥å¸¸","slug":"å¤§ç†ŠBIGBEAR/æ—¥å¸¸","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E6%97%A5%E5%B8%B8/"},{"name":"æ¸¸è®°","slug":"æ¸¸è®°","permalink":"http://blog.pulsating.cn/categories/%E6%B8%B8%E8%AE%B0/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"æ¸¸è®°","slug":"æ¸¸è®°","permalink":"http://blog.pulsating.cn/tags/%E6%B8%B8%E8%AE%B0/"},{"name":"æ—¥å¸¸","slug":"æ—¥å¸¸","permalink":"http://blog.pulsating.cn/tags/%E6%97%A5%E5%B8%B8/"}]},{"title":"ååˆ†é’Ÿæå®šæ”¯ä»˜å®H5æ”¯ä»˜(ThinkPHP5.1)","slug":"Ali-H5-Pay-for-PHP","date":"2021-03-09T06:18:37.000Z","updated":"2022-01-09T14:36:52.206Z","comments":true,"path":"2021/03/09/Ali-H5-Pay-for-PHP/","link":"","permalink":"http://blog.pulsating.cn/2021/03/09/Ali-H5-Pay-for-PHP/","excerpt":"","text":"ååˆ†é’Ÿæå®šæ”¯ä»˜å®H5æ”¯ä»˜(ThinkPHP5.1)è®°å½•ä¸‹æ¥å…¥æ”¯ä»˜å®H5æ”¯ä»˜çš„è¿‡ç¨‹ å‡†å¤‡ å¼€é€šæ‰‹æœºç½‘ç«™æ”¯ä»˜çš„æ”¯ä»˜å®è´¦å· å…¥é©»æ”¯ä»˜å®å¼€æ”¾å¹³å°æ–°å»ºç½‘é¡µ&amp;ç§»åŠ¨åº”ç”¨å¹¶ç­¾çº¦","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"å¤§ç†ŠBIGBEAR/PHP","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/PHP/"}],"tags":[{"name":"æ”¯ä»˜","slug":"æ”¯ä»˜","permalink":"http://blog.pulsating.cn/tags/%E6%94%AF%E4%BB%98/"},{"name":"æ”¯ä»˜å®æ”¯ä»˜","slug":"æ”¯ä»˜å®æ”¯ä»˜","permalink":"http://blog.pulsating.cn/tags/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98/"},{"name":"æ”¯ä»˜å®H5æ”¯ä»˜","slug":"æ”¯ä»˜å®H5æ”¯ä»˜","permalink":"http://blog.pulsating.cn/tags/%E6%94%AF%E4%BB%98%E5%AE%9DH5%E6%94%AF%E4%BB%98/"},{"name":"ThinkPHP","slug":"ThinkPHP","permalink":"http://blog.pulsating.cn/tags/ThinkPHP/"},{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"}]},{"title":"ååˆ†é’Ÿæå®šå¾®ä¿¡H5æ”¯ä»˜(ThinkPHP5.1)","slug":"Wechat-H5-Pay-for-PHP","date":"2021-03-04T01:05:02.000Z","updated":"2022-01-09T13:55:48.194Z","comments":true,"path":"2021/03/04/Wechat-H5-Pay-for-PHP/","link":"","permalink":"http://blog.pulsating.cn/2021/03/04/Wechat-H5-Pay-for-PHP/","excerpt":"","text":"ååˆ†é’Ÿæå®šå¾®ä¿¡H5æ”¯ä»˜(ThinkPHP5.1)ä¹‹å‰æ¥è¿‡çš„æ”¯ä»˜éƒ½æ˜¯jssdkæ”¯ä»˜, ä¹Ÿå°±æ˜¯åœ¨å¾®ä¿¡æµè§ˆå™¨ç¯å¢ƒä¸‹çš„æ”¯ä»˜, è¿™æ¬¡æœ‰ä¸ªé¡¹ç›®éœ€è¦å¯¹æ¥å¾®ä¿¡H5æ”¯ä»˜, è¿™é‡Œè®°å½•ä¸‹ å‡†å¤‡ é¦–å…ˆå¾®ä¿¡å…¬ä¼—å·è¦å¼€é€šå¾®ä¿¡æ”¯ä»˜åŠŸèƒ½, å¹¶ç»‘å®šå•†æˆ·å· å¼€é€šå¾®ä¿¡H5æ”¯ä»˜æœåŠ¡, å®¡æ ¸å¤§æ¦‚éœ€è¦1å¤©å·¦å³ ä»£ç éƒ¨åˆ†é…ç½®å‚æ•°åœ¨configç›®å½•ä¸‹, æ–°å»ºwechat.phpæ–‡ä»¶, å†™å…¥å¦‚ä¸‹é…ç½® &lt;?php /** * å¾®ä¿¡é…ç½®å‚æ•° */ return [ &#39;auth&#39; =&gt; [ &#39;appid&#39; =&gt; &#39;&#39;, &#39;appsecret&#39;=&gt; &#39;&#39;, ], &#39;pay&#39; =&gt; [ // å¾®ä¿¡æ”¯ä»˜ç”¨è¿™é‡Œçš„å‚æ•° &#39;appid&#39;=&gt; &#39;APPID&#39;, &#39;mch_id&#39;=&gt; &#39;MCH_ID&#39;, // å•†æˆ·å· &#39;notify_url&#39;=&gt; &#39;&#39;, // æ”¯ä»˜ç»“æœé€šçŸ¥åœ°å€, å¡«å†™ä½ æ¥æ”¶é€šçŸ¥çš„url &#39;key&#39;=&gt; &#39;E918BB87E7BF1B73359AA378550A2598&#39;, // è¿™ä¸ªkeyæ˜¯åœ¨å•†æˆ·å¹³å°é…ç½®çš„å¥½åƒ, éšä¾¿ç”Ÿæˆä¸€ä¸ªmd5å°±å¯ä»¥ ] ]; æ”¯ä»˜ç±»WechatAppPay.phpæä¾›è®¢å•ç›¸å…³çš„åŠŸèƒ½, ä¾‹å¦‚ç»Ÿä¸€ä¸‹å•(ä¸»è¦), æŸ¥è¯¢è®¢å•ä¿¡æ¯, å…³é—­è®¢å•ç­‰, è¿™é‡Œåªè´´å‡ºäº†æ”¯ä»˜éœ€è¦ç”¨åˆ°çš„éƒ¨åˆ† æˆ‘å°†è¿™ä¸ªåº“æ–‡ä»¶, æ”¾åœ¨äº†application/extraç›®å½•ä¸‹é¢, tp5.1 extraç›®å½•éœ€è¦è‡ªå·±åˆ›å»ºä¸€ä¸‹å°±å¥½äº†,å¦‚æœæƒ³æ”¾åœ¨å…¶ä»–åœ°æ–¹, å°†ä»£ç ä¸­çš„namespaceæ”¹ä¸€ä¸‹å†ç”¨. &lt;?php namespace app\\extra; class WechatAppPay { //æ¥å£API URLå‰ç¼€ const API_URL_PREFIX = &#39;https://api.mch.weixin.qq.com&#39;; //ä¸‹å•åœ°å€URL const UNIFIEDORDER_URL = &quot;/pay/unifiedorder&quot;; //æŸ¥è¯¢è®¢å•URL const ORDERQUERY_URL = &quot;/pay/orderquery&quot;; //å…³é—­è®¢å•URL const CLOSEORDER_URL = &quot;/pay/closeorder&quot;; //å…¬ä¼—è´¦å·ID private $appid; //å•†æˆ·å· private $mch_id; //éšæœºå­—ç¬¦ä¸² private $nonce_str; //ç­¾å private $sign; //å•†å“æè¿° private $body; private $scene_info; private $attach; //å•†æˆ·è®¢å•å· private $out_trade_no; //æ”¯ä»˜æ€»é‡‘é¢ private $total_fee; //ç»ˆç«¯IP private $spbill_create_ip; //æ”¯ä»˜ç»“æœå›è°ƒé€šçŸ¥åœ°å€ private $notify_url; //äº¤æ˜“ç±»å‹ private $trade_type; //æ”¯ä»˜å¯†é’¥ private $key; //è¯ä¹¦è·¯å¾„ private $SSLCERT_PATH; private $SSLKEY_PATH; //æ‰€æœ‰å‚æ•° private $params = array(); public function __construct($appid, $mch_id, $notify_url, $key) { $this-&gt;appid = $appid; $this-&gt;mch_id = $mch_id; $this-&gt;notify_url = $notify_url; $this-&gt;key = $key; } /** * ä¸‹å•æ–¹æ³• * @param $params ä¸‹å•å‚æ•° */ public function unifiedOrder( $params ){ $this-&gt;body = $params[&#39;body&#39;]; $this-&gt;out_trade_no = $params[&#39;out_trade_no&#39;]; $this-&gt;total_fee = $params[&#39;total_fee&#39;]; $this-&gt;trade_type = $params[&#39;trade_type&#39;]; $this-&gt;scene_info = $params[&#39;scene_info&#39;]; $this-&gt;attach = $params[&#39;attach&#39;]; $this-&gt;nonce_str = $this-&gt;genRandomString(); $this-&gt;spbill_create_ip = $_SERVER[&#39;REMOTE_ADDR&#39;]; $this-&gt;params[&#39;appid&#39;] = $this-&gt;appid; $this-&gt;params[&#39;mch_id&#39;] = $this-&gt;mch_id; $this-&gt;params[&#39;nonce_str&#39;] = $this-&gt;nonce_str; $this-&gt;params[&#39;body&#39;] = $this-&gt;body; $this-&gt;params[&#39;out_trade_no&#39;] = $this-&gt;out_trade_no; $this-&gt;params[&#39;total_fee&#39;] = $this-&gt;total_fee; $this-&gt;params[&#39;spbill_create_ip&#39;] = $this-&gt;spbill_create_ip; $this-&gt;params[&#39;notify_url&#39;] = $this-&gt;notify_url; $this-&gt;params[&#39;trade_type&#39;] = $this-&gt;trade_type; $this-&gt;params[&#39;scene_info&#39;] = $this-&gt;scene_info; $this-&gt;params[&#39;attach&#39;] = $this-&gt;attach; //è·å–ç­¾åæ•°æ® $this-&gt;sign = $this-&gt;MakeSign( $this-&gt;params ); $this-&gt;params[&#39;sign&#39;] = $this-&gt;sign; $xml = $this-&gt;data_to_xml($this-&gt;params); $response = $this-&gt;postXmlCurl($xml, self::API_URL_PREFIX.self::UNIFIEDORDER_URL); if( !$response ){ return false; } $result = $this-&gt;xml_to_data( $response ); if( !empty($result[&#39;result_code&#39;]) &amp;&amp; !empty($result[&#39;err_code&#39;]) ){ $result[&#39;err_msg&#39;] = $this-&gt;error_code( $result[&#39;err_code&#39;] ); } return $result; } /** * * è·å–æ”¯ä»˜ç»“æœé€šçŸ¥æ•°æ® * return array */ public function getNotifyData(){ //è·å–é€šçŸ¥çš„æ•°æ® // $xml = $GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;]; $xml = file_get_contents(&#39;php://input&#39;); //echo 123;die; $data = array(); if( empty($xml) ){ c_log(&#39;xmlä¸ºç©º&#39;); return false; } $data = $this-&gt;xml_to_data( $xml ); if( !empty($data[&#39;return_code&#39;]) ){ if( $data[&#39;return_code&#39;] == &#39;FAIL&#39; ){ return false; } } return $data; } /** * æ¥æ”¶é€šçŸ¥æˆåŠŸååº”ç­”è¾“å‡ºXMLæ•°æ® * @param string $xml */ public function replyNotify(){ $data[&#39;return_code&#39;] = &#39;SUCCESS&#39;; $data[&#39;return_msg&#39;] = &#39;OK&#39;; $xml = $this-&gt;data_to_xml( $data ); echo $xml; die(); } /** * ç”Ÿæˆç­¾å * @return ç­¾å */ public function MakeSign( $params ){ //ç­¾åæ­¥éª¤ä¸€ï¼šæŒ‰å­—å…¸åºæ’åºæ•°ç»„å‚æ•° ksort($params); $string = $this-&gt;ToUrlParams($params); //ç­¾åæ­¥éª¤äºŒï¼šåœ¨stringååŠ å…¥KEY $string = $string . &quot;&amp;key=&quot;.$this-&gt;key; //ç­¾åæ­¥éª¤ä¸‰ï¼šMD5åŠ å¯† $string = md5($string); //ç­¾åæ­¥éª¤å››ï¼šæ‰€æœ‰å­—ç¬¦è½¬ä¸ºå¤§å†™ $result = strtoupper($string); return $result; } /** * å°†å‚æ•°æ‹¼æ¥ä¸ºurl: key=value&amp;key=value * @param $params * @return string */ public function ToUrlParams( $params ){ $string = &#39;&#39;; if( !empty($params) ){ $array = array(); foreach( $params as $key =&gt; $value ){ $array[] = $key.&#39;=&#39;.$value; } $string = implode(&quot;&amp;&quot;,$array); } return $string; } /** * è¾“å‡ºxmlå­—ç¬¦ * @param $params å‚æ•°åç§° * return string è¿”å›ç»„è£…çš„xml **/ public function data_to_xml( $params ){ if(!is_array($params)|| count($params) &lt;= 0) { return false; } $xml = &quot;&lt;xml&gt;&quot;; foreach ($params as $key=&gt;$val) { if (is_numeric($val)){ $xml.=&quot;&lt;&quot;.$key.&quot;&gt;&quot;.$val.&quot;&lt;/&quot;.$key.&quot;&gt;&quot;; }else{ $xml.=&quot;&lt;&quot;.$key.&quot;&gt;&lt;![CDATA[&quot;.$val.&quot;]]&gt;&lt;/&quot;.$key.&quot;&gt;&quot;; } } $xml.=&quot;&lt;/xml&gt;&quot;; return $xml; } /** * å°†xmlè½¬ä¸ºarray * @param string $xml * return array */ public function xml_to_data($xml){ if(!$xml){ return false; } //å°†XMLè½¬ä¸ºarray //ç¦æ­¢å¼•ç”¨å¤–éƒ¨xmlå®ä½“ libxml_disable_entity_loader(true); $data = json_decode(json_encode(simplexml_load_string($xml, &#39;SimpleXMLElement&#39;, LIBXML_NOCDATA)), true); return $data; } /** * è·å–æ¯«ç§’çº§åˆ«çš„æ—¶é—´æˆ³ */ private static function getMillisecond(){ //è·å–æ¯«ç§’çš„æ—¶é—´æˆ³ $time = explode ( &quot; &quot;, microtime () ); $time = $time[1] . ($time[0] * 1000); $time2 = explode( &quot;.&quot;, $time ); $time = $time2[0]; return $time; } /** * äº§ç”Ÿä¸€ä¸ªæŒ‡å®šé•¿åº¦çš„éšæœºå­—ç¬¦ä¸²,å¹¶è¿”å›ç»™ç”¨æˆ· * @param type $len äº§ç”Ÿå­—ç¬¦ä¸²çš„é•¿åº¦ * @return string éšæœºå­—ç¬¦ä¸² */ private function genRandomString($len = 32) { $chars = array( &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;i&quot;, &quot;j&quot;, &quot;k&quot;, &quot;l&quot;, &quot;m&quot;, &quot;n&quot;, &quot;o&quot;, &quot;p&quot;, &quot;q&quot;, &quot;r&quot;, &quot;s&quot;, &quot;t&quot;, &quot;u&quot;, &quot;v&quot;, &quot;w&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;, &quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;, &quot;I&quot;, &quot;J&quot;, &quot;K&quot;, &quot;L&quot;, &quot;M&quot;, &quot;N&quot;, &quot;O&quot;, &quot;P&quot;, &quot;Q&quot;, &quot;R&quot;, &quot;S&quot;, &quot;T&quot;, &quot;U&quot;, &quot;V&quot;, &quot;W&quot;, &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot;, &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot; ); $charsLen = count($chars) - 1; // å°†æ•°ç»„æ‰“ä¹± shuffle($chars); $output = &quot;&quot;; for ($i = 0; $i &lt; $len; $i++) { $output .= $chars[mt_rand(0, $charsLen)]; } return $output; } /** * ä»¥postæ–¹å¼æäº¤xmlåˆ°å¯¹åº”çš„æ¥å£url * * @param string $xml éœ€è¦postçš„xmlæ•°æ® * @param string $url url * @param bool $useCert æ˜¯å¦éœ€è¦è¯ä¹¦ï¼Œé»˜è®¤ä¸éœ€è¦ * @param int $second urlæ‰§è¡Œè¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤30s * @throws WxPayException */ private function postXmlCurl($xml, $url, $useCert = false, $second = 30){ $ch = curl_init(); //è®¾ç½®è¶…æ—¶ curl_setopt($ch, CURLOPT_TIMEOUT, $second); curl_setopt($ch,CURLOPT_URL, $url); curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,FALSE); curl_setopt($ch,CURLOPT_SSL_VERIFYHOST,2); //è®¾ç½®header curl_setopt($ch, CURLOPT_HEADER, FALSE); //è¦æ±‚ç»“æœä¸ºå­—ç¬¦ä¸²ä¸”è¾“å‡ºåˆ°å±å¹•ä¸Š curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); if($useCert == true){ //è®¾ç½®è¯ä¹¦ //ä½¿ç”¨è¯ä¹¦ï¼šcert ä¸ key åˆ†åˆ«å±äºä¸¤ä¸ª.pemæ–‡ä»¶ curl_setopt($ch,CURLOPT_SSLCERTTYPE,&#39;PEM&#39;); //curl_setopt($ch,CURLOPT_SSLCERT, WxPayConfig::SSLCERT_PATH); curl_setopt($ch,CURLOPT_SSLKEYTYPE,&#39;PEM&#39;); //curl_setopt($ch,CURLOPT_SSLKEY, WxPayConfig::SSLKEY_PATH); } //postæäº¤æ–¹å¼ curl_setopt($ch, CURLOPT_POST, TRUE); curl_setopt($ch, CURLOPT_POSTFIELDS, $xml); //è¿è¡Œcurl $data = curl_exec($ch); //è¿”å›ç»“æœ if($data){ curl_close($ch); return $data; } else { $error = curl_errno($ch); curl_close($ch); return false; } } /** * é”™è¯¯ä»£ç  * @param $code æœåŠ¡å™¨è¾“å‡ºçš„é”™è¯¯ä»£ç  * return string */ public function error_code( $code ){ $errList = array( &#39;NOAUTH&#39; =&gt; &#39;å•†æˆ·æœªå¼€é€šæ­¤æ¥å£æƒé™&#39;, &#39;NOTENOUGH&#39; =&gt; &#39;ç”¨æˆ·å¸å·ä½™é¢ä¸è¶³&#39;, &#39;ORDERNOTEXIST&#39; =&gt; &#39;è®¢å•å·ä¸å­˜åœ¨&#39;, &#39;ORDERPAID&#39; =&gt; &#39;å•†æˆ·è®¢å•å·²æ”¯ä»˜ï¼Œæ— éœ€é‡å¤æ“ä½œ&#39;, &#39;ORDERCLOSED&#39; =&gt; &#39;å½“å‰è®¢å•å·²å…³é—­ï¼Œæ— æ³•æ”¯ä»˜&#39;, &#39;SYSTEMERROR&#39; =&gt; &#39;ç³»ç»Ÿé”™è¯¯!ç³»ç»Ÿè¶…æ—¶&#39;, &#39;APPID_NOT_EXIST&#39; =&gt; &#39;å‚æ•°ä¸­ç¼ºå°‘APPID&#39;, &#39;MCHID_NOT_EXIST&#39; =&gt; &#39;å‚æ•°ä¸­ç¼ºå°‘MCHID&#39;, &#39;APPID_MCHID_NOT_MATCH&#39; =&gt; &#39;appidå’Œmch_idä¸åŒ¹é…&#39;, &#39;LACK_PARAMS&#39; =&gt; &#39;ç¼ºå°‘å¿…è¦çš„è¯·æ±‚å‚æ•°&#39;, &#39;OUT_TRADE_NO_USED&#39; =&gt; &#39;åŒä¸€ç¬”äº¤æ˜“ä¸èƒ½å¤šæ¬¡æäº¤&#39;, &#39;SIGNERROR&#39; =&gt; &#39;å‚æ•°ç­¾åç»“æœä¸æ­£ç¡®&#39;, &#39;XML_FORMAT_ERROR&#39; =&gt; &#39;XMLæ ¼å¼é”™è¯¯&#39;, &#39;REQUIRE_POST_METHOD&#39; =&gt; &#39;æœªä½¿ç”¨postä¼ é€’å‚æ•° &#39;, &#39;POST_DATA_EMPTY&#39; =&gt; &#39;postæ•°æ®ä¸èƒ½ä¸ºç©º&#39;, &#39;NOT_UTF8&#39; =&gt; &#39;æœªä½¿ç”¨æŒ‡å®šç¼–ç æ ¼å¼&#39;, ); if( array_key_exists( $code , $errList ) ){ return $errList[$code]; } } } æ§åˆ¶å™¨éƒ¨åˆ†ä¸‹å•æ¥å£æˆ‘ä»¬æ§åˆ¶å™¨éœ€è¦æä¾›æ¥å£ç»™å‰ç«¯, ç„¶åå°†å¾®ä¿¡çš„ç»Ÿä¸€ä¸‹å•æ¥å£è¿”å›çš„å‚æ•°è¿”å›ç»™å‰ç«¯ é¦–å…ˆåœ¨æ§åˆ¶å™¨é¡¶éƒ¨å¼•å…¥æ”¯ä»˜ç±»WechatAppPay.php use app\\extra\\WechatAppPay; ç„¶åæ–°å»ºä¸€ä¸ªæ¥å£å‡½æ•°ä¾›å‰ç«¯è°ƒç”¨ /** * æ”¯ä»˜ * @param Request $request * @return string */ public function wechat_pay(Request $request) { $data = $request-&gt;post(); $body = []; // é™„åŠ çš„ä¸šåŠ¡å‚æ•°, ä¼šåœ¨å¼‚æ­¥é€šçŸ¥ä¸­åŸæ ·æ”¶åˆ° $order_no = &#39;&#39;; // è‡ªå®šä¹‰è®¢å•å·, æ ¹æ®æ—¶é—´æˆ³æˆ–è€…å…¶ä»–ç”Ÿæˆä¸€ä¸ª, éœ€ä¿è¯å”¯ä¸€æ€§ // åˆå§‹åŒ– $lib_wx_pay = new WechatAppPay(config(&#39;wechat.pay.appid&#39;), config(&#39;wechat.pay.mch_id&#39;), config(&#39;wechat.pay.notify_url&#39;), config(&#39;wechat.pay.key&#39;)); $params[&#39;body&#39;] = &#39;&#39;; // å•†å“æè¿° $params[&#39;out_trade_no&#39;] = $order_no; //è‡ªå®šä¹‰çš„è®¢å•å·ï¼Œä¸èƒ½é‡å¤ $params[&#39;total_fee&#39;] = 1; //è®¢å•é‡‘é¢ åªèƒ½ä¸ºæ•´æ•° å•ä½ä¸ºåˆ† $params[&#39;trade_type&#39;] = &#39;MWEB&#39;; //äº¤æ˜“ç±»å‹, h5æ”¯ä»˜å›ºå®šå¡«å†™ MWEB $params[&#39;scene_info&#39;] = [ // æ”¯ä»˜åœºæ™¯ä¿¡æ¯ &#39;h5_info&#39; =&gt; [ &#39;type&#39; =&gt; &#39;Wap&#39;, // å›ºå®š &#39;wap_url&#39; =&gt; &#39;&#39;, // è¿™ä¸ªæ˜¯è°ƒç”¨æ­¤æ¥å£çš„é¡µé¢url, åº”è¯¥å¯ä»¥å¿½ç•¥ &#39;wap_name&#39; =&gt; &#39;&#39; // ç½‘ç«™åå­—, åº”è¯¥ä¹Ÿå¯ä»¥å¿½ç•¥ ] ]; $params[&#39;attach&#39;] = json_encode($body); // è‡ªå®šä¹‰é™„åŠ å‚æ•° $params[&#39;scene_info&#39;] = json_encode($params[&#39;scene_info&#39;]); $res = $lib_wx_pay-&gt;unifiedOrder($params); // è°ƒç”¨ç»Ÿä¸€ä¸‹å•æ¥å£, æ¥æ”¶è¿”å›å€¼, å¹¶è¿”å›ç»™å‰ç«¯ $res[&#39;order_no&#39;] = $order_no; return $res; } å¼‚æ­¥æ¥æ”¶å¾®ä¿¡æ”¯ä»˜ç»“æœæ¥å£è¿™æ˜¯å¼‚æ­¥æ¥æ”¶å¾®ä¿¡æ”¯ä»˜ç»“æœçš„å‡½æ•°, åœ¨è¿™é‡Œå¤„ç†è®¢å•çŠ¶æ€å’Œä¸€äº›å…¶ä»–çš„æ”¯ä»˜åçš„ä¸šåŠ¡é€»è¾‘, å¹¶æŒ‰å¾®ä¿¡è§„å®šçš„æ ¼å¼è¿”å› public function notify_wechat(PayRecord $m_pay_record, TestRecord $m_test_record) { $lib_wx_pay = new WechatAppPay(config(&#39;wechat.pay.appid&#39;), config(&#39;wechat.pay.mch_id&#39;), config(&#39;wechat.pay.notify_url&#39;), config(&#39;wechat.pay.key&#39;)); $data = $lib_wx_pay-&gt;getNotifyData(); // æ¥æ”¶é€šçŸ¥çš„å‚æ•° if ($data) { $body = json_decode($data[&#39;attach&#39;], true); $order_no = $data[&#39;out_trade_no&#39;]; // è‡ªå®šä¹‰è®¢å•å· // ä¸‹é¢æ ¹æ®ä¸šåŠ¡éœ€æ±‚å¤„ç†æ”¯ä»˜æˆåŠŸçš„é€»è¾‘ } $lib_wx_pay-&gt;replyNotify(); // é€šçŸ¥å¾®ä¿¡æœåŠ¡å™¨å·²å¤„ç† } æ”¯ä»˜ååŒæ­¥è·³è½¬æ¥å£æ”¯ä»˜æˆåŠŸåè·³è½¬çš„é¡µé¢, å¦‚æœéœ€è¦å¤„ç†äº›é€»è¾‘å¯ä»¥é€šè¿‡æ§åˆ¶å™¨, ä¹Ÿå¯ä»¥ç›´æ¥åœ¨å‰ç«¯è·³è½¬åˆ°ç»“æœé¡µ public function return_wechat_pay(Request $request) { $return_url = &#39;&#39;; // è·³è½¬ç»“æœé¡µ header(&quot;Location: $return_url&quot;); } å‰ç«¯éƒ¨åˆ†å‰ç«¯è¿™é‡Œæä¾›çš„æ˜¯jqueryä»£ç , å…¶å®å°±ä¸€ä¸ªpostè¯·æ±‚, ç”¨å•¥éƒ½ä¸€æ · $.post(&#39;/index.php/api/v1/pay/wechat_pay&#39;,post_data, function (res) { if (res.return_msg === &#39;OK&#39;) { // mweb_urlæ˜¯ç»Ÿä¸€ä¸‹å•æ¥å£è¿”å›çš„é“¾æ¥ // redirect_urlå°±æ˜¯æ”¯ä»˜æˆåŠŸåè·³è½¬çš„é“¾æ¥, éœ€è¦encodeåæ‹¼æ¥åˆ°mweb_urlåé¢, // å¦‚æœä¸éœ€è¦è·³è½¬åˆ™å¿½ç•¥redirect_url, ä¸æ‹¼æ¥ let red_url = &#39;return_wechat_pay&#39;; red_url = encodeURI(red_url); // è¿™æ ·è·³è½¬å, mweb_urlå°±ä¼šè°ƒèµ·å¾®ä¿¡æ”¯ä»˜ window.location.href = res.mweb_url + &#39;&amp;redirect_url=&#39; + red_url; } }) Tips å¦‚æœä½¿ç”¨redirect_urlè¿™ä¸ªå‚æ•°, ä¼šæœ‰ä¸€ä¸ªä½“éªŒå¾ˆä¸å¥½çš„åœ°æ–¹, å°±æ˜¯åœ¨æ”¯ä»˜è¿‡ç¨‹ä¸­åœç•™è¶…è¿‡5s,æˆ–è€…ç”±äºæŸäº›åŸå› æ”¯ä»˜å¤±è´¥, ä¹Ÿä¼šè¿›è¡Œè·³è½¬åˆ°ç»“æœé¡µ, æ‰€ä»¥éœ€è¦åœ¨ç»“æœé¡µç”±ç”¨æˆ·å»æ‰‹åŠ¨æŸ¥è¯¢æ”¯ä»˜ç»“æœ,å¯ä»¥ç»™ä¸ªå¼¹çª—æç¤ºä¸‹ç”¨æˆ·, æ˜¯å¦æ”¯ä»˜æˆåŠŸ, ç„¶åä½¿ç”¨è®¢å•å·å»æŸ¥è¯¢åå°, æ˜¯å¦çœŸçš„æ”¯ä»˜æˆåŠŸ","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"å¤§ç†ŠBIGBEAR/PHP","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/PHP/"}],"tags":[{"name":"æ”¯ä»˜","slug":"æ”¯ä»˜","permalink":"http://blog.pulsating.cn/tags/%E6%94%AF%E4%BB%98/"},{"name":"ThinkPHP","slug":"ThinkPHP","permalink":"http://blog.pulsating.cn/tags/ThinkPHP/"},{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"å¾®ä¿¡æ”¯ä»˜","slug":"å¾®ä¿¡æ”¯ä»˜","permalink":"http://blog.pulsating.cn/tags/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98/"},{"name":"å¾®ä¿¡H5æ”¯ä»˜","slug":"å¾®ä¿¡H5æ”¯ä»˜","permalink":"http://blog.pulsating.cn/tags/%E5%BE%AE%E4%BF%A1H5%E6%94%AF%E4%BB%98/"}]},{"title":"vueå˜åŒ–ä¾¦æµ‹åŸç†","slug":"vueå˜åŒ–ä¾¦æµ‹åŸç†","date":"2020-10-12T07:17:24.000Z","updated":"2022-01-09T13:55:48.198Z","comments":true,"path":"2020/10/12/vueå˜åŒ–ä¾¦æµ‹åŸç†/","link":"","permalink":"http://blog.pulsating.cn/2020/10/12/vue%E5%8F%98%E5%8C%96%E4%BE%A6%E6%B5%8B%E5%8E%9F%E7%90%86/","excerpt":"","text":"å‰å‡ å¤©é¢è¯•ä¸­é‡åˆ°ä¸€ä¸ªå…³äºvueå˜åŒ–ä¾¦æµ‹çš„é—®é¢˜, ä»Šå¤©æ‰›åˆ°ä¸€ç¯‡æ–‡ç« å†™çš„å¾ˆæ¸…æ¥š, æ¬è¿ä¸€ä¸‹, æ–‡æœ«æ³¨æ˜äº†åŸæ–‡é“¾æ¥ æ·±å…¥æµ…å‡º - vueå˜åŒ–ä¾¦æµ‹åŸç†å…¶å®åœ¨ä¸€å¹´å‰æˆ‘å·²ç»å†™è¿‡ä¸€ç¯‡å…³äº vueå“åº”å¼åŸç†çš„æ–‡ç« ï¼Œä½†æ˜¯æœ€è¿‘æˆ‘ç¿»å¼€çœ‹çœ‹å‘ç°è®²çš„å†…å®¹å’Œæˆ‘ç°åœ¨å¿ƒé‡Œæƒ³çš„æœ‰äº›ä¸å¤ªä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘æ‰“ç®—é‡æ–°å†™ä¸€ç¯‡æ›´é€šä¿—æ˜“æ‡‚çš„æ–‡ç« ã€‚ æˆ‘çš„ç›®æ ‡æ˜¯èƒ½è®©è¯»è€…è¯»å®Œæˆ‘å†™çš„æ–‡ç« èƒ½å­¦åˆ°çŸ¥è¯†ï¼Œæœ‰ä¸€éƒ¨åˆ†æ–‡ç« æ ‡é¢˜éƒ½ä»¥æ·±å…¥æµ…å‡ºå¼€å¤´ï¼Œç›®çš„æ˜¯æŠŠä¸€ä¸ªå¤æ‚çš„ä¸œè¥¿æ’é™¤æ‰å¹²æ‰°å­¦ä¹ çš„å› ç´ åå‰©ä¸‹çš„æ ¸å¿ƒåŸç†é€šè¿‡å¾ˆç®€å•çš„æè¿°æ¥è®©è¯»è€…å­¦ä¹ åˆ°çŸ¥è¯†ã€‚ å…³äºvueçš„å†…éƒ¨åŸç†å…¶å®æœ‰å¾ˆå¤šä¸ªé‡è¦çš„éƒ¨åˆ†ï¼Œå˜åŒ–ä¾¦æµ‹ï¼Œæ¨¡æ¿ç¼–è¯‘ï¼ŒvirtualDOMï¼Œæ•´ä½“è¿è¡Œæµç¨‹ç­‰ã€‚ ä»Šå¤©ä¸»è¦æŠŠå˜åŒ–ä¾¦æµ‹è¿™éƒ¨åˆ†å•ç‹¬æ‹¿å‡ºæ¥è®²ä¸€è®²ã€‚ å¦‚ä½•ä¾¦æµ‹å˜åŒ–ï¼Ÿå…³äºå˜åŒ–ä¾¦æµ‹é¦–å…ˆè¦é—®ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨ js ä¸­ï¼Œå¦‚ä½•ä¾¦æµ‹ä¸€ä¸ªå¯¹è±¡çš„å˜åŒ–ï¼Œå…¶å®è¿™ä¸ªé—®é¢˜è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå­¦è¿‡jsçš„éƒ½èƒ½çŸ¥é“ï¼Œjsä¸­æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥ä¾¦æµ‹åˆ°å˜åŒ–ï¼ŒObject.defineProperty å’Œ ES6 çš„proxyã€‚ åˆ°ç›®å‰ä¸ºæ­¢vueè¿˜æ˜¯ç”¨çš„ Object.definePropertyï¼Œæ‰€ä»¥æˆ‘ä»¬æ‹¿ Object.definePropertyæ¥ä¸¾ä¾‹å­è¯´æ˜è¿™ä¸ªåŸç†ã€‚ è¿™é‡Œæˆ‘æƒ³è¯´çš„æ˜¯ï¼Œä¸ç®¡ä»¥åvueæ˜¯å¦ä¼šç”¨ proxy é‡å†™è¿™éƒ¨åˆ†ï¼Œæˆ‘è®²çš„æ˜¯åŸç†ï¼Œå¹¶ä¸æ˜¯apiï¼Œæ‰€ä»¥ä¸è®ºä»¥åvueä¼šæ€æ ·æ”¹ï¼Œè¿™ä¸ªåŸç†æ˜¯ä¸ä¼šå˜çš„ï¼Œå“ªæ€•vueç”¨äº†å…¶ä»–å®Œå…¨ä¸åŒçš„åŸç†å®ç°äº†å˜åŒ–ä¾¦æµ‹ï¼Œä½†æ˜¯æœ¬ç¯‡æ–‡ç« è®²çš„åŸç†ä¸€æ ·å¯ä»¥å®ç°å˜åŒ–ä¾¦æµ‹ï¼ŒåŸç†è¿™ä¸ªä¸œè¥¿æ˜¯ä¸ä¼šè¿‡æ—¶çš„ã€‚ ä¹‹å‰æˆ‘å†™æ–‡ç« æœ‰ä¸€ä¸ªæ¯›ç—…å°±æ˜¯å–œæ¬¢å¯¹ç€æºç ç¿»è¯‘ï¼Œç»“æœè¿‡äº†åŠå¹´ä¸€å¹´äººå®¶æºç æ”¹äº†ï¼Œæˆ‘å†™çš„æ–‡ç« å°±ä¸€æ¯›é’±éƒ½ä¸å€¼äº†ï¼Œè€Œä¸”å¯¹ç€æºç ç¿»è¯‘è¿˜æœ‰ä¸€ä¸ªç¼ºç‚¹æ˜¯å¯¹è¯»è€…çš„è¦æ±‚æœ‰ç‚¹åé«˜ï¼Œè¯»è€…å¦‚æœæ²¡çœ‹è¿‡æºç æˆ–è€…çœ‹çš„å’Œæˆ‘ä¸æ˜¯ä¸€ä¸ªç‰ˆæœ¬ï¼Œé‚£æ ¹æœ¬å°±ä¸çŸ¥é“æˆ‘åœ¨è¯´ä»€ä¹ˆã€‚ å¥½äº†ä¸è¯´åºŸè¯äº†ï¼Œç»§ç»­è®²åˆšæ‰çš„å†…å®¹ã€‚ çŸ¥é“ Object.defineProperty å¯ä»¥ä¾¦æµ‹åˆ°å¯¹è±¡çš„å˜åŒ–ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç¬é—´å¯ä»¥å†™å‡ºè¿™æ ·çš„ä»£ç ï¼š function defineReactive (data, key, val) { Object.defineProperty(data, key, { enumerable: true, configurable: true, get: function () { return val }, set: function (newVal) { if(val === newVal){ return } val = newVal } }) } å†™ä¸€ä¸ªå‡½æ•°å°è£…ä¸€ä¸‹ Object.definePropertyï¼Œæ¯•ç«Ÿ Object.defineProperty çš„ç”¨æ³•è¿™ä¹ˆå¤æ‚ï¼Œå°è£…ä¸€ä¸‹æˆ‘åªéœ€è¦ä¼ é€’ä¸€ä¸ª dataï¼Œå’Œ keyï¼Œval å°±è¡Œäº†ã€‚ ç°åœ¨å°è£…å¥½äº†ä¹‹åæ¯å½“ data çš„ key è¯»å–æ•°æ® get è¿™ä¸ªå‡½æ•°å¯ä»¥è¢«è§¦å‘ï¼Œè®¾ç½®æ•°æ®çš„æ—¶å€™ set è¿™ä¸ªå‡½æ•°å¯ä»¥è¢«è§¦å‘ï¼Œä½†æ˜¯ï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œï¼Œå‘ç°å¥½åƒå¹¶æ²¡ä»€ä¹ˆé¸Ÿç”¨ï¼Ÿ æ€ä¹ˆè§‚å¯Ÿï¼Ÿç°åœ¨æˆ‘è¦é—®ç¬¬äºŒä¸ªé—®é¢˜ï¼Œâ€œæ€ä¹ˆè§‚å¯Ÿï¼Ÿâ€ æ€è€ƒä¸€ä¸‹ï¼Œæˆ‘ä»¬ä¹‹æ‰€ä»¥è¦è§‚å¯Ÿä¸€ä¸ªæ•°æ®ï¼Œç›®çš„æ˜¯ä¸ºäº†å½“æ•°æ®çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯ä»¥é€šçŸ¥é‚£äº›ä½¿ç”¨äº†è¿™ä¸ª key çš„åœ°æ–¹ã€‚ ä¸¾ä¸ªğŸŒ°ï¼š &lt;template&gt; &lt;div&gt;{{ key }}&lt;/div&gt; &lt;p&gt;{{ key }}&lt;/p&gt; &lt;/template&gt; æ¨¡æ¿ä¸­æœ‰ä¸¤å¤„ä½¿ç”¨äº† keyï¼Œæ‰€ä»¥å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¦æŠŠè¿™ä¸¤å¤„éƒ½é€šçŸ¥åˆ°ã€‚ æ‰€ä»¥ä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘çš„å›ç­”æ˜¯ï¼Œå…ˆæ”¶é›†ä¾èµ–ï¼ŒæŠŠè¿™äº›ä½¿ç”¨åˆ° key çš„åœ°æ–¹å…ˆæ”¶é›†èµ·æ¥ï¼Œç„¶åç­‰å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒæŠŠæ”¶é›†å¥½çš„ä¾èµ–å¾ªç¯è§¦å‘ä¸€éå°±å¥½äº†~ æ€»ç»“èµ·æ¥å…¶å®å°±ä¸€å¥è¯ï¼Œgetterä¸­ï¼Œæ”¶é›†ä¾èµ–ï¼Œsetterä¸­ï¼Œè§¦å‘ä¾èµ–ã€‚ ä¾èµ–æ”¶é›†åœ¨å“ªï¼Ÿç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†å¾ˆæ˜ç¡®çš„ç›®æ ‡ï¼Œå°±æ˜¯è¦åœ¨getterä¸­æ”¶é›†ä¾èµ–ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„ä¾èµ–æ”¶é›†åˆ°å“ªé‡Œå»å‘¢ï¼Ÿï¼Ÿ æ€è€ƒä¸€ä¸‹ï¼Œé¦–å…ˆæƒ³åˆ°çš„æ˜¯æ¯ä¸ª key éƒ½æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥å­˜å‚¨å½“å‰ key çš„ä¾èµ–ï¼Œå‡è®¾ä¾èµ–æ˜¯ä¸€ä¸ªå‡½æ•°å­˜åœ¨ window.target ä¸Šï¼Œå…ˆæŠŠ defineReactive ç¨å¾®æ”¹é€ ä¸€ä¸‹ï¼š function defineReactive (data, key, val) { let dep = [] // æ–°å¢ Object.defineProperty(data, key, { enumerable: true, configurable: true, get: function () { dep.push(window.target) // æ–°å¢ return val }, set: function (newVal) { if(val === newVal){ return } // æ–°å¢ for (let i = 0; i &lt; dep.length; i++) { dep[i](newVal, val) } val = newVal } }) } åœ¨ defineReactive ä¸­æ–°å¢äº†æ•°ç»„ depï¼Œç”¨æ¥å­˜å‚¨è¢«æ”¶é›†çš„ä¾èµ–ã€‚ ç„¶ååœ¨è§¦å‘ set è§¦å‘æ—¶ï¼Œå¾ªç¯depæŠŠæ”¶é›†åˆ°çš„ä¾èµ–è§¦å‘ã€‚ ä½†æ˜¯è¿™æ ·å†™æœ‰ç‚¹è€¦åˆï¼Œæˆ‘ä»¬æŠŠä¾èµ–æ”¶é›†è¿™éƒ¨åˆ†ä»£ç å°è£…èµ·æ¥ï¼Œå†™æˆä¸‹é¢çš„æ ·å­ï¼š export default class Dep { static target: ?Watcher; id: number; subs: Array&lt;Watcher&gt;; constructor () { this.id = uid++ this.subs = [] } addSub (sub: Watcher) { this.subs.push(sub) } removeSub (sub: Watcher) { remove(this.subs, sub) } depend () { if (Dep.target) { this.addSub(Dep.target) } } notify () { // stabilize the subscriber list first const subs = this.subs.slice() for (let i = 0, l = subs.length; i &lt; l; i++) { subs[i].update() } } } ç„¶ååœ¨æ”¹é€ ä¸€ä¸‹ defineReactiveï¼š function defineReactive (data, key, val) { let dep = new Dep() // ä¿®æ”¹ Object.defineProperty(data, key, { enumerable: true, configurable: true, get: function () { dep.depend() // ä¿®æ”¹ return val }, set: function (newVal) { if(val === newVal){ return } dep.notify() // æ–°å¢ val = newVal } }) } è¿™ä¸€æ¬¡ä»£ç çœ‹èµ·æ¥æ¸…æ™°å¤šäº†ï¼Œé¡ºä¾¿å›ç­”ä¸€ä¸‹ä¸Šé¢é—®çš„é—®é¢˜ï¼Œä¾èµ–æ”¶é›†åˆ°å“ªï¼Ÿæ”¶é›†åˆ°Depä¸­ï¼ŒDepæ˜¯ä¸“é—¨ç”¨æ¥å­˜å‚¨ä¾èµ–çš„ã€‚ æ”¶é›†è°ï¼Ÿä¸Šé¢æˆ‘ä»¬å‡è£… window.target æ˜¯éœ€è¦è¢«æ”¶é›†çš„ä¾èµ–ï¼Œç»†å¿ƒçš„åŒå­¦å¯èƒ½å·²ç»çœ‹åˆ°ï¼Œä¸Šé¢çš„ä»£ç  window.target å·²ç»æ”¹æˆäº† Dep.targetï¼Œé‚£ Dep.targetæ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬ç©¶ç«Ÿè¦æ”¶é›†è°å‘¢ï¼Ÿï¼Ÿ æ”¶é›†è°ï¼Œæ¢å¥è¯è¯´æ˜¯å½“å±æ€§å‘ç”Ÿå˜åŒ–åï¼Œé€šçŸ¥è°ã€‚ æˆ‘ä»¬è¦é€šçŸ¥é‚£ä¸ªä½¿ç”¨åˆ°æ•°æ®çš„åœ°æ–¹ï¼Œè€Œä½¿ç”¨è¿™ä¸ªæ•°æ®çš„åœ°æ–¹æœ‰å¾ˆå¤šï¼Œè€Œä¸”ç±»å‹è¿˜ä¸ä¸€æ ·ï¼Œæœ‰å¯èƒ½æ˜¯æ¨¡æ¿ï¼Œæœ‰å¯èƒ½æ˜¯ç”¨æˆ·å†™çš„ä¸€ä¸ª watchï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦æŠ½è±¡å‡ºä¸€ä¸ªèƒ½é›†ä¸­å¤„ç†è¿™äº›ä¸åŒæƒ…å†µçš„ç±»ï¼Œç„¶åæˆ‘ä»¬åœ¨ä¾èµ–æ”¶é›†çš„é˜¶æ®µåªæ”¶é›†è¿™ä¸ªå°è£…å¥½çš„ç±»çš„å®ä¾‹è¿›æ¥ï¼Œé€šçŸ¥ä¹Ÿåªé€šçŸ¥å®ƒä¸€ä¸ªï¼Œç„¶åå®ƒåœ¨è´Ÿè´£é€šçŸ¥å…¶ä»–åœ°æ–¹ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŠ½è±¡çš„è¿™ä¸ªä¸œè¥¿éœ€è¦å…ˆèµ·ä¸€ä¸ªå¥½å¬çš„åå­—ï¼Œå—¯ï¼Œå°±å«å®ƒwatcherå§~ æ‰€ä»¥ç°åœ¨å¯ä»¥å›ç­”ä¸Šé¢çš„é—®é¢˜ï¼Œæ”¶é›†è°ï¼Ÿï¼Ÿæ”¶é›† Watcherã€‚ ä»€ä¹ˆæ˜¯Watcherï¼Ÿwatcher æ˜¯ä¸€ä¸ªä¸­ä»‹çš„è§’è‰²ï¼Œæ•°æ®å‘ç”Ÿå˜åŒ–é€šçŸ¥ç»™ watcherï¼Œç„¶åwatcheråœ¨é€šçŸ¥ç»™å…¶ä»–åœ°æ–¹ã€‚ å…³äºwatcheræˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªç»å…¸çš„ä½¿ç”¨æ–¹å¼ï¼š // keypath vm.$watch(&#39;a.b.c&#39;, function (newVal, oldVal) { // do something }) è¿™æ®µä»£ç è¡¨ç¤ºå½“ data.a.b.c è¿™ä¸ªå±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘ç¬¬äºŒä¸ªå‚æ•°è¿™ä¸ªå‡½æ•°ã€‚ æ€è€ƒä¸€ä¸‹æ€ä¹ˆå®ç°è¿™ä¸ªåŠŸèƒ½å‘¢ï¼Ÿ å¥½åƒåªè¦æŠŠè¿™ä¸ª watcher å®ä¾‹æ·»åŠ åˆ° data.a.b.c è¿™ä¸ªå±æ€§çš„ Dep ä¸­å»å°±è¡Œäº†ï¼Œç„¶å data.a.b.c è§¦å‘æ—¶ï¼Œä¼šé€šçŸ¥åˆ°watcherï¼Œç„¶åwatcheråœ¨æ‰§è¡Œå‚æ•°ä¸­çš„è¿™ä¸ªå›è°ƒå‡½æ•°ã€‚ å¥½ï¼Œæ€è€ƒå®Œæ¯•ï¼Œå¼€å·¥ï¼Œå†™å‡ºå¦‚ä¸‹ä»£ç ï¼š class Watch { constructor (expOrFn, cb) { // æ‰§è¡Œ this.getter() å°±å¯ä»¥æ‹¿åˆ° data.a.b.c this.getter = parsePath(expOrFn) this.cb = cb this.value = this.get() } get () { Dep.target = this value = this.getter.call(vm, vm) Dep.target = undefined } update () { const oldValue = this.value this.value = this.get() this.cb.call(this.vm, this.value, oldValue) } } è¿™æ®µä»£ç å¯ä»¥æŠŠè‡ªå·±ä¸»åŠ¨ push åˆ° data.a.b.c çš„ Dep ä¸­å»ã€‚ å› ä¸ºæˆ‘åœ¨ get è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå…ˆæŠŠ Dep.traget è®¾ç½®æˆäº† thisï¼Œä¹Ÿå°±æ˜¯å½“å‰watcherå®ä¾‹ï¼Œç„¶ååœ¨è¯»ä¸€ä¸‹ data.a.b.c çš„å€¼ã€‚ å› ä¸ºè¯»äº† data.a.b.c çš„å€¼ï¼Œæ‰€ä»¥è‚¯å®šä¼šè§¦å‘ getterã€‚ è§¦å‘äº† getter ä¸Šé¢æˆ‘ä»¬å°è£…çš„ defineReactive å‡½æ•°ä¸­æœ‰ä¸€æ®µé€»è¾‘å°±ä¼šä» Dep.target é‡Œè¯»ä¸€ä¸ªä¾èµ– push åˆ° Dep ä¸­ã€‚ æ‰€ä»¥å°±å¯¼è‡´ï¼Œæˆ‘åªè¦å…ˆåœ¨ Dep.target èµ‹ä¸€ä¸ª thisï¼Œç„¶åæˆ‘åœ¨è¯»ä¸€ä¸‹å€¼ï¼Œå»è§¦å‘ä¸€ä¸‹ getterï¼Œå°±å¯ä»¥æŠŠ this ä¸»åŠ¨ push åˆ° keypath çš„ä¾èµ–ä¸­ï¼Œæœ‰æ²¡æœ‰å¾ˆç¥å¥‡~ ä¾èµ–æ³¨å…¥åˆ° Dep ä¸­å»ä¹‹åï¼Œå½“è¿™ä¸ª data.a.b.c çš„å€¼å‘ç”Ÿå˜åŒ–ï¼Œå°±æŠŠæ‰€æœ‰çš„ä¾èµ–å¾ªç¯è§¦å‘ update æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢ä»£ç ä¸­ update é‚£ä¸ªæ–¹æ³•ã€‚ update æ–¹æ³•ä¼šè§¦å‘å‚æ•°ä¸­çš„å›è°ƒå‡½æ•°ï¼Œå°†value å’Œ oldValue ä¼ åˆ°å‚æ•°ä¸­ã€‚ æ‰€ä»¥å…¶å®ä¸ç®¡æ˜¯ç”¨æˆ·æ‰§è¡Œçš„ vm.$watch(&#39;a.b.c&#39;, (value, oldValue) =&gt; {}) è¿˜æ˜¯æ¨¡æ¿ä¸­ç”¨åˆ°çš„dataï¼Œéƒ½æ˜¯é€šè¿‡ watcher æ¥é€šçŸ¥è‡ªå·±æ˜¯å¦éœ€è¦å‘ç”Ÿå˜åŒ–çš„ã€‚ é€’å½’ä¾¦æµ‹æ‰€æœ‰keyç°åœ¨å…¶å®å·²ç»å¯ä»¥å®ç°å˜åŒ–ä¾¦æµ‹çš„åŠŸèƒ½äº†ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹‹å‰å†™çš„ä»£ç åªèƒ½ä¾¦æµ‹æ•°æ®ä¸­çš„ä¸€ä¸ª keyï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åŠ å·¥ä¸€ä¸‹ defineReactive è¿™ä¸ªå‡½æ•°ï¼š // æ–°å¢ function walk (obj: Object) { const keys = Object.keys(obj) for (let i = 0; i &lt; keys.length; i++) { defineReactive(obj, keys[i], obj[keys[i]]) } } function defineReactive (data, key, val) { walk(val) // æ–°å¢ let dep = new Dep() Object.defineProperty(data, key, { enumerable: true, configurable: true, get: function () { dep.depend() return val }, set: function (newVal) { if(val === newVal){ return } dep.notify() val = newVal } }) } è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ‰§è¡Œ walk(data)ï¼ŒæŠŠ data ä¸­çš„æ‰€æœ‰ key éƒ½åŠ å·¥æˆå¯ä»¥è¢«ä¾¦æµ‹çš„ï¼Œå› ä¸ºæ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥ key ä¸­çš„ value å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£è¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰keyä¹Ÿä¼šè¢«ä¾¦æµ‹ã€‚ Arrayæ€ä¹ˆè¿›è¡Œå˜åŒ–ä¾¦æµ‹ï¼Ÿç°åœ¨åˆå‘ç°äº†æ–°çš„é—®é¢˜ï¼Œdata ä¸­ä¸æ˜¯æ‰€æœ‰çš„ value éƒ½æ˜¯å¯¹è±¡å’ŒåŸºæœ¬ç±»å‹ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªæ•°ç»„æ€ä¹ˆåŠï¼Ÿï¼Ÿæ•°ç»„æ˜¯æ²¡æœ‰åŠæ³•é€šè¿‡ Object.defineProperty æ¥ä¾¦æµ‹åˆ°è¡Œä¸ºçš„ã€‚ vue ä¸­å¯¹è¿™ä¸ªæ•°ç»„é—®é¢˜çš„è§£å†³æ–¹æ¡ˆéå¸¸çš„ç®€å•ç²—æš´ï¼Œæˆ‘è¯´è¯´vueæ˜¯å¦‚ä½•å®ç°çš„ï¼Œå¤§ä½“ä¸Šåˆ†ä¸‰æ­¥ï¼š ç¬¬ä¸€æ­¥ï¼šå…ˆæŠŠåŸç”Ÿ Array çš„åŸå‹æ–¹æ³•ç»§æ‰¿ä¸‹æ¥ã€‚ ç¬¬äºŒæ­¥ï¼šå¯¹ç»§æ‰¿åçš„å¯¹è±¡ä½¿ç”¨ Object.defineProperty åšä¸€äº›æ‹¦æˆªæ“ä½œã€‚ ç¬¬ä¸‰æ­¥ï¼šæŠŠåŠ å·¥åå¯ä»¥è¢«æ‹¦æˆªçš„åŸå‹ï¼Œèµ‹å€¼åˆ°éœ€è¦è¢«æ‹¦æˆªçš„ Array ç±»å‹çš„æ•°æ®çš„åŸå‹ä¸Šã€‚ vueçš„å®ç° ç¬¬ä¸€æ­¥ï¼š const arrayProto = Array.prototype export const arrayMethods = Object.create(arrayProto) ç¬¬äºŒæ­¥ï¼š ;[ &#39;push&#39;, &#39;pop&#39;, &#39;shift&#39;, &#39;unshift&#39;, &#39;splice&#39;, &#39;sort&#39;, &#39;reverse&#39; ] .forEach(function (method) { // cache original method const original = arrayProto[method] Object.defineProperty(arrayMethods, method, { value: function mutator (...args) { console.log(methods) // æ‰“å°æ•°ç»„æ–¹æ³• return original.apply(this, args) }, enumerable: false, writable: true, configurable: true }) }) ç°åœ¨å¯ä»¥çœ‹åˆ°ï¼Œæ¯å½“è¢«ä¾¦æµ‹çš„ array æ‰§è¡Œæ–¹æ³•æ“ä½œæ•°ç»„æ—¶ï¼Œæˆ‘éƒ½å¯ä»¥çŸ¥é“ä»–æ‰§è¡Œçš„æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Œå¹¶ä¸”æ‰“å°åˆ° console ä¸­ã€‚ ç°åœ¨æˆ‘è¦å¯¹è¿™ä¸ªæ•°ç»„æ–¹æ³•ç±»å‹è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæ“ä½œæ•°ç»„çš„æ–¹æ³•æ˜¯ push unshift splice ï¼ˆè¿™ç§å¯ä»¥æ–°å¢æ•°ç»„å…ƒç´ çš„æ–¹æ³•ï¼‰ï¼Œéœ€è¦æŠŠæ–°å¢çš„å…ƒç´ ç”¨ä¸Šé¢å°è£…çš„ walk æ¥è¿›è¡Œå˜åŒ–æ£€æµ‹ã€‚ å¹¶ä¸”ä¸è®ºæ“ä½œæ•°ç»„çš„æ˜¯ä»€ä¹ˆæ–¹æ³•ï¼Œæˆ‘éƒ½è¦è§¦å‘æ¶ˆæ¯ï¼Œé€šçŸ¥ä¾èµ–åˆ—è¡¨ä¸­çš„ä¾èµ–æ•°æ®å‘ç”Ÿäº†å˜åŒ–ã€‚ é‚£ç°åœ¨æ€ä¹ˆè®¿é—®ä¾èµ–åˆ—è¡¨å‘¢ï¼Œå¯èƒ½æˆ‘ä»¬éœ€è¦æŠŠä¸Šé¢å°è£…çš„ walk åŠ å·¥ä¸€ä¸‹ï¼š // å·¥å…·å‡½æ•° function def (obj: Object, key: string, val: any, enumerable?: boolean) { Object.defineProperty(obj, key, { value: val, enumerable: !!enumerable, writable: true, configurable: true }) } export class Observer { value: any; dep: Dep; vmCount: number; // number of vms that has this object as root $data constructor (value: any) { this.value = value this.dep = new Dep() // æ–°å¢ this.vmCount = 0 def(value, &#39;__ob__&#39;, this) // æ–°å¢ // æ–°å¢ if (Array.isArray(value)) { this.observeArray(value) } else { this.walk(value) } } /** * Walk through each property and convert them into * getter/setters. This method should only be called when * value type is Object. */ walk (obj: Object) { const keys = Object.keys(obj) for (let i = 0; i &lt; keys.length; i++) { defineReactive(obj, keys[i], obj[keys[i]]) } } /** * Observe a list of Array items. */ observeArray (items: Array&lt;any&gt;) { for (let i = 0, l = items.length; i &lt; l; i++) { new Observer(items[i]) } } } æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª Observerspace######spaceç±»ï¼Œä»–çš„èŒè´£æ˜¯å°† data è½¬æ¢æˆå¯ä»¥è¢«ä¾¦æµ‹åˆ°å˜åŒ–çš„ dataï¼Œå¹¶ä¸”æ–°å¢äº†å¯¹ç±»å‹çš„åˆ¤æ–­ï¼Œå¦‚æœæ˜¯ value çš„ç±»å‹æ˜¯ Array å¾ªç¯ Arrayå°†æ¯ä¸€ä¸ªå…ƒç´ ä¸¢åˆ° Observer ä¸­ã€‚ å¹¶ä¸”åœ¨ value ä¸Šåšäº†ä¸€ä¸ªæ ‡è®° __ob__ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ value çš„ __ob__ æ‹¿åˆ°Observerå®ä¾‹ï¼Œç„¶åä½¿ç”¨ __ob__ ä¸Šçš„ dep.notify() å°±å¯ä»¥å‘é€é€šçŸ¥å•¦ã€‚ ç„¶åæˆ‘ä»¬åœ¨æ”¹è¿›ä¸€ä¸‹ArrayåŸå‹çš„æ‹¦æˆªå™¨ï¼š ;[ &#39;push&#39;, &#39;pop&#39;, &#39;shift&#39;, &#39;unshift&#39;, &#39;splice&#39;, &#39;sort&#39;, &#39;reverse&#39; ] .forEach(function (method) { // cache original method const original = arrayProto[method] def(arrayMethods, method, function mutator (...args) { const result = original.apply(this, args) const ob = this.__ob__ let inserted switch (method) { case &#39;push&#39;: case &#39;unshift&#39;: inserted = args break case &#39;splice&#39;: inserted = args.slice(2) break } if (inserted) ob.observeArray(inserted) // notify change ob.dep.notify() return result }) }) å¯ä»¥çœ‹åˆ°å†™äº†ä¸€ä¸ª switch å¯¹ method è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæ˜¯ pushï¼Œunshiftï¼Œsplice è¿™ç§å¯ä»¥æ–°å¢æ•°ç»„å…ƒç´ çš„æ–¹æ³•å°±ä½¿ç”¨ ob.observeArray(inserted) æŠŠæ–°å¢çš„å…ƒç´ ä¹Ÿä¸¢åˆ° Observer ä¸­å»è½¬æ¢æˆå¯ä»¥è¢«ä¾¦æµ‹åˆ°å˜åŒ–çš„æ•°æ®ã€‚ åœ¨æœ€åä¸è®ºæ“ä½œæ•°ç»„çš„æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Œéƒ½ä¼šè°ƒç”¨ ob.dep.notify() å»é€šçŸ¥ watcher æ•°æ®å‘ç”Ÿäº†æ”¹å˜ã€‚ arrayMethods æ˜¯æ€ä¹ˆç”Ÿæ•ˆçš„ï¼Ÿç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ª arrayMenthods æ˜¯è¢«åŠ å·¥åçš„ Array.prototypeï¼Œé‚£ä¹ˆæ€ä¹ˆè®©è¿™ä¸ªå¯¹è±¡åº”ç”¨åˆ°Array ä¸Šé¢å‘¢ï¼Ÿ æ€è€ƒä¸€ä¸‹ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥ä¿®æ”¹ Array.prototypeå› ä¸ºè¿™æ ·ä¼šæ±¡æŸ“å…¨å±€çš„Arrayï¼Œæˆ‘ä»¬å¸Œæœ› arrayMenthods åªå¯¹ dataä¸­çš„Array ç”Ÿæ•ˆã€‚ æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æŠŠ arrayMenthods èµ‹å€¼ç»™ value çš„ __proto__ ä¸Šå°±å¥½äº†ã€‚ æˆ‘ä»¬æ”¹é€ ä¸€ä¸‹ Observerï¼š export class Observer { constructor (value: any) { this.value = value this.dep = new Dep() this.vmCount = 0 def(value, &#39;__ob__&#39;, this) if (Array.isArray(value)) { value.__proto__ = arrayMethods // æ–°å¢ this.observeArray(value) } else { this.walk(value) } } } å¦‚æœä¸èƒ½ä½¿ç”¨ __proto__ï¼Œå°±ç›´æ¥å¾ªç¯ arrayMethods æŠŠå®ƒèº«ä¸Šçš„è¿™äº›æ–¹æ³•ç›´æ¥è£…åˆ° value èº«ä¸Šå¥½äº†ã€‚ ä»€ä¹ˆæƒ…å†µä¸èƒ½ä½¿ç”¨ __proto__ æˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œå„ä½å¤§ä½¬è°çŸ¥é“èƒ½å¦ç»™æˆ‘ç•™ä¸ªè¨€ï¼Ÿè·ªè°¢~ æ‰€ä»¥æˆ‘ä»¬çš„ä»£ç åˆè¦æ”¹é€ ä¸€ä¸‹ï¼š // can we use __proto__? const hasProto = &#39;__proto__&#39; in {} // æ–°å¢ export class Observer { constructor (value: any) { this.value = value this.dep = new Dep() this.vmCount = 0 def(value, &#39;__ob__&#39;, this) if (Array.isArray(value)) { // ä¿®æ”¹ const augment = hasProto ? protoAugment : copyAugment augment(value, arrayMethods, arrayKeys) this.observeArray(value) } else { this.walk(value) } } } function protoAugment (target, src: Object, keys: any) { target.__proto__ = src } function copyAugment (target: Object, src: Object, keys: Array&lt;string&gt;) { for (let i = 0, l = keys.length; i &lt; l; i++) { const key = keys[i] def(target, key, src[key]) } } å…³äºArrayçš„é—®é¢˜å…³äºvueå¯¹Arrayçš„æ‹¦æˆªå®ç°ä¸Šé¢åˆšè¯´å®Œï¼Œæ­£å› ä¸ºè¿™ç§å®ç°æ–¹å¼ï¼Œå…¶å®æœ‰äº›æ•°ç»„æ“ä½œvueæ˜¯æ‹¦æˆªä¸åˆ°çš„ï¼Œä¾‹å¦‚ï¼š this.list[0] = 2ä¿®æ”¹æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼Œæ— æ³•ä¾¦æµ‹åˆ°æ•°ç»„çš„å˜åŒ–ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šè§¦å‘ re-render æˆ– watch ç­‰ã€‚ å†ä¾‹å¦‚ï¼š this.list.length = 0 æ¸…ç©ºæ•°ç»„æ“ä½œï¼Œæ— æ³•ä¾¦æµ‹åˆ°æ•°ç»„çš„å˜åŒ–ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šè§¦å‘ re-render æˆ– watch ç­‰ã€‚ å› ä¸ºvueçš„å®ç°æ–¹å¼å°±å†³å®šäº†æ— æ³•å¯¹ä¸Šé¢ä¸¾å¾—ä¸¤ä¸ªä¾‹å­åšæ‹¦æˆªï¼Œä¹Ÿå°±æ²¡æœ‰åŠæ³•åšåˆ°å“åº”ï¼ŒES6æ˜¯æœ‰èƒ½åŠ›åšåˆ°çš„ï¼Œåœ¨ES6ä¹‹å‰æ˜¯æ— æ³•åšåˆ°æ¨¡æ‹Ÿæ•°ç»„çš„åŸç”Ÿè¡Œä¸ºçš„ï¼Œç°åœ¨ ES6 çš„ Proxy å¯ä»¥æ¨¡æ‹Ÿæ•°ç»„çš„åŸç”Ÿè¡Œä¸ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡ ES6 çš„ç»§æ‰¿æ¥ç»§æ‰¿æ•°ç»„åŸç”Ÿè¡Œä¸ºï¼Œä»è€Œè¿›è¡Œæ‹¦æˆªã€‚ æ€»ç»“ æœ€åæå‡ºvueå®˜ç½‘ä¸Šçš„ä¸€å¼ å›¾ï¼Œè¿™å¼ å›¾å…¶å®éå¸¸æ¸…æ™°ï¼Œå°±æ˜¯ä¸€ä¸ªå˜åŒ–ä¾¦æµ‹çš„åŸç†å›¾ã€‚ æ·±å…¥å“åº”å¼åŸç†-vue.js getter åˆ° watcher æœ‰ä¸€æ¡çº¿ï¼Œä¸Šé¢å†™ç€æ”¶é›†ä¾èµ–ï¼Œæ„æ€æ˜¯è¯´ getter é‡Œæ”¶é›† watcherï¼Œä¹Ÿå°±æ˜¯è¯´å½“æ•°æ®å‘ç”Ÿ get åŠ¨ä½œæ—¶å¼€å§‹æ”¶é›† watcherã€‚ setter åˆ° watcher æœ‰ä¸€æ¡çº¿ï¼Œå†™ç€ Notify æ„æ€æ˜¯è¯´åœ¨ setter ä¸­è§¦å‘æ¶ˆæ¯ï¼Œä¹Ÿå°±æ˜¯å½“æ•°æ®å‘ç”Ÿ set åŠ¨ä½œæ—¶ï¼Œé€šçŸ¥ watcherã€‚ Watcher åˆ° ComponentRenderFunction æœ‰ä¸€æ¡çº¿ï¼Œå†™ç€ Trigger re-render æ„æ€å¾ˆæ˜æ˜¾äº† åŸæ–‡é“¾æ¥: easyhappy4205, æ·±å…¥æµ…å‡º - vueå˜åŒ–ä¾¦æµ‹åŸç†","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"å‰ç«¯","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/"},{"name":"JavaScript","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯/JavaScript","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/JavaScript/"},{"name":"Vue","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯/JavaScript/Vue","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/JavaScript/Vue/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://blog.pulsating.cn/tags/Vue/"},{"name":"Js","slug":"Js","permalink":"http://blog.pulsating.cn/tags/Js/"}]},{"title":"JS Enent Loop","slug":"JS-Enent-Loop","date":"2020-10-07T02:59:19.000Z","updated":"2022-01-09T15:42:26.589Z","comments":true,"path":"2020/10/07/JS-Enent-Loop/","link":"","permalink":"http://blog.pulsating.cn/2020/10/07/JS-Enent-Loop/","excerpt":"","text":"ææ‡‚JSçš„è¿è¡Œæœºåˆ¶","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"å‰ç«¯","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/"},{"name":"JavaScript","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯/JavaScript","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/JavaScript/"}],"tags":[{"name":"Js","slug":"Js","permalink":"http://blog.pulsating.cn/tags/Js/"}]},{"title":"mysql ä»æ ‘å½¢ç»“æ„è¡¨ä¸­è·å–å¶å­ç»“ç‚¹æ•°æ®","slug":"mysql-select-leaf-node-from-tree-structure-data","date":"2020-06-20T01:59:36.000Z","updated":"2022-01-09T13:55:48.196Z","comments":true,"path":"2020/06/20/mysql-select-leaf-node-from-tree-structure-data/","link":"","permalink":"http://blog.pulsating.cn/2020/06/20/mysql-select-leaf-node-from-tree-structure-data/","excerpt":"> å¶å­ç»“ç‚¹ å°±æ˜¯å‡ºåº¦ä¸º0çš„ç»“ç‚¹ å°±æ˜¯æ²¡æœ‰å­ç»“ç‚¹çš„ç»“ç‚¹","text":"> å¶å­ç»“ç‚¹ å°±æ˜¯å‡ºåº¦ä¸º0çš„ç»“ç‚¹ å°±æ˜¯æ²¡æœ‰å­ç»“ç‚¹çš„ç»“ç‚¹ å…ˆè®°å½•ä¸‹sql, åé¢è¯¦ç»†è¯´æ˜ catalogueæ˜¯ä¸€å¼ å­˜å‚¨ç€ä¹¦ç±ç›®å½•çš„è¡¨ ä¸»è¦å­—æ®µåŒ…æ‹¬ id ä¸»é”®, å”¯ä¸€ parent_id çˆ¶ç›®å½•id book_id å¯¹åº”çš„ä¹¦ç±id select b.* from catalogue a right join catalogue b on a.parent_id = b.id where b.book_id = 555 group by b.id having count(a.id) = 0;","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"å¤§ç†ŠBIGBEAR/Mysql","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"Mysql","permalink":"http://blog.pulsating.cn/tags/Mysql/"}]},{"title":"Uni-App Android Native Plugin Develop","slug":"uniapp-android-native-plugin-develop","date":"2020-05-25T01:54:02.000Z","updated":"2022-01-09T13:55:48.197Z","comments":true,"path":"2020/05/25/uniapp-android-native-plugin-develop/","link":"","permalink":"http://blog.pulsating.cn/2020/05/25/uniapp-android-native-plugin-develop/","excerpt":"","text":"è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡æ¥è§¦åŸç”ŸAndroidå¼€å‘, ç¬¬ä¸€æ¬¡ä½¿ç”¨Android Studio, æ„Ÿè§‰å¾ˆåƒåŠ›, ç›®å‰è¿˜æœ‰å¾ˆå¤šåœ°æ–¹ä¸æ˜æ‰€ä»¥, ç´¢æ€§æœ€åè¿˜æ˜¯æˆåŠŸäº†, æ‰€ä»¥å…ˆå†™ä¸€ç¯‡æ–‡ç« è®°å½•ä¸‹å¼€å‘uni-app androidåŸç”Ÿæ’ä»¶åŠåœ¨uni-appä¸­é›†æˆä½¿ç”¨çš„è¿‡ç¨‹, æ–‡ç« ä¼šç»“åˆä¸¤ä¸ªå…·ä½“å®ä¾‹æ¥å®Œæˆ, ä¾›å¤§å®¶å‚è€ƒ ç¯å¢ƒè¿™é‡Œä»…è¯´æ˜æœ¬æ–‡ä½¿ç”¨çš„å¼€å‘ç¯å¢ƒ, ç‰ˆæœ¬ä¸ä¸€å®šéè¦ä¸€è‡´, ä½†æ˜¯ä¸çŸ¥é“ä¼šä¸ä¼šå‡ºç°é—®é¢˜ JDK1.8 å®˜ç½‘æ¨è jdk1.7+(æœ€ä¼˜1.8) Android SDK Android Studio ç›®å‰ç”¨çš„æœ€æ–°ç‰ˆ3.6.3 Appç¦»çº¿SDK å»ºè®®ä½¿ç”¨æœ€æ–°ç‰ˆ, æœ€å¥½åŒæ—¶ä½¿ç”¨å¯¹åº”ç‰ˆæœ¬çš„HbuilderX ç§‘å­¦ä¸Šç½‘ æƒ³æƒ³åŠæ³• ç®€ä»‹ç›®çš„uniåŸç”Ÿæ’ä»¶, æ˜¯ä¸ºäº†è¡¥è¶³uni-appé¡¹ç›®çš„åŠŸèƒ½, æˆ–è€…è¿›ä¸€æ­¥æé«˜APPæ€§èƒ½, åŸºäºå¼€æºé¡¹ç›®weexæ¶æ„ æ¨¡å¼æ ¹æ®ä¸åŒéœ€æ±‚, uniåŸç”Ÿæ’ä»¶å¯åˆ†ä¸ºä¸¤ä¸ªæ¨¡å¼ Moduleæ¨¡å¼ èƒ½åŠ›æ‰©å±•ï¼Œæ— åµŒå…¥çª—ä½“çš„UIæ§ä»¶ã€‚å¤§éƒ¨åˆ†æ’ä»¶éƒ½æ˜¯å±äºæ­¤ç±»ï¼Œæ¯”å¦‚è°ƒç”¨è®¡æ­¥å™¨APIã€‚ä»£ç å†™æ³•ä¸ºé€šè¿‡jsè¿›è¡Œrequireï¼Œç„¶åè°ƒç”¨è¯¥æ’ä»¶å¯¹è±¡çš„æ–¹æ³•ã€‚å¦‚æ¶‰åŠä¸€äº›å¼¹å‡ºæ¡†ã€å…¨å±uiï¼Œä¹Ÿä»ç„¶å±äºModuleæ¨¡å¼ã€‚ç±»ä¼¼äºå‰ç«¯é‡Œçš„js sdk Componentæ¨¡å¼ åœ¨çª—ä½“ä¸­å†…åµŒæ˜¾ç¤ºæŸä¸ªåŸç”Ÿuiç»„ä»¶ã€‚æ¯”å¦‚çª—ä½“å±€éƒ¨å†…åµŒæŸä¸ªåœ°å›¾å‚å•†çš„mapç»„ä»¶ï¼Œä¸Šä¸‹æ··æ’å…¶ä»–å‰ç«¯å†…å®¹ï¼Œå°±éœ€è¦æŠŠè¿™ä¸ªåŸç”Ÿåœ°å›¾sdkå°è£…ä¸ºComponetæ¨¡å¼ã€‚ä»£ç å†™æ³•ä¸vueç»„ä»¶ç›¸åŒï¼Œåœ¨templateé‡Œå†™ç»„ä»¶æ ‡ç­¾ã€‚ç±»ä¼¼äºå‰ç«¯é‡Œçš„vueç»„ä»¶ã€‚ æ³¨æ„ vueé¡µé¢ä¸­ä»…æ”¯æŒä½¿ç”¨Moduleç±»å‹çš„åŸç”Ÿæ’ä»¶ï¼Œä¸”ä¸æ”¯æŒè°ƒç”¨åŒæ­¥æ–¹æ³•è¿”å›æ•°æ® nvueé¡µé¢ä¸­æ”¯æŒä½¿ç”¨Moduleå’ŒComponentä¸¤ç§ç±»å‹çš„åŸç”Ÿæ’ä»¶ æœ¬æ–‡ä»…æ¶‰åŠåˆ°Moduleæ¨¡å¼ äº†è§£å®˜æ–¹ç¤ºä¾‹Androidç¦»çº¿sdkä¸‹è½½æˆ‘è¿™é‡Œä¸‹è½½çš„æ˜¯2.6.16ç‰ˆæœ¬, å¦‚æœä¸æƒ³ä½¿ç”¨æœ€æ–°ç‰ˆ, å¯ä»¥åœ¨Dcloudæä¾›çš„ç½‘ç›˜ä¸‹è½½å†å²ç‰ˆæœ¬ ç›®å½• UniPlugin-Hello-AS: Android Studioç¯å¢ƒç¦»çº¿æ‰“åŒ…å¸¦æ‰©å±•æ’ä»¶æ¼”ç¤ºåº”ç”¨, æœ¬æ–‡çš„ä¸»è§’ SDK: SDKåº“æ–‡ä»¶, åœ¨libsä¸­ HBuilder-Hello: ç¦»çº¿æ‰“åŒ…æ¼”ç¤ºåº”ç”¨ HBuilder-Integrate-AS: 5+ SDK é›†æˆå’Œæ’ä»¶å¼€å‘ç¤ºä¾‹ å¯¼å…¥ File-&gt;New-&gt;Import Project æ‰¾åˆ°ç¦»çº¿sdkç›®å½•, å°†UniPlugin-Hello-ASé¡¹ç›®å¯¼å…¥, ç‚¹å‡»ok, ç­‰å¾…buildç»“æŸ è¿è¡Œç¤ºä¾‹ æ•°æ®çº¿å°†æ‰‹æœºè¿æ¥ç”µè„‘ä¸Š, å¼€å¯å¼€å‘è€…é€‰é¡¹, æ‰“å¼€USBè°ƒè¯•åŠå…è®¸USBå®‰è£…åº”ç”¨, è¯·è‡ªè¡Œgoogleæˆ–ç™¾åº¦ä½ çš„æœºå‹å¦‚ä½•å¼€å¯, HbuilderXä¸­ä¹Ÿæœ‰å¦‚ä½•çœŸæœºè°ƒè¯•çš„æ•™ç¨‹ Android Studioä¸­å°†é¡¹ç›®è¿è¡Œåˆ°çœŸæœº, é€‰æ‹©app, åŠä½ çš„æ‰‹æœºå‹å·, ç‚¹å‡»å³ä¾§ç»¿è‰²ä¸‰è§’è¿è¡Œ è¿è¡ŒæˆåŠŸå¯ä»¥åœ¨ä½ è¿æ¥çš„æ‰‹æœºä¸Šçœ‹åˆ°è¿è¡Œèµ·æ¥çš„app, æœ‰è¿™æ ·ä¸‰ä¸ªéƒ¨åˆ†, åˆ†åˆ«å¯¹åº”ç€é¡¹ç›®ä¸­çš„ä¸‰ä¸ªåº“, ä¹Ÿå¯ä»¥è¯´æ˜¯ä¸‰ä¸ªæ’ä»¶ ç”Ÿæˆæœ¬åœ°æ‰“åŒ…èµ„æºå·¦ä¸Šè§’ä»£ç è§†å›¾è°ƒæ•´åˆ°Android, ä¾æ¬¡æ‰“å¼€app/assets/apps/__UNI__BCEC007/wwwç›®å½•, æˆ‘ä»¬çœ‹åˆ°çš„æ˜¯ç¼–è¯‘åçš„uni-appé¡¹ç›®, é‚£ä¹ˆè¦å¦‚ä½•ç¼–è¯‘å‘¢? æˆ‘ä»¬å°†ä»£ç è§†å›¾è°ƒæ•´ä¸ºProject, çœ‹åˆ°æœ‰ä¸ªåä¸ºuniappç¤ºä¾‹å·¥ç¨‹æºç çš„ç›®å½•, å±•å¼€åçœ‹åˆ°äº†æˆ‘ä»¬ç†Ÿæ‚‰çš„uni-appé¡¹ç›®ç»“æ„ å°†å…¶unipluginDemoé¡¹ç›®ä½¿ç”¨HbuilderXæ‰“å¼€, æ‰“å¼€manifest.jsoné‡æ–°è·å–ä¸€ä¸‹AppID ä¾æ¬¡ç‚¹å‡»å‘è¡Œ-&gt;åŸç”Ÿappæœ¬åœ°æ‰“åŒ…, ç”Ÿæˆæœ¬åœ°æ‰“åŒ…appèµ„æº ç­‰å¾…æ§åˆ¶å°æç¤ºå¯¼å‡ºæˆåŠŸ, æ‰“å¼€unpackage/resourcesç›®å½•å¯ä»¥çœ‹åˆ°appèµ„æºå·²ç»ç”Ÿæˆå¥½äº† å°†ä»¥AppIDå‘½åçš„ç›®å½•å¤åˆ¶, æ”¾åˆ°ä¸Šé¢ç¬¬1æ­¥æåˆ°çš„app/assets/appsç›®å½•ä¸‹, å¹¶ä¿®æ”¹app/assets/data/dcloud_control.xmlä¸­çš„appidä¸ºä½ è‡ªå·±çš„appid, ç‚¹å‡»è¿è¡Œ, ç°åœ¨è¿è¡Œçš„å°±æ˜¯åˆšåˆšç¼–è¯‘å¥½çš„appèµ„æº, åŸæœ‰çš„__UNI__BCEC007ç›®å½•å¯ä»¥åˆ æ‰å•¦ appå†…çš„æ‰©å±•moduleä¸‹çš„ä¸‰ä¸ªæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶, åˆ†åˆ«è°ƒç”¨äº†uniplugin_module\\src\\main\\java\\io\\dcloud\\uniplugin\\TestModule.javaå†…çš„ä¸‰ä¸ªæ–¹æ³• æ’ä»¶å¼€å‘å‰é¢ä½¿ç”¨çš„æ˜¯å®˜æ–¹æä¾›çš„ç¤ºä¾‹é¡¹ç›®åŠåŸç”Ÿæ’ä»¶, ç°åœ¨éœ€è¦è‡ªå·±åŠ¨æ‰‹å¼€å‘ä¸€ä¸ªæ’ä»¶ åˆ›å»ºæ’ä»¶ç‚¹å‡»Android Studio File-&gt;New-&gt;New Module é€‰æ‹©Android Library, ç‚¹å‡»Next è‡ªå®šä¹‰åº“å, æ¨¡å—å, åŒ…å, è¯­è¨€é€‰æ‹©Java, Minimum SDKé€‰æ‹©API 19, æ–°æ‰‹å¯ä»¥å’Œå›¾ä¸­ä¿æŒä¸€è‡´, é¿å…å‡ºé”™, ç‚¹å‡»Finish ç­‰å¾…BuildæˆåŠŸ, å¯ä»¥çœ‹åˆ°å·¦ä¾§é¡¹ç›®ç®¡ç†å™¨å¯ä»¥çœ‹åˆ°åˆ›å»ºçš„æ’ä»¶ é…ç½®æ–‡ä»¶æ‰“å¼€openfileçš„build.gradle, å°†dependenciesèŠ‚ç‚¹ä¸‹å†…å®¹åˆ é™¤, æ›¿æ¢æˆä¸‹é¢å†…å®¹ dependencies { implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;]) compileOnly &#39;com.android.support:recyclerview-v7:27.1.0&#39; compileOnly &#39;com.android.support:support-v4:27.1.0&#39; compileOnly &#39;com.android.support:appcompat-v7:27.1.0&#39; compileOnly &#39;com.alibaba:fastjson:1.1.46.android&#39; compileOnly fileTree(dir: &#39;../app/libs&#39;, include: [&#39;uniapp-release.aar&#39;]) } åœ¨dependenciesåŒçº§æ·»åŠ repositoriesèŠ‚ç‚¹ repositories { flatDir { dirs &#39;libs&#39; } } ç‚¹å‡»ASå³ä¸Šè§’Sync Now, ç­‰å¾…åŒæ­¥æˆåŠŸ åˆ›å»ºModuleç±»åœ¨com.bigbear.openfileä¸‹æ–°å»ºJava Class, å¡«å†™ç±»å, ç»§æ‰¿WXModule, ç‚¹å‡»OK ç¼–å†™ä¸€ä¸ªinitå‡½æ•°, æµ‹è¯•ä¸€ä¸‹èƒ½å¦æ­£å¸¸ä½¿ç”¨. ä»£ç å¦‚ä¸‹: package com.bigbear.openfile; import android.util.Log; import com.alibaba.fastjson.JSONObject; import com.taobao.weex.annotation.JSMethod; import com.taobao.weex.bridge.JSCallback; import com.taobao.weex.common.WXModule; public class OpenFileModule extends WXModule { public static String TAG = &quot;BIGBEAR&quot;; @JSMethod(uiThread = true) public void init(JSONObject options, JSCallback callback) { Log.e(TAG, &quot;testinit: &quot; + options); if(callback != null) { JSONObject data = new JSONObject(); data.put(&quot;code&quot;, 0); callback.invoke(data); } } } æ³¨å†Œæ’ä»¶æ‰“å¼€app/assets/dcloud_uniplugins.jsonæ–‡ä»¶, åœ¨nativePluginsèŠ‚ç‚¹ä¸‹æ–°å¢ { &quot;hooksClass&quot;: &quot;&quot;, &quot;plugins&quot;: [ { &quot;type&quot;: &quot;module&quot;, &quot;name&quot;: &quot;OpenFile&quot;, &quot;class&quot;: &quot;com.bigbear.openfile.OpenFileModule&quot; } ] } åŸç”Ÿå·¥ç¨‹ä¸­è°ƒç”¨æ’ä»¶æ–¹æ³•è¿›è¡Œè°ƒè¯•æ–°å»ºä¸€ä¸ªuni-appé¡¹ç›®, æˆ–è€…ä½¿ç”¨ç°æœ‰çš„é¡¹ç›®, åœ¨é¡µé¢ä¸­å¼•å…¥æ’ä»¶, å¹¶æ·»åŠ ä¸€ä¸ªæŒ‰é’®è§¦å‘initæ–¹æ³• &lt;template&gt; &lt;view&gt; &lt;button type=&quot;primary&quot; @click=&quot;testInit&quot;&gt;testInit&lt;/button&gt; &lt;/view&gt; &lt;/template&gt; &lt;script&gt; // å¼•å…¥ module const OpenFile = uni.requireNativePlugin(&quot;OpenFile&quot;) export default { onLoad() { }, methods: { testInit() { OpenFile.init({a:1, b:2}, res=&gt; { //è°ƒç”¨æ’ä»¶ä¸­åˆšç¼–å†™çš„initæ–¹æ³• console.log(res); }) } } } &lt;/script&gt; ç”Ÿæˆæœ¬åœ°æ‰“åŒ…APPèµ„æº, å¹¶ä¸”å°†å…¶æ”¾å…¥åŸç”Ÿå·¥ç¨‹ç›®å½•ä¸‹, å¯å‚è€ƒå‰é¢è¯´è¿‡çš„æ­¥éª¤å®Œæˆ, è®°å¾—ä¿è¯dcloud_control.xmlä¸­çš„appidå’Œuniappé¡¹ç›®çš„appidä¸€è‡´ åœ¨appçš„build.gradleä¸­æ·»åŠ æ’ä»¶ implementation project(&#39;:openfile&#39;)ç‚¹å‡»RUN æŒ‰é’®è¿è¡Œapp, ç‚¹å‡»æµ‹è¯•æŒ‰é’®, å¯ä»¥åœ¨logcatä¸­çœ‹è§æˆ‘ä»¬æ‰“å°å‡ºçš„ä¼ é€’è¿‡æ¥çš„å‚æ•° logcatä¸­çš„æ—¥å¿—å¾ˆä¹±, ç­›é€‰ä¸€ä¸‹æ–¹ä¾¿æŸ¥çœ‹ openfileåŠŸèƒ½è¿™ä¸ªåŠŸèƒ½æƒ³å¿…å¤§éƒ¨åˆ†äººéƒ½ç”¨è¿‡, å°±æ˜¯åœ¨ä½¿ç”¨ å¾®ä¿¡, QQæ‰“å¼€æ–‡ä»¶çš„æ—¶å€™, æˆ‘ä»¬æƒ³ä½¿ç”¨å…¶ä»–åº”ç”¨æ‰“å¼€, æ–¹ä¾¿æˆ‘ä»¬ç¼–è¾‘æˆ–æŸ¥çœ‹æ–‡æ¡£, é‚£ä¹ˆä½ ä¼šè§åˆ°è¿™ä¸ªå¼¹çª— é‚£ä¹ˆ, æˆ‘ä»¬è¦åšçš„, å°±æ˜¯å°†ä½ è‡ªå·±å¼€å‘çš„uni-appé¡¹ç›®, æ·»åŠ åˆ°è¿™ä¸ªåˆ—è¡¨ä¸­ AndroidManifest.xmlæ‰“å¼€openfileä¸‹çš„AndroidManifest.xmlæ–‡ä»¶, ä¿®æ”¹æˆä¸‹é¢çš„æ ·å­ &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; package=&quot;com.bigbear.openfile&quot; &gt; &lt;application android:allowBackup=&quot;true&quot; android:label=&quot;@string/app_name&quot; android:supportsRtl=&quot;true&quot;&gt; &lt;activity android:name=&quot;com.bigbear.openfile.OpenFileActivity&quot; android:theme=&quot;@style/Theme.AppCompat.Dialog&quot;&gt; &lt;intent-filter&gt; &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt; &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt; &lt;action android:name=&quot;android.intent.action.SEND&quot;/&gt; &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt; &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt; &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt; &lt;data android:scheme=&quot;http&quot;/&gt; &lt;data android:scheme=&quot;https&quot;/&gt; &lt;data android:scheme=&quot;file&quot;/&gt; &lt;data android:scheme=&quot;content&quot;/&gt; &lt;data android:mimeType=&quot;text/plain&quot; /&gt; &lt;!--txt--&gt; &lt;data android:mimeType=&quot;text/xml&quot; /&gt; &lt;data android:mimeType=&quot;text/csv&quot; /&gt; &lt;data android:mimeType=&quot;application/msword&quot; /&gt; &lt;!--doc--&gt; &lt;data android:mimeType=&quot;application/vnd.openxmlformats-officedocument.wordprocessingml.document&quot; /&gt; &lt;!--docx--&gt; &lt;data android:mimeType=&quot;application/vnd.ms-powerpoint&quot; /&gt; &lt;!--ppt--&gt; &lt;data android:mimeType=&quot;application/vnd.openxmlformats-officedocument.presentationml.presentation&quot; /&gt; &lt;!--pptx--&gt; &lt;data android:mimeType=&quot;application/vnd.ms-excel&quot; /&gt;&lt;!--xls--&gt; &lt;data android:mimeType=&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot; /&gt;&lt;!--xlsx--&gt; &lt;data android:mimeType=&quot;application/json&quot; /&gt; &lt;data android:mimeType=&quot;application/pdf&quot; /&gt; &lt;!--pdf--&gt; &lt;data android:mimeType=&quot;application/xml&quot; /&gt; &lt;data android:mimeType=&quot;application/vnd.ms-works&quot; /&gt; &lt;!--wps--&gt; &lt;/intent-filter&gt; &lt;/activity&gt; &lt;/application&gt; &lt;/manifest&gt; OpenFileActivityåœ¨com.bigbear.openfileä¸‹æ–°å»ºOpenFileActivity.java, åœ¨onCreateä¸­è·å–å…¶ä»–åº”ç”¨æ‰“å¼€ä½ çš„åº”ç”¨æ—¶ä¼ é€’è¿‡æ¥çš„æ–‡ä»¶è·¯å¾„, ç„¶åé€šè¿‡schemeå”¤èµ·ä½ çš„uni-appåº”ç”¨ package com.bigbear.openfile; import android.content.Intent; import android.net.Uri; import android.os.Bundle; import android.os.Environment; import android.support.v7.app.AppCompatActivity; public class OpenFileActivity extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); System.out.println(&quot;----------*******************************onCreate**************************-------------&quot;); System.out.println(&quot;----------*******************************openfile**************************-------------&quot;); Intent intent = getIntent(); Uri uri = intent.getData(); assert uri != null; String path = uri.getPath(); String _uri; if (&quot;content&quot;.equals(uri.getScheme()) &amp;&amp; path != null ) { if (path.startsWith(&quot;/external/&quot;)) { //wechat path = Environment.getExternalStorageDirectory().getAbsolutePath() + path.replace(&quot;/external&quot;, &quot;&quot;); _uri = &quot;file://&quot; + path; }else if (path.startsWith(&quot;/external_files/&quot;)) { //qq path = path.replace(&quot;/external_files&quot;, &quot;&quot;); _uri = &quot;file://&quot; + path; }else { _uri = uri + &quot;&quot;; } }else { _uri = uri + &quot;&quot;; } System.out.println(_uri); Uri open_uri = Uri.parse(&quot;abc://&quot;+ _uri); //è¿™é‡Œçš„abcæ˜¯ä½ ç»™uniappé¡¹ç›®è®¾ç½®çš„scheme Intent _intent = new Intent(Intent.ACTION_VIEW, open_uri); startActivity(_intent); System.out.println(&quot;----------***************************************************&quot;); } } é‡æ–°è¿è¡Œ, åœ¨å¾®ä¿¡ä¸­æˆ–è€…qqä¸­æ‰¾ä¸€ä¸ªæ–‡ä»¶, é€‰æ‹©ç”¨å…¶ä»–åº”ç”¨æ‰“å¼€, å¯ä»¥çœ‹åˆ°, æˆ‘ä»¬çš„æµ‹è¯•appå·²ç»å‡ºç°åœ¨äº†åˆ—è¡¨ä¸­ é€‰æ‹©HBuilder-integrate-ASæ‰“å¼€, åº”ç”¨ä¼šè‡ªåŠ¨æ‰“å¼€è·³è½¬åˆ°æˆ‘ä»¬åœ¨ä»£ç ä¸­å†™çš„schemeçš„åº”ç”¨ä¸­, åŒæ—¶logcatä¸­çœ‹ä¸‹æ‰“å°å‡ºçš„å†…å®¹, æˆ‘ä»¬ä¹Ÿå·²ç»è·å–åˆ°äº†æ–‡ä»¶çš„é“¾æ¥ é›†æˆæ’ä»¶åˆ°uniappå‚è€ƒèµ„æ–™ uni-appåŸç”Ÿæ’ä»¶å¼€å‘æ–‡æ¡£ Android SDKä¸‹è½½å®‰è£…åŠé…ç½®æ•™ç¨‹","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"uni-app","slug":"å¤§ç†ŠBIGBEAR/uni-app","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/uni-app/"},{"name":"Android","slug":"å¤§ç†ŠBIGBEAR/uni-app/Android","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/uni-app/Android/"},{"name":"WEEX","slug":"å¤§ç†ŠBIGBEAR/uni-app/Android/WEEX","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/uni-app/Android/WEEX/"},{"name":"opencv","slug":"opencv","permalink":"http://blog.pulsating.cn/categories/opencv/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"uni-app","slug":"uni-app","permalink":"http://blog.pulsating.cn/tags/uni-app/"},{"name":"WEEX","slug":"WEEX","permalink":"http://blog.pulsating.cn/tags/WEEX/"},{"name":"Android","slug":"Android","permalink":"http://blog.pulsating.cn/tags/Android/"},{"name":"opencv","slug":"opencv","permalink":"http://blog.pulsating.cn/tags/opencv/"}]},{"title":"ES6ä¸­çš„importå’Œexportä½¿ç”¨æ–¹æ³•","slug":"ES6-import-and-export","date":"2020-04-06T05:35:09.000Z","updated":"2020-06-01T13:39:10.556Z","comments":true,"path":"2020/04/06/ES6-import-and-export/","link":"","permalink":"http://blog.pulsating.cn/2020/04/06/ES6-import-and-export/","excerpt":"","text":"export const obj = {}; export const obj2 = {}; import * as JsName from â€˜./jsName.jsâ€™; // objå’Œobj2å‡åœ¨JsNameå¯¹è±¡ä¸‹ 2. export const obj = {};export const obj2 = {}; import { obj } from â€˜./schedule.jsâ€™;import { obj2 } from â€˜./schedule.jsâ€™;","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"å‰ç«¯","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/"},{"name":"JavaScript","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯/JavaScript","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/JavaScript/"}],"tags":[{"name":"Js","slug":"Js","permalink":"http://blog.pulsating.cn/tags/Js/"},{"name":"éšæ‰‹è®°","slug":"éšæ‰‹è®°","permalink":"http://blog.pulsating.cn/tags/%E9%9A%8F%E6%89%8B%E8%AE%B0/"}]},{"title":"Composerçš„å®‰è£…åŠä½¿ç”¨","slug":"Install-and-use-Composer","date":"2020-01-08T15:00:03.000Z","updated":"2020-06-01T13:39:10.559Z","comments":true,"path":"2020/01/08/Install-and-use-Composer/","link":"","permalink":"http://blog.pulsating.cn/2020/01/08/Install-and-use-Composer/","excerpt":"> Composer æ˜¯ PHP ç”¨æ¥ç®¡ç†ä¾èµ–ï¼ˆdependencyï¼‰å…³ç³»çš„å·¥å…·ã€‚ä½ å¯ä»¥åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­å£°æ˜æ‰€ä¾èµ–çš„å¤–éƒ¨å·¥å…·åº“ï¼ˆlibrariesï¼‰ï¼ŒComposer ä¼šå¸®ä½ å®‰è£…è¿™äº›ä¾èµ–çš„åº“æ–‡ä»¶ æˆ–è®¸ä½ è¿˜æ²¡å¬è¯´è¿‡Composer, äº¦æˆ–å¬è¯´è¿‡ æ²¡å¬è¿‡,ä¸¤ä¸‡äº”åƒé‡Œ è€Œæ²¡æœ‰ä½¿ç”¨è¿‡, æ²¡å…³ç³», è·Ÿç€æˆ‘ä¸€èµ·, ç”¨èµ·æ¥","text":"> Composer æ˜¯ PHP ç”¨æ¥ç®¡ç†ä¾èµ–ï¼ˆdependencyï¼‰å…³ç³»çš„å·¥å…·ã€‚ä½ å¯ä»¥åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­å£°æ˜æ‰€ä¾èµ–çš„å¤–éƒ¨å·¥å…·åº“ï¼ˆlibrariesï¼‰ï¼ŒComposer ä¼šå¸®ä½ å®‰è£…è¿™äº›ä¾èµ–çš„åº“æ–‡ä»¶ æˆ–è®¸ä½ è¿˜æ²¡å¬è¯´è¿‡Composer, äº¦æˆ–å¬è¯´è¿‡ æ²¡å¬è¿‡,ä¸¤ä¸‡äº”åƒé‡Œ è€Œæ²¡æœ‰ä½¿ç”¨è¿‡, æ²¡å…³ç³», è·Ÿç€æˆ‘ä¸€èµ·, ç”¨èµ·æ¥ ç½‘ç«™ Composerå®˜ç½‘ Composerä¸­æ–‡ç½‘ ç¯å¢ƒ PHP è¿™æ˜¯å¿…é¡»çš„å§, å•Šå“ˆå“ˆå“ˆ, å¦‚æœè¿˜æ²¡æœ‰å®‰è£…php, æˆ‘å»ºè®®ä½ å…ˆä¸è¦çœ‹ä¸‹å»äº† å®‰è£…éšä¾¿æ‰“å¼€ä¸€ä¸ªä¸Šé¢æä¾›çš„ç½‘å€, æ‰¾åˆ°ä¸‹è½½é¡µ, æˆ–è€…ç›´æ¥ç‚¹å‡»Composer-Setup.exeå¼€å§‹ä¸‹è½½exeæ–‡ä»¶ åŒå‡»Composer-Setup.exeå¼€å§‹å®‰è£… è¿™é‡Œå‹¾ä¸Šdeveloper modeå¯ä»¥è‡ªå®šä¹‰å®‰è£…ç›®å½•, ä¹Ÿå¯ä»¥ä¸å‹¾é€‰, Next è¿™é‡Œä¼šè‡ªåŠ¨è¯†åˆ«å‡ºä½ çš„phpå®‰è£…ç›®å½•, å¦‚æœæ²¡æœ‰è¯†åˆ«å‡ºæ¥, éœ€è¦è‡ªå·±é€‰æ‹©ä¸€ä¸‹, æ‰€ä»¥è¦è®°å¾—ä½ çš„phpè£…åœ¨ä»€ä¹ˆä½ç½®äº†å“¦ Next è®¾ç½®ä»£ç†, æŒ‰éœ€è®¾ç½®, æ²¡æœ‰å¯ä»¥ç›´æ¥è·³è¿‡ Next è¿™é‡Œæ¥æ£€æŸ¥ä¸€ä¸‹å®‰è£…è·¯å¾„, å¹¶ä¸”ä¼šè‡ªåŠ¨å¸®ä½ å°†composeråŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­, è¿™æ ·å°±å¯ä»¥åœ¨å…¨å±€ä½¿ç”¨äº†,å¡«å†™æ— è¯¯å¯ä»¥ç‚¹å‡» Install è€å¿ƒç­‰å¾…ä¸€å°ä¼š, ç­‰ä»–å®‰è£…å®Œæˆ, è·³å‡ºè­¦å‘Šå¯ä»¥ç›´æ¥ç‚¹å‡»ä¸‹ä¸€æ­¥, çœ‹åˆ°ä¸‹å›¾, å°±å·²ç»å®‰è£…å®Œæˆå•¦! Next-&gt;Finished æ‰“å¼€å‘½ä»¤è¡Œ, è¾“å…¥composer -V, ä¼šçœ‹åˆ°ç›¸åº”çš„ç‰ˆæœ¬ä¿¡æ¯. å‘½ä»¤è¡Œéœ€è¦é‡æ–°æ‰“å¼€å“¦, å¦‚æœæ²¡æœ‰æ˜¾ç¤ºå‡ºç›¸åº”ä¿¡æ¯, åˆ™éœ€è¦é‡å¯ä¸€ä¸‹ç”µè„‘, è‡³æ­¤, composerå°±å®‰è£…å®Œæˆäº† ä½¿ç”¨æˆ‘ä»¬å…ˆä»ä¸€ä¸ªç©ºé¡¹ç›®è¯´èµ· éšä¾¿åœ¨å“ªé‡Œæ–°å»ºä¸€ä¸ªç©ºçš„ç›®å½• å®‰è£…ä¾èµ–ä»composer.jsonå¼€å§‹æ–°å»ºcomposer.jsonæ–‡ä»¶æ–°å»ºcomposer.jsonæ–‡ä»¶,è¾“å…¥ä¸‹é¢å†…å®¹, querylistæ˜¯ä¸€ä¸ªphpçš„å†…å®¹é‡‡é›†æ¡†æ¶,åé¢æˆ‘ä¼šå†™ä¸€ç¯‡å…³äºå®ƒçš„ä½¿ç”¨æ–¹å¼, è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å®ƒæ¥æ¼”ç¤ºcomposer { &quot;require&quot;: { &quot;jaeger/querylist&quot;: &quot;4.0.*&quot; } } composer installåœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œcomposer install , composerä¼šè¯»å–composer.jsonä¸­çš„å†…å®¹,æ¥è‡ªåŠ¨ä¸‹è½½å®‰è£…ç›¸å…³ä¾èµ– ç»“æŸç­‰å¾…å®‰è£…å®Œæˆåæˆ‘ä»¬ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çœ‹åˆ°ä¸€ä¸ªvendorç›®å½•, å’Œä¸€ä¸ªcomposer.lockæ–‡ä»¶ ä»composer requireå¼€å§‹å‘½ä»¤composer require jaeger/querylist 4.0.* è¯´æ˜ä½¿ç”¨è¿™ç§æ–¹å¼, composerä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªcomposer.jsonæ–‡ä»¶, å¹¶å°†jaeger/querylistå†™å…¥åˆ°å…¶ä¸­, ç„¶åæ ¹æ®composer.jsonä¸‹è½½ç›¸å…³ä¾èµ–, å‘½ä»¤æ‰§è¡Œå®Œæ¯•å, é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ç»“æ„, å’Œå‰é¢çš„æ–¹å¼æ˜¯ä¸€æ ·çš„ é”æ–‡ä»¶composer.lockç”Ÿæˆæ¯æ¬¡å®‰è£…æ–°çš„ä¾èµ–æ—¶, Composerä¼šå°†å…¶ç›¸å…³ä¿¡æ¯, è‡ªåŠ¨å†™å…¥lockæ–‡ä»¶ä¸­, åŒ…æ‹¬å¯¹åº”ç‰ˆæœ¬ ä½œç”¨å¦‚æœå¤šäººååŒé¡¹ç›®çš„è¯, å…¶ä»–äººåœ¨æ‰§è¡Œcomposer installæ—¶, ä¼šå…ˆä»lockæ–‡ä»¶ä¸­å¯»æ‰¾è¯¥ä¾èµ–å’Œç›¸åº”ç‰ˆæœ¬, ä¿è¯äº†æ‰€æœ‰äººçš„ç‰ˆæœ¬ä¸€è‡´, å¯ä»¥ç†è§£ä¸ºlockæ–‡ä»¶, â€˜é”å®šâ€˜ äº†å„ä¾èµ–çš„ç‰ˆæœ¬ æ›´æ–°ä¾èµ–ç‰ˆæœ¬æ³¨æ„, å½“æ‰§è¡Œcomposer update æ—¶, composerä¼šè·å–ä¾èµ–çš„æœ€æ–°ç‰ˆæœ¬, å¹¶æ›´æ–°lockæ–‡ä»¶, å¦‚æœä½ åªæƒ³æ›´æ–°ç‰¹å®šçš„æŸä¸ªåŒ…, é‚£ä¹ˆå¯ä»¥åœ¨å‘½ä»¤åæŒ‡æ˜è¦æ›´æ–°çš„åŒ…,åƒè¿™æ · composer update jaeger/querylist # åé¢å¯ä»¥ç»§ç»­æ·»åŠ å¤šä¸ª, ä¼šä¸€å¹¶æ›´æ–° ä¸‹é¢æ˜¯lockä¸­, æˆ‘ä»¬åˆšåˆšè£…å¥½çš„ä¾èµ–çš„éƒ¨åˆ†ä¿¡æ¯, ä½ å¯ä»¥è‡ªå·±åŠ¨æ‰‹æ‰“å¼€lockæ–‡ä»¶çœ‹ä¸‹å…¨éƒ¨ å¼•å…¥autoload.phpvendorç›®å½•ç”Ÿæˆå, Composerä¼šå¸®æˆ‘ä»¬å‡†å¤‡ä¸€ä¸ªè‡ªåŠ¨åŠ è½½æ–‡ä»¶, autoload.php, æˆ‘ä»¬åªéœ€å¼•å…¥è¿™ä¸ªæ–‡ä»¶, Composerä¼šå¸®æˆ‘ä»¬å¤„ç†ä¸€åˆ‡ æ™®é€šé¡¹ç›®å¼•å…¥å…¥å£æ–‡ä»¶æˆ‘ä»¬åœ¨åˆšæ‰çš„é¡¹ç›®ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªå¯æ‰§è¡Œphpæ–‡ä»¶, å‘½åä¸ºIndex.php, ä»£ç å®ç°å†™å…¥å¦‚ä¸‹ä»£ç  è¿™æ®µä»£ç æŠ“å–äº†æˆ‘çš„ä¸ªäººåšå®¢é¦–é¡µçš„æ–‡ç« titleå’Œé“¾æ¥, åé¢ä¼šæœ‰ä¸“é—¨ä¸€ç¯‡æ–‡ç« ä»‹ç»QueryListçš„ä½¿ç”¨, å¾ˆæ–¹ä¾¿ &lt;?php require &#39;vendor/autoload.php&#39;; Use QL\\QueryList; $url = &#39;http://blog.pulsating.cn&#39;; $rules = [ &#39;title&#39;=&gt; [&#39;.article-title&#39;, &#39;text&#39;], &#39;url&#39;=&gt; [&#39;.article-title&#39;, &#39;href&#39;] ]; $result = QueryList::rules($rules)-&gt;get($url)-&gt;queryData(); print_r($result); æ‰§è¡ŒIndex.php, å¯ä»¥çœ‹åˆ°å·²ç»æˆåŠŸçš„ä½¿ç”¨äº†querylistä¾èµ– åœ¨CodeIgniterä¸­å¼•å…¥ä¿®æ”¹config.phpå°†$config[&#39;composer_autoload&#39;]çš„å€¼æ”¹ä¸ºtrue, CIä¼šè‡ªåŠ¨åœ¨application/vendor/ç›®å½•ä¸‹å¯»æ‰¾autoload.phpæ–‡ä»¶å¹¶åŠ è½½ // application/config/config.php $config[&#39;composer_autoload&#39;] = TRUE; æˆ–è€…ä¹Ÿå¯ä»¥è¿™æ ·, å°†å€¼å†™æˆå…·ä½“è·¯å¾„ $config[&#39;composer_autoload&#39;] = &#39;vendor/autoload.php&#39;; controllerä¸­ä½¿ç”¨ç›´æ¥åœ¨controllerä¸­çš„classå¤–éƒ¨use, ç„¶åå°±å¯ä»¥ä½¿ç”¨QueryListäº†, åç»­ä»£ç å’Œä¸Šé¢ç›¸åŒ use QL\\QueryList; ç»“æŸ ä¸æ¨èæ‰‹å†™composer.jsonæ–‡ä»¶, æ¨èä½¿ç”¨requireçš„æ–¹å¼ä¸‹è½½ä¾èµ–, æ‰‹å†™å¾ˆå®¹æ˜“å‡ºé”™ packagist æ˜¯ Composer ä¸»è¦çš„ä¸€ä¸ªåŒ…ä¿¡æ¯å­˜å‚¨åº“, ä½ å¯ä»¥åˆ†äº«è‡ªå·±çš„packageåˆ°ä¸Šé¢, ä¹Ÿå¯ä»¥åœ¨é‡Œé¢æ‰¾å…¶ä»–äººåˆ†äº«çš„packageä½¿ç”¨ QueryList æ–‡ä¸­çš„QueryListå®˜ç½‘","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"å¤§ç†ŠBIGBEAR/PHP","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/PHP/"},{"name":"Composer","slug":"å¤§ç†ŠBIGBEAR/PHP/Composer","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/PHP/Composer/"}],"tags":[{"name":"PHP","slug":"PHP","permalink":"http://blog.pulsating.cn/tags/PHP/"},{"name":"Composer","slug":"Composer","permalink":"http://blog.pulsating.cn/tags/Composer/"}]},{"title":"sphinxé…ç½®å¤šç´¢å¼•","slug":"Sphinx-multi-index-configuration","date":"2020-01-08T09:50:52.000Z","updated":"2020-01-08T14:18:58.511Z","comments":true,"path":"2020/01/08/Sphinx-multi-index-configuration/","link":"","permalink":"http://blog.pulsating.cn/2020/01/08/Sphinx-multi-index-configuration/","excerpt":"ä¹‹å‰æœ‰å†™è¿‡sphinxçš„ç®€å•ä½¿ç”¨, åˆæ¬¡æ¥è§¦sphinxçš„åŒå­¦å¯ä»¥å…ˆäº†è§£ä¸‹, windowså’Œlinuxéƒ½æœ‰ Linuxä¸‹å®‰è£…sphinxåŠé…ç½® Windowsä¸‹å®‰è£…sphinxåŠé…ç½®æœ¬æ–‡è®°å½•ä»¥ä¸‹å¦‚ä½•åœ¨sphinxçš„é…ç½®æ–‡ä»¶sphinx.confä¸­, é…ç½®å¤šä¸ªç´¢å¼•, å¹¶å¯åŠ¨æœåŠ¡","text":"ä¹‹å‰æœ‰å†™è¿‡sphinxçš„ç®€å•ä½¿ç”¨, åˆæ¬¡æ¥è§¦sphinxçš„åŒå­¦å¯ä»¥å…ˆäº†è§£ä¸‹, windowså’Œlinuxéƒ½æœ‰ Linuxä¸‹å®‰è£…sphinxåŠé…ç½® Windowsä¸‹å®‰è£…sphinxåŠé…ç½®æœ¬æ–‡è®°å½•ä»¥ä¸‹å¦‚ä½•åœ¨sphinxçš„é…ç½®æ–‡ä»¶sphinx.confä¸­, é…ç½®å¤šä¸ªç´¢å¼•, å¹¶å¯åŠ¨æœåŠ¡ ä¿®æ”¹é…ç½®æ–‡ä»¶åŸé…ç½®æ–‡ä»¶æ‰¾åˆ°sphinx.confé…ç½®æ–‡ä»¶, å‡è®¾å½“å‰å·²ç»æœ‰ä¸€ä¸ªç´¢å¼•å·²ç»é…ç½®ok, é‚£ä¹ˆä½ çš„æ–‡ä»¶æ‰“å¼€ååº”è¯¥ç±»ä¼¼è¿™æ ·çš„,å…¶ä¸­æ•°æ®æºä¸ºarticle_source,å¯¹åº”æ–‡ç« è¡¨, ç´¢å¼•åç§°ä¸ºarticle,å¯¹åº”article_source source article_source { type = mysql sql_host = SQLHOST sql_user = username sql_pass = password sql_db = DBNAME sql_port = 3306 # optional, default is 3306 sql_query_pre = SET NAMES utf8 sql_query = \\ SELECT id, title, content \\ FROM tablename } index article { source = article_source # å¯¹åº”ä¸Šé¢sourceçš„åç§° path = /sphinx/article_data min_word_len = 1 ngram_len = 1 ngram_chars = U+3000..U+2FA1F } indexer { mem_limit = 512M } searchd { listen = 9312 listen = 9306:mysql41 log = /sphinx/searchd.log query_log = /sphinx/query.log read_timeout = 5 max_children = 30 pid_file = /sphinx/searchd.pid seamless_rotate = 1 preopen_indexes = 1 unlink_old = 1 binlog_path = /sphinx/data } ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–°è¡¨, å‡è®¾ä¸ºéŸ³ä¹è¡¨, æˆ‘ä»¬éœ€è¦æ ¹æ®æ­Œæ›²åç§°, å’Œæ­Œè¯æ¥åŒ¹é…å¯¹åº”çš„æ­Œæ›², ä¾›ç”¨æˆ·å»æœç´¢, ä¹Ÿéœ€è¦ä½¿ç”¨sphinx, é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¦‚ä½•åšå‘¢? æ„å»ºæ–°æ•°æ®æºæ‰“å¼€sphinx.confæ–‡ä»¶, åœ¨article_sourceæ•°æ®æºçš„ä¸‹æ–¹, å£°æ˜ä¸‹æ–°çš„éŸ³ä¹æ•°æ®æº source music_source { type = mysql sql_host = SQLHOST sql_user = username sql_pass = password sql_db = DBNAME sql_port = 3306 # optional, default is 3306 sql_query_pre = SET NAMES utf8 sql_query = \\ SELECT id, name, lyric \\ FROM music }é…ç½®indexåœ¨index articleä¸‹æ–¹, æ„å»ºéŸ³ä¹æ•°æ®æºçš„ç´¢å¼• index music { source = music_source # å¯¹åº”ä¸Šé¢sourceçš„åç§° path = /sphinx/music_data min_word_len = 1 ngram_len = 1 ngram_chars = U+3000..U+2FA1F }è¿™é‡Œè¦æ³¨æ„ä¸€ä¸‹, ä¸¤ä¸ªç´¢å¼•çš„pathä¸èƒ½åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹, ä¹Ÿæœ‰å¯èƒ½æ˜¯æˆ‘æ“ä½œæœ‰è¯¯, æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹é¢ä¸€ç›´æŠ¥é”™ è‡³æ­¤, é…ç½®æ–‡ä»¶å°±é…ç½®å¥½äº† é‡æ–°æ„å»ºç´¢å¼•åœæ­¢searchdæœåŠ¡æ„å»ºç´¢å¼•æ—¶éœ€è¦åœæ‰è¿è¡Œä¸­çš„searchdæœåŠ¡, ä¸ç„¶ä¼šå¤±è´¥, åŸç´¢å¼•å¦‚æœæ­£åœ¨ä½¿ç”¨ä¸­, è¯·è°¨æ…åœæ­¢, æˆ–è€…ç ”ç©¶ä¸€ä¸‹--rotate å‚æ•° --rotate ç”¨äºè½®æ¢ç´¢å¼•ï¼Œåœ¨ä¸åœæ­¢æœåŠ¡çš„æ—¶å€™ï¼ˆsearchdè¿è¡Œæ—¶ï¼‰å¢åŠ ç´¢å¼•ï¼›searchdè¿è¡Œæ—¶ä¸åŠ ä¼šæŠ¥é”™ã€‚ åœæ­¢searchdå‘½ä»¤: searchd -c source.conf --stopé‡å»ºç´¢å¼•å‘½ä»¤: indexer -c sphinx.conf -allå¯åŠ¨searchdæœåŠ¡searchd","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"å¤§ç†ŠBIGBEAR/Mysql","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/"},{"name":"Sphinx","slug":"å¤§ç†ŠBIGBEAR/Mysql/Sphinx","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/Sphinx/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"PHP","permalink":"http://blog.pulsating.cn/tags/PHP/"},{"name":"Mysql","slug":"Mysql","permalink":"http://blog.pulsating.cn/tags/Mysql/"},{"name":"Sphinx","slug":"Sphinx","permalink":"http://blog.pulsating.cn/tags/Sphinx/"}]},{"title":"ä½¿ç”¨å‘½ä»¤è¡Œæ‰§è¡ŒCIæ§åˆ¶å™¨ä¸­çš„å‡½æ•°","slug":"Run-CI-method-in-cli","date":"2020-01-07T15:29:56.000Z","updated":"2020-01-07T15:40:47.119Z","comments":true,"path":"2020/01/07/Run-CI-method-in-cli/","link":"","permalink":"http://blog.pulsating.cn/2020/01/07/Run-CI-method-in-cli/","excerpt":"æœ‰äº›æ—¶å€™æˆ‘ä»¬åœ¨æ‰§è¡Œä¸€äº›é•¿æ—¶é—´çš„ä»»åŠ¡çš„æ—¶å€™, ä½¿ç”¨æµè§ˆå™¨è¿è¡Œæ˜¯å¾ˆä¸å‹å¥½çš„, çœ‹ä¸åˆ°å®æ—¶è¾“å‡º, æ—¶é—´è¿‡é•¿æµè§ˆå™¨è¿˜ä¼šè¶…æ—¶, è¿™æ—¶å€™å°±éœ€è¦åœ¨å‘½ä»¤è¡Œä¸­æ¥æ‰§è¡Œ","text":"æœ‰äº›æ—¶å€™æˆ‘ä»¬åœ¨æ‰§è¡Œä¸€äº›é•¿æ—¶é—´çš„ä»»åŠ¡çš„æ—¶å€™, ä½¿ç”¨æµè§ˆå™¨è¿è¡Œæ˜¯å¾ˆä¸å‹å¥½çš„, çœ‹ä¸åˆ°å®æ—¶è¾“å‡º, æ—¶é—´è¿‡é•¿æµè§ˆå™¨è¿˜ä¼šè¶…æ—¶, è¿™æ—¶å€™å°±éœ€è¦åœ¨å‘½ä»¤è¡Œä¸­æ¥æ‰§è¡Œ è°ƒç”¨æ–¹å¼php index.php controller method paramtips: éœ€è¦å°†phpè·¯å¾„è®¾ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­, æˆ–è€…æŒ‡å®šphpè·¯å¾„","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"å¤§ç†ŠBIGBEAR/PHP","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/PHP/"},{"name":"CI","slug":"å¤§ç†ŠBIGBEAR/PHP/CI","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/PHP/CI/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"PHP","permalink":"http://blog.pulsating.cn/tags/PHP/"},{"name":"CI","slug":"CI","permalink":"http://blog.pulsating.cn/tags/CI/"}]},{"title":"ç¾å‘³çš„ç³–é†‹æ’éª¨, ä¸€æ¬¡æˆåŠŸ, è¶…çº§å¥½åƒ","slug":"Sweet-and-sour-spareribs","date":"2020-01-06T13:38:12.000Z","updated":"2020-01-07T15:19:57.976Z","comments":true,"path":"2020/01/06/Sweet-and-sour-spareribs/","link":"","permalink":"http://blog.pulsating.cn/2020/01/06/Sweet-and-sour-spareribs/","excerpt":"æ¯ä¸ªå‘¨æœ«, éƒ½è¦æƒ³åŠæ³•çŠ’åŠ³ä¸€ä¸‹è‡ªå·±, çš„èƒƒ, åˆšå¥½ç•…å¤§äººæƒ³åƒç³–é†‹æ’éª¨, å¾—! é‚£å°±æ¥å§, æ²¡æƒ³åˆ°ä»¥å‰ä¸€åšå°±ç ¸, è¿™æ¬¡ç«Ÿç„¶æˆåŠŸäº†, ç‰›B, è®°å½•ä¸€ä¸‹","text":"æ¯ä¸ªå‘¨æœ«, éƒ½è¦æƒ³åŠæ³•çŠ’åŠ³ä¸€ä¸‹è‡ªå·±, çš„èƒƒ, åˆšå¥½ç•…å¤§äººæƒ³åƒç³–é†‹æ’éª¨, å¾—! é‚£å°±æ¥å§, æ²¡æƒ³åˆ°ä»¥å‰ä¸€åšå°±ç ¸, è¿™æ¬¡ç«Ÿç„¶æˆåŠŸäº†, ç‰›B, è®°å½•ä¸€ä¸‹ é£Ÿæç…® æ’éª¨ 2æ ¹ è‘±æ®µ ä»»æ„ å§œ 4ç‰‡ æ–™é…’/ç™½é…’ 2å‹º ç‚’ é£Ÿç”¨æ²¹ å†·æ°´ åŠç¢— å†°ç³–/ç»µç™½ç³– 10ç²’/2å‹º å–œæ¬¢ç”œå¯ä»¥é€‚å½“å¤šæ”¾ä¸€äº› é¦™é†‹ 1.5å‹º è€æŠ½ 0.5å‹º åƒä¸‡åˆ«æ”¾å¤šäº† ç› 1/3å‹º æ± ç»µç™½ç³– 1å‹º é¦™é†‹ 1å‹º ç‰ç±³æ·€ç²‰ 0.5å‹º æ¸©æ°´ 2å‹º æ­¥éª¤ æ’éª¨å‰æˆå—, æ´—å‡€ (ä¹°æ’éª¨çš„æ—¶å€™è¯´ä¸‹, å–å®¶ä¼šå¸®ä½ å‰çš„, è‡ªå·±å®¶é‡Œçš„èœåˆ€å°±æ˜¯ä¸ªå¼Ÿå¼Ÿ) é”…é‡ŒåŠ æ¸…æ°´, æ”¾å…¥æ’éª¨, è‘±æ®µ, å§œç‰‡, ç™½é…’(ä¸å–œæ¬¢æ–™é…’çš„å‘³é“, æˆ‘ç”¨äº†ç™½é…’) å¤§ç«çƒ§å¼€å, æ”¹æˆå°ç«å¼€å§‹è®¡æ—¶, ç…®30åˆ†é’Ÿ æå‡ºç…®å¥½çš„æ’éª¨, å†æ¬¡ç”¨æ¸…æ°´æ´—å‡€, æ§å¹²æ°´ä»½(é¿å…ä¸€ä¼šä¸‹é”…çš„æ—¶å€™çƒ«ä¼¤) é”…æ´—å‡€çƒ§çƒ­, å¯¼å…¥é€‚é‡é£Ÿç”¨æ²¹, æ²¹çƒ­å(å‡­æ„Ÿè§‰) å€’å…¥æ’éª¨, ç”¨ä¸­ç«ç‚’è‡³æ’éª¨å˜è‰²åæå‡º(2åˆ†é’Ÿå·¦å³) å¼€å¤§ç«å†æ¬¡å°†æ²¹çƒ§çƒ­, å€’å…¥æ’éª¨å¿«é€Ÿç¿»ç‚’, 30ç§’åæå‡º, è£…ç›˜å¤‡ç”¨ å¦èµ·ä¸€é”…, å€’å…¥åŠç¢—æ¸…æ°´, åŠ å…¥å†°ç³–, å°ç«çƒ§è‡³å†°ç³–èåŒ–, å¾®å¾®å˜æˆé»„è‰²å¹¶èµ·æ³¡, å€’å…¥ç‚’å¥½çš„æ’éª¨, ç›, é¦™é†‹, åŠ å…¥è€æŠ½, ä¸­ç«ç¿»ç‚’è‡³æ’éª¨é¢œè‰²å‡åŒ€, å°†è°ƒå¥½çš„æ±, å€’å…¥é”…ä¸­, è½¬å¤§ç«è¿…é€Ÿç¿»ç‚’, ç‚’è‡³é¢œè‰²å‡åŒ€, å¹¶ä¸”æ— å¤šäºæ±¤æ±, å…³ç« Tips æ’éª¨çœŸçš„è´µ, ä¸¤æ ¹æ’éª¨è¿‘50å— æœ€åæµ‡çš„æ±, ä¸€å®šè¦æ…æ‹Œå‡åŒ€, æœ€åå‡ºå›½çš„æ’éª¨äº®äº®çš„, å¾ˆæœ‰é£Ÿæ¬² ç•…å¤§äººå’Œæˆ‘éƒ½ä¸å–œæ¬¢æ–™é…’çš„å‘³é“, æˆ‘å°±ç”¨ç™½é…’æ›¿ä»£äº† äºŒé”…å¤´, å“ˆå“ˆå“ˆå“ˆå“ˆ è€æŠ½åƒä¸‡ä¸è¦æ”¾å¤šäº†, é¢œè‰²å¾ˆæ·±çš„, ä¸æŠŠæ¡çš„è¯å¯ä»¥ç”¨é…±æ²¹ä»£æ›¿, å£æ„Ÿå½±å“ä¸å¤§ ä¸‹æ¬¡è§","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"æ—¥å¸¸","slug":"å¤§ç†ŠBIGBEAR/æ—¥å¸¸","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E6%97%A5%E5%B8%B8/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"ç¾é£Ÿ","slug":"ç¾é£Ÿ","permalink":"http://blog.pulsating.cn/tags/%E7%BE%8E%E9%A3%9F/"},{"name":"é£Ÿè°±","slug":"é£Ÿè°±","permalink":"http://blog.pulsating.cn/tags/%E9%A3%9F%E8%B0%B1/"}]},{"title":"è§£å†³PHP CI(CodeIgniter)æ¡†æ¶ä½¿ç”¨insert_batch()æ‰¹é‡æ’å…¥æ—¶uniqueåˆ—å†²çªå¯¼è‡´æ“ä½œå¤±è´¥çš„é—®é¢˜","slug":"Custom-CI-insert-batch","date":"2019-12-27T15:32:39.000Z","updated":"2020-01-07T15:19:58.038Z","comments":true,"path":"2019/12/27/Custom-CI-insert-batch/","link":"","permalink":"http://blog.pulsating.cn/2019/12/27/Custom-CI-insert-batch/","excerpt":"åœ¨CIä¸­, æœ‰æ—¶æˆ‘ä»¬æƒ³å°†å¾ˆå¤šæ¡æ•°æ®, æ‰¹é‡æ’å…¥åˆ°æ•°æ®åº“ä¸­, æˆ‘ä»¬çŸ¥é“æœ‰insert_batch()è¿™ä¸ªå‡½æ•°, ä½†æ˜¯å¦‚æœinsert_batchæ—¶, é‡åˆ°äº†mysqlä¸­çš„UNIQUEçº¦æŸ, å°±ä¼šå¯¼è‡´æ’å…¥å¤±è´¥, å¹¶å›æ»š, é‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•è®©å…¶è·³è¿‡å†²çªçš„åˆ—, å¹¶ç»§ç»­æ‰§è¡Œä¸‹é¢çš„æ•°æ®å‘¢?","text":"åœ¨CIä¸­, æœ‰æ—¶æˆ‘ä»¬æƒ³å°†å¾ˆå¤šæ¡æ•°æ®, æ‰¹é‡æ’å…¥åˆ°æ•°æ®åº“ä¸­, æˆ‘ä»¬çŸ¥é“æœ‰insert_batch()è¿™ä¸ªå‡½æ•°, ä½†æ˜¯å¦‚æœinsert_batchæ—¶, é‡åˆ°äº†mysqlä¸­çš„UNIQUEçº¦æŸ, å°±ä¼šå¯¼è‡´æ’å…¥å¤±è´¥, å¹¶å›æ»š, é‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•è®©å…¶è·³è¿‡å†²çªçš„åˆ—, å¹¶ç»§ç»­æ‰§è¡Œä¸‹é¢çš„æ•°æ®å‘¢? æ—¢ç„¶insert_batch()æ»¡è¶³ä¸äº†æˆ‘ä»¬çš„éœ€æ±‚, é‚£æˆ‘ä»¬å°±è‡ªå·±é€ ä¸€ä¸ª, é¦–å…ˆæˆ‘ä»¬æ‰¾åˆ°insert_batch()å‡½æ•°çš„ä½ç½®, çœ‹ä¸‹æºç , # CI_VERSION = 3.1.11, è¿™ä¸ªç‰ˆæœ¬å¯ä»¥åœ¨system/core/CodeIgniter.phpä¸­æŸ¥çœ‹ # ä½ç½®åœ¨ system/database/DB_query_builder.php insert_batch() /** * Insert_Batch * * Compiles batch insert strings and runs the queries * * @param string $table Table to insert into * @param array $set An associative array of insert values * @param bool $escape Whether to escape values and identifiers * @return int Number of rows inserted or FALSE on failure */ public function insert_batch($table, $set = NULL, $escape = NULL, $batch_size = 100) { if ($set === NULL) { if (empty($this-&gt;qb_set)) { return ($this-&gt;db_debug) ? $this-&gt;display_error(&#39;db_must_use_set&#39;) : FALSE; } } else { if (empty($set)) { return ($this-&gt;db_debug) ? $this-&gt;display_error(&#39;insert_batch() called with no data&#39;) : FALSE; } $this-&gt;set_insert_batch($set, &#39;&#39;, $escape); } if (strlen($table) === 0) { if ( ! isset($this-&gt;qb_from[0])) { return ($this-&gt;db_debug) ? $this-&gt;display_error(&#39;db_must_set_table&#39;) : FALSE; } $table = $this-&gt;qb_from[0]; } // Batch this baby $affected_rows = 0; for ($i = 0, $total = count($this-&gt;qb_set); $i &lt; $total; $i += $batch_size) { if ($this-&gt;query($this-&gt;_insert_batch($this-&gt;protect_identifiers($table, TRUE, $escape, FALSE), $this-&gt;qb_keys, array_slice($this-&gt;qb_set, $i, $batch_size)))) { $affected_rows += $this-&gt;affected_rows(); } } $this-&gt;_reset_write(); return $affected_rows; } å¯ä»¥çœ‹åˆ°, _insert_batchå‡½æ•°ç”Ÿæˆäº†sqlè¯­å¥, æœ€ç»ˆç”±queryå‡½æ•°æ‰§è¡Œ, å¹¶è¿”å›å½±å“æ¡æ•°, ç°åœ¨æˆ‘ä»¬ä½¿ç”¨IGNOREå…³é”®å­—, æ¥æ”¹å†™ä¸€ä¸‹sqlè¯­å¥é‚£é‡Œå°±okäº†, ä¸ºäº†ä¸å½±å“æºç , æˆ‘ä»¬åœ¨insert_batch()ä¸‹é¢æ–°å†™ä¸€ä¸ªinsert_ignore_batchå‡½æ•°, å‰é¢éƒ½çœç•¥, ç›´æ¥ä»forå¾ªç¯è¿™é‡Œå¼€å§‹ /* * insert_batch() using INSERT IGNORE INTO instead of INSERT INTO * @ xyliu */ public function insert_ignore_batch($table, $set = NULL, $escape = NULL, $batch_size = 100) { // ...è¿™é‡Œçš„å†…å®¹ç›´æ¥å¤åˆ¶è¿‡æ¥, ä¿æŒåŸæ ·å°±å¯ä»¥, è¿™é‡Œå¤ªå ç¯‡å¹…è¢«æˆ‘çœç•¥æ‰äº† // Batch this baby; $affected_rows = 0; for ($i = 0, $total = count($this-&gt;qb_set); $i &lt; $total; $i = $i + 100) { $sql = $this-&gt;_insert_batch($this-&gt;protect_identifiers($table, TRUE, $escape, FALSE), $this-&gt;qb_keys, array_slice($this-&gt;qb_set, $i, $batch_size)); $sql = str_replace(&#39;INSERT INTO&#39;,&#39;INSERT IGNORE INTO&#39;,$sql); //å¿½ç•¥é”™è¯¯ if ($this-&gt;query($sql)) { $affected_rows += $this-&gt;affected_rows(); } } $this-&gt;_reset_write(); return $affected_rows;; } æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™å¯ä»¥ç›´æ¥åƒä½¿ç”¨insert_batch()é‚£æ ·ä½¿ç”¨insert_ignore_batch $this-&gt;db-&gt;insert_ignore_batch();","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"å¤§ç†ŠBIGBEAR/PHP","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/PHP/"},{"name":"CI","slug":"å¤§ç†ŠBIGBEAR/PHP/CI","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/PHP/CI/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"PHP","permalink":"http://blog.pulsating.cn/tags/PHP/"},{"name":"CI","slug":"CI","permalink":"http://blog.pulsating.cn/tags/CI/"}]},{"title":"å¿ƒè¡€æ¥æ½®,è¿Ÿåˆ°çš„ç…®çº¢é…’","slug":"Late-boiled-wine","date":"2019-12-27T14:13:14.000Z","updated":"2020-01-07T15:19:57.586Z","comments":true,"path":"2019/12/27/Late-boiled-wine/","link":"","permalink":"http://blog.pulsating.cn/2019/12/27/Late-boiled-wine/","excerpt":"ä¸‹ç­è·¯ä¸Šçªç„¶æƒ³èµ·æ¥åœ£è¯èŠ‚é‚£å¤©çœ‹åˆ°ä¸ªå¾®åšçƒ­æœ, ç…®çº¢é…’, çªç„¶é—´å°±å¥½æƒ³è¯•ä¸€ä¸‹å‘€, åˆšå¥½å®¶é‡Œè¿˜å‰©ä¸‹çš„çº¢é…’, è¯´å¹²å°±å¹², åƒè¿‡æ™šé¥­ä¹‹åå°±åˆ°è¶…å¸‚å‡†å¤‡æ°´æœå•¦! ç´§è·Ÿæ½®æµ!","text":"ä¸‹ç­è·¯ä¸Šçªç„¶æƒ³èµ·æ¥åœ£è¯èŠ‚é‚£å¤©çœ‹åˆ°ä¸ªå¾®åšçƒ­æœ, ç…®çº¢é…’, çªç„¶é—´å°±å¥½æƒ³è¯•ä¸€ä¸‹å‘€, åˆšå¥½å®¶é‡Œè¿˜å‰©ä¸‹çš„çº¢é…’, è¯´å¹²å°±å¹², åƒè¿‡æ™šé¥­ä¹‹åå°±åˆ°è¶…å¸‚å‡†å¤‡æ°´æœå•¦! ç´§è·Ÿæ½®æµ! é£Ÿæ ä¸ç”¨å¤ªä¸¥æ ¼, æ”¾å¤šå°‘å¼€å¿ƒå°±å¥½ è‹¹æœ1ä¸ª å¤§ç™½æ¢¨1ä¸ª æ©™å­1ä¸ª æŸ æª¬1ä¸ª è‰è“10+,å¤šäº†æµªè´¹ è“è“10+,åæ­£æˆ‘æ²¡ä¹°åˆ°,æ²¡æ”¾ å…«è§’2ç²’ é¦™å¶2ç‰‡ è‚‰æ¡‚1æ®µ å†°ç³–,å¤šæ”¾ä¸€äº›,ä¸ç„¶ä¼šå¾ˆé…¸,æˆ‘è¿™æ¬¡æ”¾äº†ä¸€å¤§æŠŠ,è¿˜æ˜¯å¾ˆé…¸å“ˆå“ˆå“ˆ çº¢é…’1ç“¶,æ€•å–ä¸äº†å¯ä»¥åŠç“¶ æ­¥éª¤ æŠ±æ­‰åšçš„æ—¶å€™å¿˜è®°äº†æ‹ç…§, å“ˆå“ˆå“ˆä¸è¿‡å½±å“ä¸å¤§ è‹¹æœ, æ¢¨å­, æ©™å­, æŸ æª¬ç”¨åŠä¸ªå°±å¤Ÿäº†,å‰©ä¸‹åŠä¸ªè¢«æˆ‘æ‘†ç›˜åƒæ‰å•¦, å…¨éƒ¨åˆ‡ç‰‡ä¸‹é”… è‰è“, è“è“åˆ‡å¼€ä¸‹é”… æ”¾å…¥å…«è§’, é¦™å¶, è‚‰æ¡‚, å†°ç³– å€’å…¥çº¢é…’, å¥½å¥¢ä¾ˆ, æ•´æ•´ç”¨äº†ä¸€ç“¶, å°±æ˜¯å®ƒ! 5. ç›–ä¸Šé”…, å¼€å°ç«, å¼€å§‹è®¡æ—¶, å–œæ¬¢é…’å‘³15åˆ†é’Ÿå°±å¯ä»¥å–äº†, ä¸æƒ³é…’å‘³å¤ªæµ“, å¯ä»¥å†ä¹…ä¸ª5åˆ†é’Ÿ, ä½†æ˜¯ä¸è¦å¤ªä¹…äº†, å¤ªä¹…äº†å°±ä¸å‰©ä¸‹å¤šå°‘äº†6. å‡ºé”…å•¦, å‡†å¤‡å¥½æ‰‹æœºå¼€å§‹æ‹ç…§å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ7. æ™’ä¸€ä¸‹ç¾ç…§ ä¹°çš„æ°´æœå¾ˆæˆåŠŸ, è‹¹æœè¶…ç”œ, è‰è“è¶…å¥½åƒ, ç°åœ¨ååœ¨ç”µè„‘å‰, å¬ç€éŸ³ä¹, å–ç€çƒ­ä¹ä¹çš„çº¢é…’, åƒç€åˆ‡å‰©ä¸‹çš„æ°´æœ, å¤ªå¹¸ç¦äº†å§!","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"æ—¥å¸¸","slug":"å¤§ç†ŠBIGBEAR/æ—¥å¸¸","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E6%97%A5%E5%B8%B8/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"ç¾é£Ÿ","slug":"ç¾é£Ÿ","permalink":"http://blog.pulsating.cn/tags/%E7%BE%8E%E9%A3%9F/"},{"name":"é£Ÿè°±","slug":"é£Ÿè°±","permalink":"http://blog.pulsating.cn/tags/%E9%A3%9F%E8%B0%B1/"}]},{"title":"Mysql max_allowed_packet è®¾ç½®","slug":"Mysql-max_allowed_packet-setting","date":"2019-12-26T14:05:48.000Z","updated":"2020-01-07T15:19:57.622Z","comments":true,"path":"2019/12/26/Mysql-max_allowed_packet-setting/","link":"","permalink":"http://blog.pulsating.cn/2019/12/26/Mysql-max_allowed_packet-setting/","excerpt":"max_allowed_packet é™åˆ¶ç€ä½ çš„mysql serveæ¥æ”¶çš„æ•°æ®åŒ…å¤§å°, å¦‚æœinsertæˆ–è€…updateæ—¶æ•°æ®è¿‡å¤§,è¶…å‡ºmax_allowed_packetçš„é™åˆ¶,mysqlä¼šæŠ›å‡ºé”™è¯¯å¯¼è‡´æ“ä½œå¤±è´¥,é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•æŸ¥çœ‹å’Œè®¾ç½®max_allowed_packet","text":"max_allowed_packet é™åˆ¶ç€ä½ çš„mysql serveæ¥æ”¶çš„æ•°æ®åŒ…å¤§å°, å¦‚æœinsertæˆ–è€…updateæ—¶æ•°æ®è¿‡å¤§,è¶…å‡ºmax_allowed_packetçš„é™åˆ¶,mysqlä¼šæŠ›å‡ºé”™è¯¯å¯¼è‡´æ“ä½œå¤±è´¥,é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•æŸ¥çœ‹å’Œè®¾ç½®max_allowed_packet æŸ¥çœ‹mysql&gt; show global variables like &#39;max_allowed_packet&#39;; +--------------------+----------+ | Variable_name | Value | +--------------------+----------+ | max_allowed_packet | 16777216 | +--------------------+----------+ 1 row in set, 1 warning (0.00 sec)å¯ä»¥çœ‹åˆ°å½“å‰max_allowed_packetè®¾ç½®ä¸º16M (1024 * 1024 * 16) ä¿®æ”¹ é€šè¿‡mysqlå‘½ä»¤ä¿®æ”¹(ä¸´æ—¶,é‡å¯mysqlä¼šé‡ç½®ä¸ºåŸå§‹å¤§å°)mysql&gt; set global max_allowed_packet=32*1024*1024; ERROR 2006 (HY000): MySQL server has gone away No connection. Trying to reconnect... Connection id: 6 Current database: mine Query OK, 0 rows affected (0.01 sec) mysql&gt; show global variables like â€˜max_allowed_packetâ€™;+â€”â€”â€”â€”â€”â€”â€“+â€”â€”â€”-+| Variable_name | Value |+â€”â€”â€”â€”â€”â€”â€“+â€”â€”â€”-+| max_allowed_packet | 33554432 |+â€”â€”â€”â€”â€”â€”â€“+â€”â€”â€”-+1 row in set, 1 warning (0.00 sec) å¯ä»¥çœ‹åˆ°ç°åœ¨çš„valueå€¼å·²ç»å˜ä¸º33554432,ä¹Ÿå°±æ˜¯32M * ä¿®æ”¹mysqlé…ç½®æ–‡ä»¶(ä¸ä¼šå¤±æ•ˆ,ç›´åˆ°å†æ¬¡ä¿®æ”¹é…ç½®æ–‡ä»¶) 1. windowsä¸‹,æ‰¾åˆ°mysqlå®‰è£…ç›®å½•ä¸‹__my.ini__æ–‡ä»¶ 2. æ‰¾åˆ°è¿™ä¸€è¡Œ__max_allowed_packet=16M__å°†16Mä¿®æ”¹ä¸ºä½ æƒ³è¦çš„å¤§å°,è¿™é‡Œæ”¹ä¸º8M,ä¿å­˜ 3. é‡å¯mysqlæœåŠ¡,æŸ¥çœ‹å½“å‰max_allowed_packetå¤§å°,å‘ç°å·²ç»æˆåŠŸä¿®æ”¹ä¸º8Mmysql&gt; show global variables like â€˜max_allowed_packetâ€™;ERROR 2006 (HY000): MySQL server has gone awayNo connection. Trying to reconnectâ€¦Connection id: 2Current database: mine +â€”â€”â€”â€”â€”â€”â€“+â€”â€”â€”+| Variable_name | Value |+â€”â€”â€”â€”â€”â€”â€“+â€”â€”â€”+| max_allowed_packet | 8388608 |+â€”â€”â€”â€”â€”â€”â€“+â€”â€”â€”+1 row in set, 1 warning (0.01 sec)```","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"å¤§ç†ŠBIGBEAR/Mysql","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"Mysql","permalink":"http://blog.pulsating.cn/tags/Mysql/"}]},{"title":"Mysql table import and export å¿«é€Ÿå¯¼å‡ºå¯¼å…¥","slug":"Mysql-table-import-and-export","date":"2019-12-20T13:44:13.000Z","updated":"2019-12-26T15:13:36.352Z","comments":true,"path":"2019/12/20/Mysql-table-import-and-export/","link":"","permalink":"http://blog.pulsating.cn/2019/12/20/Mysql-table-import-and-export/","excerpt":"","text":"å¯¼å‡ºmysqldump -u root -p -q -e -t db_name table_name &gt; table_name.sql â€“quickï¼Œ-qè¯¥é€‰é¡¹åœ¨å¯¼å‡ºå¤§è¡¨æ—¶å¾ˆæœ‰ç”¨ï¼Œå®ƒå¼ºåˆ¶ mysqldump ä»æœåŠ¡å™¨æŸ¥è¯¢å–å¾—è®°å½•ç›´æ¥è¾“å‡ºè€Œä¸æ˜¯å–å¾—æ‰€æœ‰è®°å½•åå°†å®ƒä»¬ç¼“å­˜åˆ°å†…å­˜ä¸­ã€‚ â€“extended-insert, -eä½¿ç”¨å…·æœ‰å¤šä¸ªVALUESåˆ—çš„INSERTè¯­æ³•ã€‚è¿™æ ·ä½¿å¯¼å‡ºæ–‡ä»¶æ›´å°ï¼Œå¹¶åŠ é€Ÿå¯¼å…¥æ—¶çš„é€Ÿåº¦ã€‚é»˜è®¤ä¸ºæ‰“å¼€çŠ¶æ€ï¼Œä½¿ç”¨â€“skip-extended-insertå–æ¶ˆé€‰é¡¹ã€‚ -tä»…å¯¼å‡ºè¡¨æ•°æ®ï¼Œä¸å¯¼å‡ºè¡¨ç»“æ„ å¯¼å…¥use db_name; source table_name.sql;","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"å¤§ç†ŠBIGBEAR/Mysql","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"Mysql","permalink":"http://blog.pulsating.cn/tags/Mysql/"}]},{"title":"JSå®ç°é¦–å­—æ¯æ’åº","slug":"First-letter-sort-use-JS","date":"2019-11-22T08:56:10.000Z","updated":"2020-01-07T15:18:42.224Z","comments":true,"path":"2019/11/22/First-letter-sort-use-JS/","link":"","permalink":"http://blog.pulsating.cn/2019/11/22/First-letter-sort-use-JS/","excerpt":"ä¸€ä¸ªæŒ‰ç…§å§“åé¦–å­—æ¯æ’åºçš„åŠŸèƒ½,æ”¯æŒæ•°å­—,å­—æ¯,ç¬¦å·,ä¸­æ–‡æ··åˆæ’åº","text":"ä¸€ä¸ªæŒ‰ç…§å§“åé¦–å­—æ¯æ’åºçš„åŠŸèƒ½,æ”¯æŒæ•°å­—,å­—æ¯,ç¬¦å·,ä¸­æ–‡æ··åˆæ’åº è§„åˆ™ é¦–å­—ä¸ºä¸­æ–‡åˆ™è½¬æ¢æˆå°å†™ å¤§å°å†™å‡è½¬æ¢æˆå°å†™æ¯”è¾ƒ,é¿å…ä»»æ„å¤§å†™å­—æ¯æ’åœ¨ä»»æ„å°å†™å­—æ¯å‰ å¤§å†™å­—æ¯ == å°å†™å­—æ¯ &gt; æ•°å­— &gt; ç¬¦å· (è¿™é‡Œæ•°å­—å’Œç¬¦å·å¯ä»¥åœ¨æœ€å‰é¢,å› ä¸ºä¸šåŠ¡éœ€è¦è¢«æˆ‘æ‹¿åˆ°äº†æœ€åé¢) æ•ˆæœ// æ’åºå‰ this.friends = [ {nick_name: &#39;cc&#39;}, {nick_name: &#39;Xin&#39;}, {nick_name: &#39;xiaoæzi&#39;}, {nick_name: &#39;__å¤§ç†Š&#39;}, {nick_name: &#39;Tian&#39;}, {nick_name: &#39;3day&#39;}, {nick_name: &#39;ç¬¬ä¸€å¸…&#39;}, {nick_name: &#39;å¤§çŒªè¹„å­&#39;}, ]; // æ’åºå this.friends = [ {nick_name: &#39;cc&#39;}, {nick_name: &#39;ç¬¬ä¸€å¸…&#39;}, {nick_name: &#39;å¤§çŒªè¹„å­&#39;}, {nick_name: &#39;Tian&#39;}, {nick_name: &#39;Xin&#39;}, {nick_name: &#39;xiaoæzi&#39;}, {nick_name: &#39;3day&#39;}, {nick_name: &#39;__å¤§ç†Š&#39;}, ];Library hotoo/pinyin å®ç° å®‰è£…hotoo/pinyin npm install pinyin -S å¼•å…¥ import pinyin from &#39;pinyin&#39;; é€»è¾‘ &#x2F;** * æ ¹æ®å§“åæˆ–æ˜µç§°æ’åº, * ç»´æŠ¤ä¸¤ä¸ªæ•°ç»„,åˆ†åˆ«å­˜å…¥å­—æ¯å¼€å¤´å’Œæ•°å­—ç¬¦å·å¼€å¤´çš„é¡¹ * è¿™é‡Œå¦‚æœæƒ³æŠŠæ•°å­—ç¬¦å·å¼€å¤´çš„åå­—æ’åœ¨æœ€å‰é¢,å°±åªç”¨ä¸€ä¸ªw_userså°±å¯ä»¥äº†,æ’åºçš„æ—¶å€™ä¼šé»˜è®¤åœ¨æœ€å‰é¢ * @param {Array} list éœ€è¦æ’åºçš„æ•°ç»„å¯¹è±¡,æ ¼å¼ç±»ä¼¼ä¸Šé¢æ•ˆæœä¸­çš„æ•°æ® * @return {Array} sort_list æ’åºåçš„æ•°ç»„å¯¹è±¡ *&#x2F; function name_sort(list) { let w_users = []; &#x2F;&#x2F;å­—æ¯å¼€å¤´ let n_users = []; &#x2F;&#x2F;æ•°å­— or ç¬¦å· list.forEach(item =&gt; { let first_word = pinyin(item.nick_name, { style: pinyin.STYLE_FIRST_LETTER }); first_word = first_word[0][0]; first_word = first_word.substr(0, 1); item.nick_name_sort = first_word + item.nick_name;&#x2F;&#x2F;å¢åŠ ä¸€ä¸ªä¸´æ—¶æ’åºå±æ€§, ä¸ç„¶æ’åºåè¿˜è¦å¤„ç†åŸå±æ€§ let regx = &#x2F;^[A-Za-z]*$&#x2F;; &#x2F;&#x2F;æ­£åˆ™åŒ¹é…å‡ºå­—æ¯å¼€å¤´çš„ let flag = regx.test(first_word); flag &amp;&amp; w_users.push(item) || n_users.push(item); &#x2F;&#x2F;æ ¹æ®ç±»å‹å†³å®šå­˜å…¥å“ªä¸ªæ•°ç»„ }) &#x2F;&#x2F;åˆ©ç”¨æ–°å¢çš„nick_name_sortæ’åº w_users.sort((a,b) =&gt; a.nick_name_sort.substr(0, 1).toLowerCase().charCodeAt(0) - b.nick_name_sort.substr(0, 1).toLowerCase().charCodeAt(0)); n_users.sort((a,b) =&gt; a.nick_name_sort.substr(0, 1).toLowerCase().charCodeAt(0) - b.nick_name_sort.substr(0, 1).toLowerCase().charCodeAt(0)); let sort_list = w_users.concat(n_users); return sort_list; }","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"å‰ç«¯","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/"},{"name":"JavaScript","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯/JavaScript","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/JavaScript/"},{"name":"Vue","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯/JavaScript/Vue","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/JavaScript/Vue/"}],"tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://blog.pulsating.cn/tags/%E5%89%8D%E7%AB%AF/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.pulsating.cn/tags/JavaScript/"},{"name":"Vue","slug":"Vue","permalink":"http://blog.pulsating.cn/tags/Vue/"},{"name":"æ’åº","slug":"æ’åº","permalink":"http://blog.pulsating.cn/tags/%E6%8E%92%E5%BA%8F/"}]},{"title":"GDåº“å®ç°å›¾ç‰‡åˆå¹¶","slug":"Use-GD-library-to-implement-image-merge","date":"2019-11-15T15:24:42.000Z","updated":"2019-12-20T13:00:36.168Z","comments":true,"path":"2019/11/15/Use-GD-library-to-implement-image-merge/","link":"","permalink":"http://blog.pulsating.cn/2019/11/15/Use-GD-library-to-implement-image-merge/","excerpt":"","text":"","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"å¤§ç†ŠBIGBEAR/PHP","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/PHP/"},{"name":"å›¾åƒå¤„ç†","slug":"å¤§ç†ŠBIGBEAR/å›¾åƒå¤„ç†","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"PHP","permalink":"http://blog.pulsating.cn/tags/PHP/"},{"name":"GD","slug":"GD","permalink":"http://blog.pulsating.cn/tags/GD/"}]},{"title":"VueåŠ¨æ€ç»‘å®šref","slug":"Vue-dynamically-binds-ref","date":"2019-11-13T01:54:18.000Z","updated":"2020-01-07T15:19:55.940Z","comments":true,"path":"2019/11/13/Vue-dynamically-binds-ref/","link":"","permalink":"http://blog.pulsating.cn/2019/11/13/Vue-dynamically-binds-ref/","excerpt":"è®°å½•ä¸€ä¸‹åŠ¨æ€ç»‘å®šåŠä½¿ç”¨refçš„æ–¹æ³•","text":"è®°å½•ä¸€ä¸‹åŠ¨æ€ç»‘å®šåŠä½¿ç”¨refçš„æ–¹æ³• æƒ…æ™¯éœ€è¦åœ¨ä½¿ç”¨weexçš„&lt;list&gt;ç»„ä»¶æ—¶,éœ€è¦å®ç°ä¸€ä¸ªæ»šåŠ¨åˆ°å…·ä½“æŸä¸€ä¸ª&lt;cell&gt;çš„åŠŸèƒ½ å®ç°åœ¨forå¾ªç¯æ ‡ç­¾ä¸ŠåŠ¨æ€ç»‘å®šref&lt;div v-for=&quot;(item, index) in list&quot; :key=&quot;index&quot; :ref=&quot;&#96;item${index}&#96;&quot;&gt;&lt;&#x2F;div&gt; è·å–refå¹¶æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®å¼•å…¥weexçš„dom æ¨¡å—const dom = weex.requireModule(&#39;dom&#39;); åŠ¨æ€è·å–ref,å¹¶ä½¿ç”¨scrollToElementæ»šåŠ¨åˆ°æŒ‡å®šå…ƒç´ const el = this.$refs[&#96;message${length-1}&#96;][0]; dom.scrollToElement(el, {});","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"å‰ç«¯","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/"},{"name":"JavaScript","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯/JavaScript","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/JavaScript/"},{"name":"Vue","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯/JavaScript/Vue","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/JavaScript/Vue/"},{"name":"uni-app","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯/JavaScript/Vue/uni-app","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/JavaScript/Vue/uni-app/"},{"name":"WEEX","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯/JavaScript/Vue/WEEX","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/JavaScript/Vue/WEEX/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://blog.pulsating.cn/tags/Vue/"},{"name":"Js","slug":"Js","permalink":"http://blog.pulsating.cn/tags/Js/"},{"name":"éšæ‰‹è®°","slug":"éšæ‰‹è®°","permalink":"http://blog.pulsating.cn/tags/%E9%9A%8F%E6%89%8B%E8%AE%B0/"},{"name":"uni-app","slug":"uni-app","permalink":"http://blog.pulsating.cn/tags/uni-app/"},{"name":"WEEX","slug":"WEEX","permalink":"http://blog.pulsating.cn/tags/WEEX/"}]},{"title":"ä½¿ç”¨imagemagickå®ç°ä¸¤å¼ æˆ–å¤šå¼ å›¾ç‰‡å›¾ç‰‡æ‹¼æ¥ è¦†ç›–","slug":"Using-imagemagick-to-achieve-the-splicing-of-two-or-more-pictures","date":"2019-11-12T15:40:50.000Z","updated":"2020-01-07T15:19:57.986Z","comments":true,"path":"2019/11/12/Using-imagemagick-to-achieve-the-splicing-of-two-or-more-pictures/","link":"","permalink":"http://blog.pulsating.cn/2019/11/12/Using-imagemagick-to-achieve-the-splicing-of-two-or-more-pictures/","excerpt":"Imagemagickæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å›¾åƒå¤„ç†åº“,å·ç§°å‘½ä»¤è¡Œä¸Šçš„photoshop ä½¿ç”¨GDæ‰©å±•å®ç°å’Œæœ¬ç¯‡æ–‡ç« ç›¸åŒçš„æ•ˆæœ phpçš„imagickæ‰©å±•å’Œimagemagickçš„å®‰è£…æ•™ç¨‹ 1. é—®é¢˜åœºæ™¯&emsp;&emsp;åœ¨è¿›è¡Œæ‰‹ä¸Šçš„ä¸€ä¸ªæµ·æŠ¥é¡¹ç›®æ—¶,é‡åˆ°äº†è¿™æ ·ä¸€ä¸ªéœ€æ±‚:&emsp;&emsp;å¦‚å›¾,åœ¨ç”¨æˆ·åˆ¶ä½œä¸€å¼ æµ·æŠ¥å,æœ€åä¿å­˜çš„æ—¶å€™,å›¾ç‰‡ä¸»ä½“bodyæ˜¯ç”¨æˆ·åˆ¶ä½œçš„æµ·æŠ¥,footeræ˜¯ç”±å·¦å³ä¸¤å¼ äºŒç»´ç ç»„æˆçš„,å·¦è¾¹ä¸ºå…¬ä¼—å·çš„å¸¦å‚æ•°äºŒç»´ç ,å³ä¾§æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„äºŒç»´ç ,ç¾å·¥æä¾›ä¸€å¼ é€šç”¨çš„footeræ¨¡ç‰ˆ,ç¨‹åºæ¥è´Ÿè´£åŠ¨æ€å°†äºŒç»´ç æ›¿æ¢ä¸Šå»,æœ€ç»ˆæ‹¼æ¥æˆä¸‹é¢å›¾ç‰‡ç¤ºä¾‹çš„æ ·å­","text":"Imagemagickæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å›¾åƒå¤„ç†åº“,å·ç§°å‘½ä»¤è¡Œä¸Šçš„photoshop ä½¿ç”¨GDæ‰©å±•å®ç°å’Œæœ¬ç¯‡æ–‡ç« ç›¸åŒçš„æ•ˆæœ phpçš„imagickæ‰©å±•å’Œimagemagickçš„å®‰è£…æ•™ç¨‹ 1. é—®é¢˜åœºæ™¯&emsp;&emsp;åœ¨è¿›è¡Œæ‰‹ä¸Šçš„ä¸€ä¸ªæµ·æŠ¥é¡¹ç›®æ—¶,é‡åˆ°äº†è¿™æ ·ä¸€ä¸ªéœ€æ±‚:&emsp;&emsp;å¦‚å›¾,åœ¨ç”¨æˆ·åˆ¶ä½œä¸€å¼ æµ·æŠ¥å,æœ€åä¿å­˜çš„æ—¶å€™,å›¾ç‰‡ä¸»ä½“bodyæ˜¯ç”¨æˆ·åˆ¶ä½œçš„æµ·æŠ¥,footeræ˜¯ç”±å·¦å³ä¸¤å¼ äºŒç»´ç ç»„æˆçš„,å·¦è¾¹ä¸ºå…¬ä¼—å·çš„å¸¦å‚æ•°äºŒç»´ç ,å³ä¾§æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„äºŒç»´ç ,ç¾å·¥æä¾›ä¸€å¼ é€šç”¨çš„footeræ¨¡ç‰ˆ,ç¨‹åºæ¥è´Ÿè´£åŠ¨æ€å°†äºŒç»´ç æ›¿æ¢ä¸Šå»,æœ€ç»ˆæ‹¼æ¥æˆä¸‹é¢å›¾ç‰‡ç¤ºä¾‹çš„æ ·å­ 2. ä¸ºä»€ä¹ˆä½¿ç”¨imagemagick&emsp;&emsp;æ•´ä¸ªé¡¹ç›®åå°ä½¿ç”¨çš„æ˜¯PHPè¯­è¨€,æ—¢ç„¶æ¶‰åŠåˆ°å›¾ç‰‡å¤„ç†,ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„è‚¯å®šæ˜¯å¤§åé¼é¼çš„GDåº“æ‰©å±•,åœ¨ä½¿ç”¨gdåº“å°è¯•å,å› ä¸ºæ€§èƒ½çš„åŸå› ,å¯èƒ½æ˜¯æˆ‘ä½¿ç”¨çš„æ–¹å¼ä¸å¯¹,åˆæˆä¸€å¼ å›¾ç‰‡çš„æ—¶é—´é•¿çš„å¿å—ä¸äº†,åˆæœæ–­æ”¾å¼ƒäº†,åé¢åˆæƒ³åˆ°ä½¿ç”¨imagemagickè¿™ä¸ªå·¥å…·,è¯•ç€ä½¿ç”¨iamgemagickæ¥é‡å†™ä¸€é,æœç„¶,é€Ÿåº¦å¿«äº†è®¸å¤š 3. å®ç°æ€è·¯&emsp;&emsp;a. å°†bodyå’Œfooterä¸Šä¸‹æ‹¼æ¥èµ·æ¥&emsp;&emsp;b. åˆ†åˆ«å°†è·å–çš„ä¸¤ä¸ªäºŒç»´ç å›¾ç‰‡æ ¹æ®åæ ‡ç½®å…¥å·¦ä¸‹å’Œå³ä¸‹æ³¨:æˆ‘è§‰å¾—å…ˆè¿›è¡Œbæ­¥éª¤,å†æ‹¼æ¥,æ•ˆç‡å¯èƒ½ä¼šé«˜ä¸€ä¸¢ä¸¢,ä½†æ˜¯æˆ‘ä¹Ÿæ‡’å¾—æµ‹äº†,å°±æ²¡æœ‰æ”¹åŠ¨ 4. ä»£ç éƒ¨åˆ†ç›´æ¥ä½¿ç”¨çš„æ˜¯imagemagickçš„å‘½ä»¤è¡ŒæŒ‡ä»¤,æ²¡æœ‰ä½¿ç”¨imagickæ‰©å±•,å·²ä¸Šçº¿ç¨³å®šä½¿ç”¨ public function merge_img($file_name, $ad_file_name, $user_qrcode,$template_id) { $body = $file_name;//è¿™ä¸ªæ˜¯bodyçš„è·¯å¾„ $footer = APPPATH . &#39;../static/img/footer.png&#39;;//footeræ˜¯ä¸€å¼ æ¨¡æ¿å›¾ $qrcode = APPPATH . &#39;../&#39; . $user_qrcode;//å³ä¸‹è§’ç”¨æˆ·è‡ªå®šä¹‰çš„äºŒç»´ç  $param_qrcode = $this-&gt;param_qrcode($template_id);//å·¦ä¸‹è§’çš„å¸¦å‚æ•°äºŒç»´ç ,param_qrcode()æ–¹æ³•è¿”å›å…¶è·¯å¾„ $cmd = &#39;convert -append &#39;.$header.&#39; &#39;.$footer.&#39; &#39;.$ad_file_name.&#39;&#39;;//1.å°†bodyå’Œfooteræ‹¼æ¥,å› ä¸ºbodyå’Œfooteræ˜¯å›ºå®šç­‰å®½çš„,æ‰€ä»¥ç›´æ¥æ‹¼æ¥,+appendä¸ºæ¨ªå‘æ‹¼æ¥,-appendä¸ºçºµå‘æ‹¼æ¥ $result = exec($cmd);//æ‰§è¡Œ $cmd = &#39;composite -geometry +634+1093 &#39;.$qrcode.&#39; &#39;.$ad_file_name.&#39; &#39;.$ad_file_name.&#39;&#39;;//å°†ç”¨æˆ·äºŒç»´ç ç½®å…¥å³ä¸‹è§’,&#39;+634+1093&#39;ä¸ºç½®å…¥ä½ç½®çš„åæ ‡ $result = exec($cmd); $cmd = &#39;composite -geometry +27+1093 &#39;.$param_qrcode.&#39; &#39;.$ad_file_name.&#39; &#39;.$ad_file_name.&#39;&#39;;//å°†å¸¦å‚æ•°äºŒç»´ç ç½®å…¥å·¦ä¸‹è§’ $result = exec($cmd); }","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"å¤§ç†ŠBIGBEAR/PHP","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/PHP/"},{"name":"å›¾åƒå¤„ç†","slug":"å¤§ç†ŠBIGBEAR/å›¾åƒå¤„ç†","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"PHP","permalink":"http://blog.pulsating.cn/tags/PHP/"},{"name":"imagick","slug":"imagick","permalink":"http://blog.pulsating.cn/tags/imagick/"},{"name":"Imagemagick","slug":"Imagemagick","permalink":"http://blog.pulsating.cn/tags/Imagemagick/"}]},{"title":"ThinkPHP5æ¡†æ¶æ­å»º","slug":"Getting-started-with-thinkphp5","date":"2019-11-12T15:38:23.000Z","updated":"2020-01-07T15:19:57.280Z","comments":true,"path":"2019/11/12/Getting-started-with-thinkphp5/","link":"","permalink":"http://blog.pulsating.cn/2019/11/12/Getting-started-with-thinkphp5/","excerpt":"","text":"thinkphpåŸºäºMVCçš„æ–¹å¼æ¥ç»„ç»‡,MVCæ˜¯ä¸€ç§ç»å…¸çš„ç¨‹åºè®¾è®¡ç†å¿µ,æ­¤æ¨¡å¼å°†ä½ çš„é¡¹ç›®åˆ†æˆä¸‰ä¸ªéƒ¨åˆ†,æ¨¡å‹å±‚(model),è§†å›¾å±‚(view),`æ§åˆ¶å±‚(controller),MVCä¸ºè¿™ä¸‰ä¸ªä¸‰æ¬¡çš„é¦–å­—æ¯ç¼©å†™ ä¸‹è½½ThinkPHPæ¡†æ¶å®˜ç½‘ä¸‹è½½:http://www.thinkphp.cn/thinkphpæœ‰æ ¸å¿ƒåŒ…å’Œå®Œæ•´åŒ…ä¹‹åˆ†,æˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯æœ€æ–°ç‰ˆ5.0.21çš„å®Œæ•´ç‰ˆ* æ ¸å¿ƒåŒ…:ä»…åŒ…å«thinkphpè¿è¡Œçš„æœ€ä¸»è¦æ–‡ä»¶,ä¸åŒ…å«æ‰©å±•ç±»,ç¤ºä¾‹,æ–‡æ¡£* å®Œæ•´åŒ…:æ ¸å¿ƒåŒ…çš„åŸºç¡€ä¸Šå¢åŠ äº†æ‰©å±•ç±»,ç¤ºä¾‹åŠæ–‡æ¡£ ä¸‹è½½åå°†æ–‡ä»¶è§£å‹åˆ°ä½ çš„localhostæ ¹ç›®å½•ä¸‹,æˆ‘çš„è·¯å¾„æ˜¯:D:\\phpStudy\\WWW,ç„¶åé‡å‘½åç›®å½•åä¸ºmyphpstudy,æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨æ¥ä¸‹æ¥åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥:http://localhost/mythinkphp/public/,æ˜¾ç¤ºå‡ºå¦‚ä¸‹å†…å®¹,è¯´æ˜ä½ çš„thinkphpæ¡†æ¶å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†. 2.ç›®å½•ç»“æ„ project åº”ç”¨éƒ¨ç½²ç›®å½• â”œâ”€application åº”ç”¨ç›®å½•ï¼ˆå¯è®¾ç½®ï¼‰ â”‚ â”œâ”€common å…¬å…±æ¨¡å—ç›®å½•ï¼ˆå¯æ›´æ”¹ï¼‰ â”‚ â”œâ”€index æ¨¡å—ç›®å½•(å¯æ›´æ”¹) â”‚ â”‚ â”œâ”€config.php æ¨¡å—é…ç½®æ–‡ä»¶ â”‚ â”‚ â”œâ”€common.php æ¨¡å—å‡½æ•°æ–‡ä»¶ â”‚ â”‚ â”œâ”€controller æ§åˆ¶å™¨ç›®å½• â”‚ â”‚ â”œâ”€model æ¨¡å‹ç›®å½• â”‚ â”‚ â”œâ”€view è§†å›¾ç›®å½• â”‚ â”‚ â””â”€ ... æ›´å¤šç±»åº“ç›®å½• â”‚ â”œâ”€command.php å‘½ä»¤è¡Œå·¥å…·é…ç½®æ–‡ä»¶ â”‚ â”œâ”€common.php åº”ç”¨å…¬å…±ï¼ˆå‡½æ•°ï¼‰æ–‡ä»¶ â”‚ â”œâ”€config.php åº”ç”¨ï¼ˆå…¬å…±ï¼‰é…ç½®æ–‡ä»¶ â”‚ â”œâ”€database.php æ•°æ®åº“é…ç½®æ–‡ä»¶ â”‚ â”œâ”€tags.php åº”ç”¨è¡Œä¸ºæ‰©å±•å®šä¹‰æ–‡ä»¶ â”‚ â””â”€route.php è·¯ç”±é…ç½®æ–‡ä»¶ â”œâ”€extend æ‰©å±•ç±»åº“ç›®å½•ï¼ˆå¯å®šä¹‰ï¼‰ â”œâ”€public WEB éƒ¨ç½²ç›®å½•ï¼ˆå¯¹å¤–è®¿é—®ç›®å½•ï¼‰ â”‚ â”œâ”€static é™æ€èµ„æºå­˜æ”¾ç›®å½•(css,js,image) â”‚ â”œâ”€index.php åº”ç”¨å…¥å£æ–‡ä»¶ â”‚ â”œâ”€router.php å¿«é€Ÿæµ‹è¯•æ–‡ä»¶ â”‚ â””â”€.htaccess ç”¨äº apache çš„é‡å†™ â”œâ”€runtime åº”ç”¨çš„è¿è¡Œæ—¶ç›®å½•ï¼ˆå¯å†™ï¼Œå¯è®¾ç½®ï¼‰ â”œâ”€vendor ç¬¬ä¸‰æ–¹ç±»åº“ç›®å½•ï¼ˆComposerï¼‰ â”œâ”€thinkphp æ¡†æ¶ç³»ç»Ÿç›®å½• â”‚ â”œâ”€lang è¯­è¨€åŒ…ç›®å½• â”‚ â”œâ”€library æ¡†æ¶æ ¸å¿ƒç±»åº“ç›®å½• â”‚ â”‚ â”œâ”€think Think ç±»åº“åŒ…ç›®å½• â”‚ â”‚ â””â”€traits ç³»ç»Ÿ Traits ç›®å½• â”‚ â”œâ”€tpl ç³»ç»Ÿæ¨¡æ¿ç›®å½• â”‚ â”œâ”€.htaccess ç”¨äº apache çš„é‡å†™ â”‚ â”œâ”€.travis.yml CI å®šä¹‰æ–‡ä»¶ â”‚ â”œâ”€base.php åŸºç¡€å®šä¹‰æ–‡ä»¶ â”‚ â”œâ”€composer.json composer å®šä¹‰æ–‡ä»¶ â”‚ â”œâ”€console.php æ§åˆ¶å°å…¥å£æ–‡ä»¶ â”‚ â”œâ”€convention.php æƒ¯ä¾‹é…ç½®æ–‡ä»¶ â”‚ â”œâ”€helper.php åŠ©æ‰‹å‡½æ•°æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰ â”‚ â”œâ”€LICENSE.txt æˆæƒè¯´æ˜æ–‡ä»¶ â”‚ â”œâ”€phpunit.xml å•å…ƒæµ‹è¯•é…ç½®æ–‡ä»¶ â”‚ â”œâ”€README.md README æ–‡ä»¶ â”‚ â””â”€start.php æ¡†æ¶å¼•å¯¼æ–‡ä»¶ â”œâ”€build.php è‡ªåŠ¨ç”Ÿæˆå®šä¹‰æ–‡ä»¶ï¼ˆå‚è€ƒï¼‰ â”œâ”€composer.json composer å®šä¹‰æ–‡ä»¶ â”œâ”€LICENSE.txt æˆæƒè¯´æ˜æ–‡ä»¶ â”œâ”€README.md README æ–‡ä»¶ â”œâ”€think å‘½ä»¤è¡Œå…¥å£æ–‡ä»¶ Hello Worldè¿™æ—¶ä½ å¯ä»¥å°†æ¡†æ¶ç›®å½•å¯¼å…¥åˆ°ä½ çš„IDEä¸­äº†,æ–¹ä¾¿æˆ‘ä»¬ç¼–è¾‘ä»£ç ,ä¸‹é¢æˆ‘ä»¬æ¥è¯•ç€è¾“å‡ºHello World å§!æ‰¾åˆ°å¹¶æ‰“å¼€å¦‚å›¾æ‰€ç¤ºçš„æ–‡ä»¶ä½ç½®,å°†å…¶ä¸­ä»£ç è¿›è¡Œä¿®æ”¹ ä¿®æ”¹åçš„ä»£ç  &lt;?php namespace app\\index\\controller; class Index { public function index() { return &quot;Hello World&quot;; } }è¿™æ—¶æˆ‘ä»¬å»æµè§ˆå™¨åœ°å€æ è¾“å…¥http://localhost/mythinkphp/public/å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ”¹åŠ¨åçš„å†…å®¹äº†,æ˜¯ä¸æ˜¯å¾ˆç®€å•å‘¢!","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"å¤§ç†ŠBIGBEAR/PHP","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/PHP/"},{"name":"ThinkPHP","slug":"å¤§ç†ŠBIGBEAR/PHP/ThinkPHP","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/PHP/ThinkPHP/"}],"tags":[{"name":"ThinkPHP","slug":"ThinkPHP","permalink":"http://blog.pulsating.cn/tags/ThinkPHP/"},{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"PHP","permalink":"http://blog.pulsating.cn/tags/PHP/"}]},{"title":"PHP å•è‰²ä½å›¾å–æ¨¡","slug":"PHP-monochrome-bitmap-module","date":"2019-11-12T15:24:09.000Z","updated":"2022-01-09T15:43:56.418Z","comments":true,"path":"2019/11/12/PHP-monochrome-bitmap-module/","link":"","permalink":"http://blog.pulsating.cn/2019/11/12/PHP-monochrome-bitmap-module/","excerpt":"2018-11-27æ—¥æ›´æ–°:&emsp;&emsp;ç”±äºæ²¡æœ‰æ‰¾åˆ°ç”Ÿæˆ.bmpæ ¼å¼å›¾ç‰‡çš„å¥½åŠæ³•,æ”¹ä¸ºä½¿ç”¨.wbmpæ ¼å¼,è½¬æ¢å’Œè¯»å–éƒ½æ”¹ä¸º.wbmpæ ¼å¼,åŸæ¥çš„bmp2hexå‡½æ•°é€»è¾‘æ²¡æœ‰å˜åŒ–,æ”¹åä¸ºwbmp2hex,å¹¶ä¸å†ä½¿ç”¨ImageCreateFromBMPå‡½æ•°,å¯ä»¥æ”¶è—ä¸€ä¸‹è¿™ä¸ªå‡½æ•°è¿˜æ˜¯æœ‰ç”¨çš„,æœ€æ–°çš„ä»£ç æˆ‘ä¹Ÿæä¾›äº†ä¸‹è½½åœ¨æ–‡ç« æœ«å°¾","text":"2018-11-27æ—¥æ›´æ–°:&emsp;&emsp;ç”±äºæ²¡æœ‰æ‰¾åˆ°ç”Ÿæˆ.bmpæ ¼å¼å›¾ç‰‡çš„å¥½åŠæ³•,æ”¹ä¸ºä½¿ç”¨.wbmpæ ¼å¼,è½¬æ¢å’Œè¯»å–éƒ½æ”¹ä¸º.wbmpæ ¼å¼,åŸæ¥çš„bmp2hexå‡½æ•°é€»è¾‘æ²¡æœ‰å˜åŒ–,æ”¹åä¸ºwbmp2hex,å¹¶ä¸å†ä½¿ç”¨ImageCreateFromBMPå‡½æ•°,å¯ä»¥æ”¶è—ä¸€ä¸‹è¿™ä¸ªå‡½æ•°è¿˜æ˜¯æœ‰ç”¨çš„,æœ€æ–°çš„ä»£ç æˆ‘ä¹Ÿæä¾›äº†ä¸‹è½½åœ¨æ–‡ç« æœ«å°¾ å‡†å¤‡é˜¶æ®µ: pctoLCD2002ç½‘ä¸Šæ‰¾åˆ°çš„ä¸€æ¬¾å–æ¨¡è½¯ä»¶,å¯ä»¥è¯»å–.bmpå›¾ç‰‡å¹¶ç”Ÿæˆå­—æ¨¡,å½“ç„¶æˆ‘ä»¬è¿˜æ˜¯è¦ç”¨ä»£ç æ¥å®Œæˆ,è¿™ä¸ªåªæ˜¯èµ·åˆ°äº†ä¸€ä¸ªå¯¹ç…§ä½œç”¨,æˆ‘å°†å®ƒæ”¾åœ¨äº†æˆ‘çš„ç½‘ç›˜ä¸‹ä¾›å¤§å®¶ä¸‹è½½é“¾æ¥ï¼šç‚¹æˆ‘ä¸‹è½½pctoLCD2002 å¯†ç ï¼š2lyl PHP GDæ‰©å±•å¼ºå¤§çš„PHPå›¾åƒç”Ÿæˆå’Œå¤„ç†æ‰©å±• Windowsè‡ªå¸¦ç”»å›¾å·¥å…·ä¸»è¦ç”¨æ¥ç”Ÿæˆ.bpmæ ¼å¼çš„å›¾ç‰‡,ç›®å‰æˆ‘è¿˜æ²¡æœ‰æ‰¾åˆ°å¥½çš„ç”¨PHPå°†.jpgå’Œ.pngå›¾ç‰‡è½¬ä¸ºå•è‰².bmpæ ¼å¼å›¾ç‰‡çš„åŠæ³•,æš‚æ—¶åªå¥½ç”¨ç”»å›¾å·¥å…·æ¥ç”Ÿæˆ æ“ä½œæ­¥éª¤åˆ†è§£æ¼”ç¤ºä¸€. ä½¿ç”¨ç”»å›¾å·¥å…·è·å¾—.bmpæ ¼å¼å›¾ç‰‡ ä½¿ç”¨ç”»å›¾å·¥å…·æ‰“å¼€ä¸€å¼ äº‹å…ˆå‡†å¤‡å¥½çš„å›¾ç‰‡,å¦å­˜ä¸º.bmpå•è‰²ä½å›¾,è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€å¼ .bmpæ ¼å¼çš„å›¾ç‰‡,ç™½è‰²èƒŒæ™¯,åªæœ‰é»‘è‰² æˆ–è€…æˆ‘ä»¬è‡ªå·±åŠ¨æ‰‹æ¥ç”»ä¸€å¼ ,æ‰“å¼€ç”»å›¾å·¥å…·,è°ƒæ•´ç”»å¸ƒå¤§å°ä¸ºä½ éœ€è¦çš„å°ºå¯¸,ç¤ºä¾‹ä¸º100*70åƒç´ ,å–æ¶ˆå‹¾é€‰ä¿æŒçºµæ¨ªæ¯”,è°ƒæ•´å¥½åç‚¹å‡»ç¡®å®š,ç„¶åæˆ‘ä»¬å¯ä»¥ç”¨åˆ·å­éšä¾¿ç”»äº›ä»€ä¹ˆåœ¨ç”»å¸ƒä¸Š,ä½ å–œæ¬¢å°±å¥½,ç„¶åé‡å¤å‰é¢çš„å¦å­˜ä¸º.bmpå•è‰²ä½å›¾æ­¥éª¤ pctoLCD2002ä¹Ÿå¯ä»¥æ–°å»ºä¸€å¹….bmpå›¾ç‰‡,å¹¶ä¸”éå¸¸ç®€å• äºŒ. ä½¿ç”¨pctoLCD2002å–æ¨¡æ‰¾åˆ°PCtoLCD2002.exeå¹¶åŒå‡»æ‰“å¼€ 1. è§„åˆ™è§£æ,åŠæœ¬æ–‡é…ç½®é¡¹å‚è€ƒåœ¨å–å­—æ¨¡ä¹‹å‰æˆ‘ä»¬å…ˆæ¥è¯´ä¸‹PCtoLCD2002è®¾ç½®é¡¹å’Œå–æ¨¡è§„åˆ™ é…ç½®ä¿¡æ¯: å–æ¨¡è¯´æ˜:a. é€è¡Œå¼é€åˆ—å¼:é¡¾åæ€ä¹‰å°±æ˜¯è¯»å–æ¯å¼ å›¾ç‰‡æ—¶å–ç‚¹æ—¶æ˜¯é€è¡Œè¿˜æ˜¯é€åˆ—çš„b. å–æ¨¡èµ°å‘:é€†å‘:ä»ä½ä½åˆ°é«˜ä½é¡ºå‘:ä»é«˜ä½åˆ°ä½ä½ä¸¾ä¾‹:*æ˜Ÿå·ä»£è¡¨å›¾ä¸­éç©ºç™½çš„åƒç´ ç‚¹,_ä»£è¡¨ç©ºç™½çš„åƒç´ ç‚¹,å–å…«ä½ä¸ºä¸€ä¸ªå­—èŠ‚* _ _ _ _ _ _ _ä»£è¡¨ä¸€ä¸ªå­—èŠ‚(ä¸ºäº†æ–¹ä¾¿æŸ¥çœ‹,æ¯ä¸ªç¬¦å·é”®æˆ‘åŠ å…¥äº†ä¸€ä¸ªç©ºæ ¼,å®é™…æ˜¯æ²¡æœ‰çš„)é€†å‘å³æ˜¯ä»åå¾€å‰å†™,è¡¨ç¤ºä¸º00000001é¡ºå‘å³æ˜¯ä»å‰å¾€åå†™,è¡¨ç¤ºä¸º10000000c. è¾“å‡ºæ•°åˆ¶:è¿™é‡Œé€‰æ‹©åå…­è¿›åˆ¶,å› éœ€é€‰æ‹©,ä¸å¤Ÿæˆ‘éœ€è¦çš„æ˜¯åå…­è¿›åˆ¶,åé¢çš„ä»£ç ä¹Ÿåªæœ‰åå…­è¿›åˆ¶çš„ æœ¬æ–‡å–æ¨¡è§„åˆ™:é€è¡Œå¼ é¡ºå‘ åå…­è¿›åˆ¶ä»ç¬¬ä¸€è¡Œå¼€å§‹,æ¯è¡Œæ¯éš”8ä¸ªåƒç´ ç‚¹ä¸ºä¸€ä¸ªå­—èŠ‚,æ¯è¡Œç»“å°¾æœ€åä¸è¶³8ä½,ç”¨0è¡¥æ»¡ 2. ç”Ÿæˆå­—æ¨¡è®¾ç½®å¥½è§„åˆ™å,æ‰“å¼€ä¹‹å‰åˆ¶ä½œçš„.bmpå›¾ç‰‡,ç‚¹å‡»ç”Ÿæˆå­—æ¨¡,è¿™æ—¶ä¸‹æ–¹ä¼šç”Ÿæˆå‡ºåå…­è¿›åˆ¶ä¸²,å¦‚å›¾: ä½†æ˜¯è¿™è¿˜ä¸æ˜¯æˆ‘æœ€åæƒ³è¦çš„æ ¼å¼,éœ€è¦å¤„ç†ä¸€ä¸‹: å»æ‰å¼€å§‹å¤„å’Œç»“æŸå¤„çš„æ–‡ä»¶è·¯å¾„ å»æ‰æ‰€æœ‰çš„æ ‡ç‚¹ç¬¦å·,å’Œ&#39;{&#39; &#39;}&#39; å»æ‰åå…­è¿›åˆ¶çš„æ ‡è¯†éƒ¨åˆ†,æ‰€æœ‰çš„0x æœ€åå¾—åˆ°ä¸€ä¸²è¿è´¯çš„å­—ç¬¦ä¸²,ç±»ä¼¼: 0000000000000007F8000000000000000000000000003FFC00000000000000000000000000000003FF80000000è¿™å°±æ˜¯æˆ‘ä»¬æœ€ç»ˆéœ€è¦çš„éƒ¨åˆ†äº†!ä¸‹é¢æˆ‘ä»¬ç”¨ä»£ç æ¥å®ç°è¿™ä¸ªåŠŸèƒ½: é—®é¢˜è§£å†³:ä¸€. å®ç°è¿‡ç¨‹åŠæ€è·¯0. ç”Ÿæˆå•è‰²ä½å›¾å¡åœ¨è¿™é‡Œå¥½ä¹…,é’»è¿›äº†æ­»èƒ¡åŒ,å…¶å®.wbmpçš„å›¾ç‰‡å®Œå…¨ç¬¦åˆæˆ‘çš„è¦æ±‚:GDåº“å°±å¯ä»¥å°†jpg/pngè½¬æ¢æˆwbmpæ ¼å¼,ä½¿ç”¨æ—¶å¯ä»¥è°ƒèŠ‚thresholdå‚æ•°,è§£é‡Šå¦‚ä¸‹,æˆ‘ç†è§£ä¸ºç²¾åº¦ä¸çŸ¥é“å‡†ä¸å‡†ç¡®,ä¹Ÿæ²¡æœ‰æŸ¥åˆ°é˜€å€¼åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€â€¦ ç”Ÿæˆ.wbmpæ ¼å¼å›¾ç‰‡ä»£ç ç¤ºä¾‹: $filename = &#39;static/img/1.jpg&#39;; $path = &#39;static/img/11.wbmp&#39;; $image = getimagesize($filename); jpeg2wbmp($filename, $path, $image[1], $image[0], 5);//threshold == 5æ—¶,å’Œç»™çš„è½¯ä»¶è½¬æ¢åç»“æœå®Œå…¨ä¸€è‡´å›¾ç‰‡æ ·å¼: 1. è¯»å–.wbmpæ ¼å¼å›¾ç‰‡(åŸè¯»å–.bmpæ ¼å¼)ä½¿ç”¨gdåº“çš„imagecreatefromwbmpå‡½æ•°: $filename = &#39;static/img/11.wbmp&#39;; $im = imagecreatefromwbmp($filename);å®‰è£…å¥½GDåº“æ‰©å±•å,æˆ‘å‘ç°gdåº“åªèƒ½è¯»å–.wbmpæ–‡ä»¶,å¹¶ä¸æ”¯æŒ.bmpæ–‡ä»¶,æˆ‘çš„gdåº“ç‰ˆæœ¬ä¿¡æ¯å¦‚ä¸‹gd_info(),ç»è¿‡ä¸€ç•ªgoogle,æ‰¾åˆ°äº†ä¸€ä¸ªå¯ä»¥ä½¿ç”¨çš„è¯»å–.bmpçš„å‡½æ•°ImageCreateFromBMP(),æ„Ÿè°¢å‰è¾ˆ 2. é€ä¸ªåƒç´ è¯»å–å¯ä»¥è¯»å–.wbmpæ ¼å¼äº†,æˆ‘ä»¬è¯¥å¦‚ä½•èƒ½å¾—å‡ºæ¯ä¸ªåƒç´ çš„é¢œè‰²å€¼å‘¢?é€šè¿‡æŸ¥çœ‹gdåº“æ–‡æ¡£è¿‡ç¨‹,æˆ‘å‘ç°ä¸€ä¸ªå‡½æ•°imagecolorat(),å¯ä»¥æ ¹æ®ä¼ å…¥çš„ä½ç½®,è·å–æ¯ä¸ªåƒç´ çš„ç´¢å¼•å€¼ä½¿ç”¨ç¤ºä¾‹: // å–å¾—ä¸€ç‚¹çš„é¢œè‰² $file_name = &#39;&#39;;//wbmpå›¾ç‰‡è·¯å¾„ $im = imagecreatefromwbmp($file_name);//è¯»å–wbmpæ ¼å¼ $start_x = 5;//è¡Œ,ä»0å¼€å§‹ $start_y = 10;//åˆ—,ä»0å¼€å§‹ $color_index = imagecolorat($im, $start_x, $start_y); print_r($color_index);3. è·å–å›¾ç‰‡å®½é«˜ç¬¬2æ­¥ä¸­å¯ä»¥è·å–æ¯ä¸ªåƒç´ ä¸­çš„å€¼äº†,ä½†æ˜¯æˆ‘ä»¬æ€»ä¸èƒ½æ¯ä¸ªç‚¹éƒ½æ‰‹åŠ¨ä¼ å…¥,è¿™æ—¶æˆ‘ä»¬å°±éœ€è¦è·å–å›¾ç‰‡çš„å®½é«˜äº† gdåº“ä¸­æœ‰è·å–å›¾ç‰‡å®½é«˜çš„å‡½æ•°imagesx()å’Œimagesy(),ä»£ç ç¤ºä¾‹: $im = imagecreatefromwbmp($file_name);//è¯»å–bmpæ ¼å¼,égdåº“ $width = imagesx($im); $height = imagesy($im); echo $width.&#39;*&#39;.$height;åˆ°è¿™é‡Œ,æœ€ä¸»è¦çš„éƒ¨åˆ†éƒ½å·²ç»å¯ä»¥è·å–åˆ°äº†,åé¢å°±æ˜¯é€»è¾‘éƒ¨åˆ†äº†(ä»£ç ä¸­å¯ä»¥çœ‹åˆ°å…·ä½“å®ç°æ–¹å¼): æ ¹æ®å›¾ç‰‡çš„å®½é«˜,é€è¡Œé€ç‚¹è¯»å–æ¯ä¸ªåƒç´ çš„å€¼,æ¯8ä½ç»„åˆæˆ1ä¸ªå­—èŠ‚,ç„¶åå–æ¨¡,å†è½¬ä¸º16è¿›åˆ¶ æ£€æµ‹æ¯ä¸€è¡Œçš„æœ€åæ˜¯å¦æ»¡è¶³8ä¸ªåƒç´ ,ä¸è¶³åˆ™ç”¨0è¡¥æ»¡ æœ€ç»ˆå°†æ¯ä¸€è¡Œç»„åˆåˆ°ä¸€èµ·,ç»„æˆ16è¿›åˆ¶å­—ç¬¦ä¸² äºŒ. æºç æ•´ä¸ªè¿‡ç¨‹å¯ä»¥å¤§æ¦‚åˆ†ä¸ºä¸‰æ­¥å®Œæˆ,ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å‚è€ƒæˆ–è€…ç›´æ¥copyä½¿ç”¨,å¦‚æœå¯¹ä½ æœ‰å¸®åŠ©,å¸Œæœ›å¯ä»¥ç‚¹ä¸ªèµ,è½¬è½½è¯·æ³¨æ˜æœ¬ç¯‡æ–‡ç« é“¾æ¥åœ°å€åŠä½œè€…,è°¢è°¢! å°†æ™®é€šjpg/pngæ ¼å¼è½¬ä¸º.wbmp $filename = &#39;static/img/1.jpg&#39;; $path = &#39;static/img/11.wbmp&#39;; $image = getimagesize($filename); jpeg2wbmp($filename, $path, $image[1], $image[0], 5);//threshold == 5æ—¶,å’Œç»™çš„è½¯ä»¶è½¬æ¢åç»“æœå®Œå…¨ä¸€è‡´ è¯»å–.wbmpæ ¼å¼å›¾ç‰‡ $filename = &#39;static/img/11.wbmp&#39;; $im = imagecreatefromwbmp($filename); å°†.wbmpè½¬ä¸ºhex_str /** * @param $im * @return string * Commented by liu */ public function wbmp2hex($im) { $width = imagesx($im); $height = imagesy($im); $num = $width % 8; $hex_str = &#39;&#39;; for ($start_y = 0; $start_y &lt; $height; $start_y++) { $binary_str = &#39;&#39;; for ($start_x = 0; $start_x &lt; $width; $start_x++) { $color_index = imagecolorat($im, $start_x, $start_y);//æŒ‡å®šåƒç´ çš„ç´¢å¼•å€¼ $binary_str .= $color_index == 1 ? 1 : 0; if ((1 + $start_x) % 8 == 0 &amp;&amp; $start_x != 0) {//æ¯éš”8ä½è½¬æ¢1æ¬¡ $hex = (string)dechex(bindec($binary_str)); $hex = strlen($hex) == 1 ? &#39;0&#39; . $hex : $hex;//è¡¥0 $hex_str .= $hex; $binary_str = &#39;&#39;; } } //è¿™æ—¶å¦‚æœ$binary_strä¸ä¸ºç©º,è¯´æ˜éœ€è¦å‘åè¡¥0 if ($num) { for ($i = 0; $i &lt; 8 - $num; $i++) { $binary_str .= 0; } $hex = (string)dechex(bindec($binary_str)); $hex = strlen($hex) == 1 ? &#39;0&#39; . $hex : $hex;//è¡¥0 $hex_str .= $hex; } } $hex_str = strtoupper($hex_str);//è½¬ä¸ºå¤§å†™ return $hex_str; } æœ€åé™„ä¸Šè¯»å–.bmpæ ¼å¼å›¾ç‰‡çš„å‡½æ•°: &lt;?php /** * Commented by liu * Create on 2018/11/23 17:51 * Class Image_api */ class Image_api { function __construct (){ } /** * ImageCreateFromBMPå‡½æ•°,è¯»å–bmpæ ¼å¼å›¾ç‰‡ * æ³¨:phpGDæ‰©å±•ä¸­æ²¡æœ‰ImageCreateFromBMPå‡½æ•°,åªæœ‰ImageCreateFromWBMP * @param $filename * @return bool|resource * Commented by liu */ function ImageCreateFromBMP($filename) { //Ouverture du fichier en mode binaire if (!$f1 = fopen($filename, &quot;rb&quot;)) return FALSE; //1 : Chargement des entï¿½tes FICHIER $FILE = unpack(&quot;vfile_type/Vfile_size/Vreserved/Vbitmap_offset&quot;, fread($f1, 14)); if ($FILE[&#39;file_type&#39;] != 19778) return FALSE; //2 : Chargement des entï¿½tes BMP $BMP = unpack(&#39;Vheader_size/Vwidth/Vheight/vplanes/vbits_per_pixel&#39; . &#39;/Vcompression/Vsize_bitmap/Vhoriz_resolution&#39; . &#39;/Vvert_resolution/Vcolors_used/Vcolors_important&#39;, fread($f1, 40)); $BMP[&#39;colors&#39;] = pow(2, $BMP[&#39;bits_per_pixel&#39;]); if ($BMP[&#39;size_bitmap&#39;] == 0) $BMP[&#39;size_bitmap&#39;] = $FILE[&#39;file_size&#39;] - $FILE[&#39;bitmap_offset&#39;]; $BMP[&#39;bytes_per_pixel&#39;] = $BMP[&#39;bits_per_pixel&#39;] / 8; $BMP[&#39;bytes_per_pixel2&#39;] = ceil($BMP[&#39;bytes_per_pixel&#39;]); $BMP[&#39;decal&#39;] = ($BMP[&#39;width&#39;] * $BMP[&#39;bytes_per_pixel&#39;] / 4); $BMP[&#39;decal&#39;] -= floor($BMP[&#39;width&#39;] * $BMP[&#39;bytes_per_pixel&#39;] / 4); $BMP[&#39;decal&#39;] = 4 - (4 * $BMP[&#39;decal&#39;]); if ($BMP[&#39;decal&#39;] == 4) $BMP[&#39;decal&#39;] = 0; //3 : Chargement des couleurs de la palette $PALETTE = array(); if ($BMP[&#39;colors&#39;] &lt; 16777216) { $PALETTE = unpack(&#39;V&#39; . $BMP[&#39;colors&#39;], fread($f1, $BMP[&#39;colors&#39;] * 4)); } //4 : Crï¿½ation de l&#39;image $IMG = fread($f1, $BMP[&#39;size_bitmap&#39;]); $VIDE = chr(0); $res = imagecreatetruecolor($BMP[&#39;width&#39;], $BMP[&#39;height&#39;]); $P = 0; $Y = $BMP[&#39;height&#39;] - 1; while ($Y &gt;= 0) { $X = 0; while ($X &lt; $BMP[&#39;width&#39;]) { if ($BMP[&#39;bits_per_pixel&#39;] == 24) $COLOR = unpack(&quot;V&quot;, substr($IMG, $P, 3) . $VIDE); elseif ($BMP[&#39;bits_per_pixel&#39;] == 16) { $COLOR = unpack(&quot;n&quot;, substr($IMG, $P, 2)); $COLOR[1] = $PALETTE[$COLOR[1] + 1]; } elseif ($BMP[&#39;bits_per_pixel&#39;] == 8) { $COLOR = unpack(&quot;n&quot;, $VIDE . substr($IMG, $P, 1)); $COLOR[1] = $PALETTE[$COLOR[1] + 1]; } elseif ($BMP[&#39;bits_per_pixel&#39;] == 4) { $COLOR = unpack(&quot;n&quot;, $VIDE . substr($IMG, floor($P), 1)); if (($P * 2) % 2 == 0) $COLOR[1] = ($COLOR[1] &gt;&gt; 4); else $COLOR[1] = ($COLOR[1] &amp; 0x0F); $COLOR[1] = $PALETTE[$COLOR[1] + 1]; } elseif ($BMP[&#39;bits_per_pixel&#39;] == 1) { $COLOR = unpack(&quot;n&quot;, $VIDE . substr($IMG, floor($P), 1)); if (($P * 8) % 8 == 0) $COLOR[1] = $COLOR[1] &gt;&gt; 7; elseif (($P * 8) % 8 == 1) $COLOR[1] = ($COLOR[1] &amp; 0x40) &gt;&gt; 6; elseif (($P * 8) % 8 == 2) $COLOR[1] = ($COLOR[1] &amp; 0x20) &gt;&gt; 5; elseif (($P * 8) % 8 == 3) $COLOR[1] = ($COLOR[1] &amp; 0x10) &gt;&gt; 4; elseif (($P * 8) % 8 == 4) $COLOR[1] = ($COLOR[1] &amp; 0x8) &gt;&gt; 3; elseif (($P * 8) % 8 == 5) $COLOR[1] = ($COLOR[1] &amp; 0x4) &gt;&gt; 2; elseif (($P * 8) % 8 == 6) $COLOR[1] = ($COLOR[1] &amp; 0x2) &gt;&gt; 1; elseif (($P * 8) % 8 == 7) $COLOR[1] = ($COLOR[1] &amp; 0x1); $COLOR[1] = $PALETTE[$COLOR[1] + 1]; } else return FALSE; imagesetpixel($res, $X, $Y, $COLOR[1]); $X++; $P += $BMP[&#39;bytes_per_pixel&#39;]; } $Y--; $P += $BMP[&#39;decal&#39;]; } //Fermeture du fichier fclose($f1); return $res; } }","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"å¤§ç†ŠBIGBEAR/PHP","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/PHP/"},{"name":"GD","slug":"å¤§ç†ŠBIGBEAR/PHP/GD","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/PHP/GD/"},{"name":"å›¾åƒå¤„ç†","slug":"å¤§ç†ŠBIGBEAR/å›¾åƒå¤„ç†","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"PHP","permalink":"http://blog.pulsating.cn/tags/PHP/"},{"name":"GD","slug":"GD","permalink":"http://blog.pulsating.cn/tags/GD/"},{"name":"pctoLCD2002","slug":"pctoLCD2002","permalink":"http://blog.pulsating.cn/tags/pctoLCD2002/"},{"name":"bmp","slug":"bmp","permalink":"http://blog.pulsating.cn/tags/bmp/"},{"name":"ä½å›¾","slug":"ä½å›¾","permalink":"http://blog.pulsating.cn/tags/%E4%BD%8D%E5%9B%BE/"}]},{"title":"Sphinx Linux ä¸‹å®‰è£…è¿‡ç¨‹","slug":"Sphinx-Linux-install","date":"2019-11-12T15:17:58.000Z","updated":"2020-01-07T15:19:57.907Z","comments":true,"path":"2019/11/12/Sphinx-Linux-install/","link":"","permalink":"http://blog.pulsating.cn/2019/11/12/Sphinx-Linux-install/","excerpt":"&emsp;&emsp;ä¹‹å‰è®°å½•è¿‡ä¸€ç¯‡Sphinxåœ¨Windowsä¸Šçš„å®‰è£…æ­¥éª¤,è¿™ç¯‡å½“ç„¶å°±æ˜¯Linuxç³»ç»Ÿçš„å®‰è£…æ­¥éª¤å•¦","text":"&emsp;&emsp;ä¹‹å‰è®°å½•è¿‡ä¸€ç¯‡Sphinxåœ¨Windowsä¸Šçš„å®‰è£…æ­¥éª¤,è¿™ç¯‡å½“ç„¶å°±æ˜¯Linuxç³»ç»Ÿçš„å®‰è£…æ­¥éª¤å•¦ 1. ä¸‹è½½sphinxåŒ…ä¸‹è½½çš„æ˜¯å½“å‰æœ€æ–°ç‰ˆ3.1.1,æˆ‘å°†å‹ç¼©åŒ…å­˜åœ¨äº†/usr/local/src/ç›®å½•ä¸‹wget -q http://sphinxsearch.com/files/sphinx-3.1.1-612d99f-linux-amd64.tar.gz ä¸‹è½½æ—¶é—´å¯èƒ½æ¯”è¾ƒé•¿éœ€è¦è€å¿ƒç­‰å¾…ä¸€ä¼š 2. è§£å‹tar zxf sphinx-3.1.1-612d99f-linux-amd64.tar.gzè§£å‹mv sphinx-3.1.1 sphinx é‡å‘½åä¸€ä¸‹,æ–¹ä¾¿æ“ä½œå§cd sphinx è¿›å…¥çœ‹ä¸‹ç›®å½•åˆ—è¡¨,å…¶ä¸­varæ˜¯éœ€è¦åé¢åˆ›å»ºçš„,è¯·ç»§ç»­å¾€ä¸‹çœ‹ 3. ç¼–è¾‘é…ç½®æ–‡ä»¶é…ç½®æ–‡ä»¶åœ¨etcç›®å½•ä¸‹,æœ‰ä¸¤ä¸ªé…ç½®æ–‡ä»¶ç¤ºä¾‹,å…¶ä¸­sphinx.confæ˜¯å®Œæ•´ç‰ˆçš„é…ç½®é¡¹,å¹¶ä¸”æœ‰è‹±æ–‡æ³¨é‡Š,æœ‰å…´è¶£çš„å¯ä»¥äº†è§£ä¸€ä¸‹,æˆ‘ä»¬è¿™é‡Œä½¿ç”¨ä¸‹é¢çš„sphinx.conf.distç®€æ´ç‰ˆå¤åˆ¶ä¸€ä»½sphinx.conf.diståˆ°binç›®å½•ä¸‹,é‡å‘½åä¸ºsphinx.confvi sphinx.conf æ‰“å¼€ç¼–è¾‘é…ç½®æ–‡ä»¶,è¿™é‡Œæˆ‘ç›´æ¥è´´å‡ºæˆ‘è‡ªå·±çš„é…ç½®å†…å®¹,å¯ä»¥æ­£å¸¸è·‘èµ·æ¥çš„,å…³äºå…¶ä»–é…ç½®é¡¹å¯ä»¥çœ‹æˆ‘çš„å¦å¤–ä¸€ç¯‡Sphinx é…ç½®æ–‡ä»¶sphinx.confé…ç½®é¡¹å…¨è§£æ //æ•°æ®æºé…ç½®,ä¹Ÿå°±æ˜¯æ•°æ®æ¥æº source item { type = mysql sql_host = HOST //æ•°æ®åº“ sql_user = USER //ç”¨æˆ·å sql_pass = PASS //æ•°æ®åº“å¯†ç  sql_db = poster æ•°æ®åº“åç§° sql_port = 3306 # optional, default is 3306 sql_query_pre = SET NAMES utf8 sql_query = \\ SELECT id,name,UNIX_TIMESTAMP(ctime) \\ FROM item sql_attr_timestamp = ctime } //ç´¢å¼•é…ç½® index item { source = item //æ•°æ®æº path = /usr/local/src/sphinx/var/data ç´¢å¼•å­˜æ”¾ç›®å½• min_word_len = 1 ngram_len = 1 ngram_chars = U+3000..U+2FA1F } indexer { mem_limit = 128M } //æœç´¢æœåŠ¡ searchd { listen = 9312 listen = 9306:mysql41 log = /usr/local/src/sphinx/var/log/searchd.log query_log = /usr/local/src/sphinx/var/log/query.log read_timeout = 5 max_children = 30 pid_file = /usr/local/src/sphinx/var/log/searchd.pid seamless_rotate = 1 preopen_indexes = 1 unlink_old = 1 binlog_path = /usr/local/src/sphinx/var/data } é…ç½®æ–‡ä»¶ä¸­éœ€è¦é…ç½®å‡ ä¸ªç›®å½•.åˆ†åˆ«æ˜¯log,query_log,pid_file,binlog_path,æˆ‘ä»¬å›åˆ°sphinxä¸‹,æ–°å»ºä¸€ä¸ªç›®å½•var,ç„¶åè¿›å…¥å†æ–°å»ºä¸€ä¸ªdataç›®å½•å’Œä¸€ä¸ªlogç›®å½•mkdir varcd varmkdir datamkdir logå¦‚å›¾: å»ºç«‹ç´¢å¼•é¦–å…ˆè¿›å…¥åˆ°binç›®å½•ä¸‹,æ‰§è¡Œä¸‹é¢çš„æŒ‡ä»¤./indexer -c sphinx.conf item itemä¸ºåˆšæ‰åœ¨é…ç½®æ–‡ä»¶ä¸­å»ºç«‹çš„ç´¢å¼•åç§° è¿™é‡Œæœ‰ä¸ªå¤§å‘,è€½è¯¯äº†å¥½ä¹…æ—¶é—´,æˆ‘ç”¨çš„æ˜¯ubuntuçš„ç³»ç»Ÿ,å½“æˆ‘åœ¨æ‰§è¡Œ./indexer -c sphinx.conf itemæ—¶,å‡ºç°äº†ä¸€ä¸ªé”™è¯¯:sql_connect: failed to load libmysqlclient (or libmariadb),åŠ è½½libmysqlclientå¤±è´¥,ç„¶åæˆ‘åœ¨/usr/lib/x86_64-linux-gnu/ç›®å½•ä¸‹å‘ç°äº†æˆ‘çš„libmysqlclient,å¹¶ä¸æ˜¯æ²¡æœ‰å®‰è£…çš„ç„¶åæˆ‘é€šè¿‡googleè¯•ç€æ‰¾å‡ºé—®é¢˜çš„ç­”æ¡ˆ,ç„¶è€Œåªæœ‰ä¸¤ä¸ªç›¸å…³ç»“æœ,è§£å†³æ–¹å¼æ˜¯å»ºç«‹è½¯é“¾æ¥,å¹¶ä¸”å°†libmysqlclientæ‰€åœ¨çš„ç›®å½•åŠ å…¥åˆ°ç¯å¢ƒå˜é‡,æˆ‘ç…§åšäº†ä¹‹åå‘ç°é—®é¢˜å¹¶æ²¡æœ‰é¡ºåˆ©è§£å†³,æœ€å,æˆ‘è¯•ç€ä¸‹è½½æ‰€æœ‰çš„ä¾èµ–apt-get install libmysqlclient18 libmysqlclient-dev libmysqlcppconn7 libmysqlcppconn-devç­‰å¾…å®Œæˆ,ç„¶åå¿½ç•¥error,æ‰§è¡Œapt-get updateç­‰å¾…ç»“æŸå,å†æ‰§è¡Œå»ºç«‹ç´¢å¼•å‘½ä»¤,è§£å†³äº†è¿™ä¸ªé—®é¢˜ 5. å¼€å¯æœç´¢æœåŠ¡./searchd","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"å¤§ç†ŠBIGBEAR/PHP","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/PHP/"},{"name":"Mysql","slug":"å¤§ç†ŠBIGBEAR/Mysql","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/"},{"name":"Sphinx","slug":"å¤§ç†ŠBIGBEAR/Mysql/Sphinx","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/Sphinx/"},{"name":"Linux","slug":"å¤§ç†ŠBIGBEAR/Linux","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Linux/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"PHP","permalink":"http://blog.pulsating.cn/tags/PHP/"},{"name":"Mysql","slug":"Mysql","permalink":"http://blog.pulsating.cn/tags/Mysql/"},{"name":"Sphinx","slug":"Sphinx","permalink":"http://blog.pulsating.cn/tags/Sphinx/"},{"name":"Sphinxapi","slug":"Sphinxapi","permalink":"http://blog.pulsating.cn/tags/Sphinxapi/"},{"name":"Linux","slug":"Linux","permalink":"http://blog.pulsating.cn/tags/Linux/"}]},{"title":"Sphinx é…ç½®æ–‡ä»¶sphinx.confé…ç½®é¡¹å…¨è§£æ","slug":"Sphinx-sphinx.conf-analysis","date":"2019-11-12T15:12:36.000Z","updated":"2020-01-07T15:19:57.934Z","comments":true,"path":"2019/11/12/Sphinx-sphinx.conf-analysis/","link":"","permalink":"http://blog.pulsating.cn/2019/11/12/Sphinx-sphinx.conf-analysis/","excerpt":"sourceï¼šæ•°æ®æºï¼Œæ•°æ®æ˜¯ä»ä»€ä¹ˆåœ°æ–¹æ¥çš„ã€‚ indexï¼šç´¢å¼•ï¼Œå½“æœ‰æ•°æ®æºä¹‹åï¼Œä»æ•°æ®æºå¤„æ„å»ºç´¢å¼•ã€‚ç´¢å¼•å®é™…ä¸Šå°±æ˜¯ç›¸å½“äºä¸€ä¸ªå­—å…¸æ£€ç´¢ã€‚æœ‰äº†æ•´æœ¬å­—å…¸å†…å®¹ä»¥åï¼Œæ‰ä¼šæœ‰å­—å…¸æ£€ç´¢ã€‚ searchdï¼šæä¾›æœç´¢æŸ¥è¯¢æœåŠ¡ã€‚å®ƒä¸€èˆ¬æ˜¯ä»¥deamonçš„å½¢å¼è¿è¡Œåœ¨åå°çš„ã€‚ indexerï¼šæ„å»ºç´¢å¼•çš„æœåŠ¡ã€‚å½“è¦é‡æ–°æ„å»ºç´¢å¼•çš„æ—¶å€™ï¼Œå°±æ˜¯è°ƒç”¨indexerè¿™ä¸ªå‘½ä»¤ã€‚","text":"sourceï¼šæ•°æ®æºï¼Œæ•°æ®æ˜¯ä»ä»€ä¹ˆåœ°æ–¹æ¥çš„ã€‚ indexï¼šç´¢å¼•ï¼Œå½“æœ‰æ•°æ®æºä¹‹åï¼Œä»æ•°æ®æºå¤„æ„å»ºç´¢å¼•ã€‚ç´¢å¼•å®é™…ä¸Šå°±æ˜¯ç›¸å½“äºä¸€ä¸ªå­—å…¸æ£€ç´¢ã€‚æœ‰äº†æ•´æœ¬å­—å…¸å†…å®¹ä»¥åï¼Œæ‰ä¼šæœ‰å­—å…¸æ£€ç´¢ã€‚ searchdï¼šæä¾›æœç´¢æŸ¥è¯¢æœåŠ¡ã€‚å®ƒä¸€èˆ¬æ˜¯ä»¥deamonçš„å½¢å¼è¿è¡Œåœ¨åå°çš„ã€‚ indexerï¼šæ„å»ºç´¢å¼•çš„æœåŠ¡ã€‚å½“è¦é‡æ–°æ„å»ºç´¢å¼•çš„æ—¶å€™ï¼Œå°±æ˜¯è°ƒç”¨indexerè¿™ä¸ªå‘½ä»¤ã€‚ // æ•°æ®æºsrc1 source src1 { // è¯´æ˜æ•°æ®æºçš„ç±»å‹ã€‚æ•°æ®æºçš„ç±»å‹å¯ä»¥æ˜¯ï¼šmysqlï¼Œpgsqlï¼Œmssqlï¼Œxmlpipeï¼Œodbcï¼Œpython // æœ‰äººä¼šå¥‡æ€ªï¼Œpythonæ˜¯ä¸€ç§è¯­è¨€æ€ä¹ˆå¯ä»¥æˆä¸ºæ•°æ®æºå‘¢ï¼Ÿ // pythonä½œä¸ºä¸€ç§è¯­è¨€ï¼Œå¯ä»¥æ“ä½œä»»æ„å…¶ä»–çš„æ•°æ®æ¥æºæ¥è·å–æ•°æ®ï¼Œæ›´å¤šæ•°æ®è¯·çœ‹ï¼šï¼ˆhttp://www.coreseek.cn/products-install/python/ï¼‰ type = mysql // ä¸‹é¢æ˜¯sqlæ•°æ®åº“ç‰¹æœ‰çš„ç«¯å£ï¼Œç”¨æˆ·åï¼Œå¯†ç ï¼Œæ•°æ®åº“åç­‰ã€‚ sql_host = localhost sql_user = test sql_pass = sql_db = test sql_port = 3306 // å¦‚æœæ˜¯ä½¿ç”¨unix sockè¿æ¥å¯ä»¥ä½¿ç”¨è¿™ä¸ªã€‚ # sql_sock = /tmp/mysql.sock // indexerå’Œmysqlä¹‹é—´çš„äº¤äº’ï¼Œéœ€è¦è€ƒè™‘åˆ°æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚ // æ¯”å¦‚è€ƒè™‘åˆ°æ•ˆç‡ï¼Œä»–ä»¬ä¸¤è€…ä¹‹é—´çš„äº¤äº’éœ€è¦ä½¿ç”¨å‹ç¼©åè®®ï¼›è€ƒè™‘åˆ°å®‰å…¨ï¼Œä»–ä»¬ä¸¤è€…ä¹‹é—´çš„ä¼ è¾“éœ€è¦ä½¿ç”¨ssl // é‚£ä¹ˆè¿™ä¸ªå‚æ•°å°±ä»£è¡¨è¿™ä¸ªæ„æ€ï¼Œ0/32/2048/32768 æ— /ä½¿ç”¨å‹ç¼©åè®®/æ¡æ‰‹ååˆ‡æ¢åˆ°ssl/Mysql 4.1ç‰ˆæœ¬èº«ä»½è®¤è¯ã€‚ # mysql_connect_flags = 32 // å½“mysql_connect_flagsè®¾ç½®ä¸º2048ï¼ˆsslï¼‰çš„æ—¶å€™ï¼Œä¸‹é¢å‡ ä¸ªå°±ä»£è¡¨sslè¿æ¥æ‰€éœ€è¦ä½¿ç”¨çš„å‡ ä¸ªå‚æ•°ã€‚ # mysql_ssl_cert = /etc/ssl/client-cert.pem # mysql_ssl_key = /etc/ssl/client-key.pem # mysql_ssl_ca = /etc/ssl/cacert.pem // mssqlç‰¹æœ‰ï¼Œæ˜¯å¦ä½¿ç”¨windowsç™»é™† # mssql_winauth = 1 // mssqlç‰¹æœ‰ï¼Œæ˜¯ä½¿ç”¨unicodeè¿˜æ˜¯å•å­—èŠ‚æ•°æ®ã€‚ # mssql_unicode = 1 # request Unicode data from server // odbcçš„dsnä¸² # odbc_dsn = DBQ=C:\\data;DefaultDir=C:\\data;Driver={Microsoft Text Driver (*.txt; *.csv)}; // sqlæŸä¸€åˆ—çš„ç¼“å†²å¤§å°ï¼Œä¸€èˆ¬æ˜¯é’ˆå¯¹å­—ç¬¦ä¸²æ¥è¯´çš„ã€‚ // ä¸ºä»€ä¹ˆè¦æœ‰è¿™ä¹ˆä¸€ç§ç¼“å†²å‘¢ï¼Ÿ // æœ‰çš„å­—ç¬¦ä¸²ï¼Œè™½ç„¶é•¿åº¦å¾ˆé•¿ï¼Œä½†æ˜¯å®é™…ä¸Šå¹¶æ²¡æœ‰ä½¿ç”¨é‚£ä¹ˆé•¿çš„å­—ç¬¦ï¼Œæ‰€ä»¥åœ¨Sphinxå¹¶ä¸ä¼šæ”¶å½•æ‰€æœ‰çš„å­—ç¬¦ï¼Œè€Œæ˜¯ç»™æ¯ä¸ªå±æ€§ä¸€ä¸ªç¼“å­˜ä½œä¸ºé•¿åº¦é™åˆ¶ã€‚ // é»˜è®¤æƒ…å†µä¸‹éå­—ç¬¦ç±»å‹çš„å±æ€§æ˜¯1KBï¼Œå­—ç¬¦ç±»å‹çš„å±æ€§æ˜¯1MBã€‚ // è€Œå¦‚æœæƒ³è¦é…ç½®è¿™ä¸ªbufferçš„è¯ï¼Œå°±å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œé…ç½®äº†ã€‚ # sql_column_buffers = content=12M, comments=1M // indexerçš„sqlæ‰§è¡Œå‰éœ€è¦æ‰§è¡Œçš„æ“ä½œã€‚ # sql_query_pre = SET NAMES utf8 # sql_query_pre = SET SESSION query_cache_type=OFF // indexerçš„sqlæ‰§è¡Œè¯­å¥ sql_query = \\ SELECT id, group_id, UNIX_TIMESTAMP(date_added) AS date_added, title, content \\ FROM documents // æœ‰çš„æ—¶å€™æœ‰å¤šä¸ªè¡¨ï¼Œæˆ‘ä»¬æƒ³è¦æŸ¥è¯¢çš„å­—æ®µåœ¨å…¶ä»–è¡¨ä¸­ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦å¯¹sql_queryè¿›è¡Œjoinæ“ä½œã€‚ // è€Œè¿™ä¸ªjoinæ“ä½œå¯èƒ½éå¸¸æ…¢ï¼Œå¯¼è‡´å»ºç«‹ç´¢å¼•çš„æ—¶å€™ç‰¹åˆ«æ…¢ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œå°±å¯ä»¥è€ƒè™‘åœ¨sphinxç«¯è¿›è¡Œjoinæ“ä½œäº†ã€‚ // sql_joined_fieldæ˜¯å¢åŠ ä¸€ä¸ªå­—æ®µï¼Œè¿™ä¸ªå­—æ®µæ˜¯ä»å…¶ä»–è¡¨æŸ¥è¯¢ä¸­æŸ¥è¯¢å‡ºæ¥çš„ã€‚ // è¿™é‡Œå°å·åé¢çš„æŸ¥è¯¢è¯­å¥æ˜¯æœ‰è¦æ±‚çš„ï¼Œå¦‚æœæ˜¯queryï¼Œåˆ™è¿”å›idå’ŒæŸ¥è¯¢å­—æ®µï¼Œå¦‚æœæ˜¯payload-queryï¼Œåˆ™è¿”å›idï¼ŒæŸ¥è¯¢å­—æ®µå’Œæƒé‡ã€‚ // å¹¶ä¸”è¿™é‡Œçš„åä¸€ä¸ªæŸ¥è¯¢éœ€è¦æŒ‰ç…§idè¿›è¡Œå‡åºæ’åˆ—ã€‚ # sql_joined_field = tags from query; SELECT docid, CONCAT(&#39;tag&#39;,tagid) FROM tags ORDER BY docid ASC # sql_joined_field = wtags from payload-query; SELECT docid, tag, tagweight FROM tags ORDER BY docid ASC // å¤–éƒ¨æ–‡ä»¶å­—æ®µï¼Œæ„æ€å°±æ˜¯ä¸€ä¸ªè¡¨ä¸­ï¼Œæœ‰ä¸€ä¸ªå­—æ®µå­˜çš„æ˜¯å¤–éƒ¨æ–‡ä»¶åœ°å€ï¼Œä½†æ˜¯å®é™…çš„å­—æ®µå†…å®¹åœ¨æ–‡ä»¶ä¸­ã€‚æ¯”å¦‚è¿™ä¸ªå­—æ®µå«åšcontent_file_pathã€‚ // å½“indexerå»ºç«‹ç´¢å¼•çš„æ—¶å€™ï¼ŒæŸ¥åˆ°è¿™ä¸ªå­—æ®µï¼Œå°±è¯»å–è¿™ä¸ªæ–‡ä»¶åœ°å€ï¼Œç„¶ååŠ è½½ï¼Œå¹¶è¿›è¡Œåˆ†è¯å’Œç´¢å¼•å»ºç«‹ç­‰æ“ä½œã€‚ # sql_file_field = content_file_path // å½“æ•°æ®æºæ•°æ®å¤ªå¤§çš„æ—¶å€™ï¼Œä¸€ä¸ªsqlè¯­å¥æŸ¥è¯¢ä¸‹æ¥å¾€å¾€å¾ˆæœ‰å¯èƒ½é”è¡¨ç­‰æ“ä½œã€‚ // é‚£ä¹ˆæˆ‘ä¹ˆå°±å¯ä»¥ä½¿ç”¨å¤šæ¬¡æŸ¥è¯¢ï¼Œé‚£ä¹ˆè¿™ä¸ªå¤šæ¬¡æŸ¥è¯¢å°±éœ€è¦æœ‰ä¸ªèŒƒå›´å’Œæ­¥é•¿ï¼Œsql_query_rangeå’Œsql_range_stepå°±æ˜¯åšè¿™ä¸ªä½¿ç”¨çš„ã€‚ // è·å–æœ€å¤§å’Œæœ€å°çš„idï¼Œç„¶åæ ¹æ®æ­¥é•¿æ¥è·å–æ•°æ®ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œå¦‚æœæœ‰4500æ¡æ•°æ®ï¼Œè¿™ä¸ªè¡¨å»ºç«‹ç´¢å¼•çš„æ—¶å€™å°±ä¼šè¿›è¡Œ5æ¬¡sqlæŸ¥è¯¢ã€‚ // è€Œ5æ¬¡sqlæŸ¥è¯¢æ¯æ¬¡çš„é—´éš”æ—¶é—´æ˜¯ä½¿ç”¨sql_ranged_rhrottleæ¥è¿›è¡Œè®¾ç½®çš„ã€‚å•ä½æ˜¯æ¯«ç§’ã€‚ # sql_query_range = SELECT MIN(id),MAX(id) FROM documents # sql_range_step = 1000 # sql_ranged_throttle = 0 // ä¸‹é¢éƒ½æ˜¯äº›ä¸åŒå±æ€§çš„æ•°æ®äº† // å…ˆè¦äº†è§£å±æ€§çš„æ¦‚å¿µï¼šå±æ€§æ˜¯å­˜åœ¨ç´¢å¼•ä¸­çš„ï¼Œå®ƒä¸è¿›è¡Œå…¨æ–‡ç´¢å¼•ï¼Œä½†æ˜¯å¯ä»¥ç”¨äºè¿‡æ»¤å’Œæ’åºã€‚ // uintæ— ç¬¦å·æ•´å‹å±æ€§ sql_attr_uint = group_id // boolå±æ€§ # sql_attr_bool = is_deleted // é•¿æ•´å‹å±æ€§ # sql_attr_bigint = my_bigint_id // æ—¶é—´æˆ³å±æ€§ï¼Œç»å¸¸è¢«ç”¨äºåšæ’åº sql_attr_timestamp = date_added // å­—ç¬¦ä¸²æ’åºå±æ€§ã€‚ä¸€èˆ¬æˆ‘ä»¬æŒ‰ç…§å­—ç¬¦ä¸²æ’åºçš„è¯ï¼Œæˆ‘ä»¬ä¼šå°†è¿™ä¸ªå­—ç¬¦ä¸²å­˜ä¸‹æ¥è¿›å…¥åˆ°ç´¢å¼•ä¸­ï¼Œç„¶ååœ¨æŸ¥è¯¢çš„æ—¶å€™æ¯”è¾ƒç´¢å¼•ä¸­å¾—å­—ç¬¦å¤§å°è¿›è¡Œæ’åºã€‚ // ä½†æ˜¯è¿™ä¸ªæ—¶å€™ç´¢å¼•å°±ä¼šå¾ˆå¤§ï¼Œäºæ˜¯æˆ‘ä»¬å°±æƒ³åˆ°äº†ä¸€ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨å»ºç«‹ç´¢å¼•çš„æ—¶å€™ï¼Œå…ˆå°†å­—ç¬¦ä¸²å€¼ä»æ•°æ®åº“ä¸­å–å‡ºï¼Œæš‚å­˜ï¼Œæ’åºã€‚ // ç„¶åç»™æ’åºåçš„æ•°ç»„åˆ†é…ä¸€ä¸ªåºå·ï¼Œç„¶ååœ¨å»ºç«‹ç´¢å¼•çš„æ—¶å€™ï¼Œå°±å°†è¿™ä¸ªåºå·å­˜å…¥åˆ°ç´¢å¼•ä¸­å»ã€‚è¿™æ ·åœ¨æŸ¥è¯¢çš„æ—¶å€™ä¹Ÿå°±èƒ½å®Œæˆå­—ç¬¦ä¸²æ’åºçš„æ“ä½œã€‚ // è¿™ï¼Œå°±æ˜¯è¿™ä¸ªå­—æ®µçš„æ„ä¹‰ã€‚ # sql_attr_str2ordinal = author_name // æµ®ç‚¹æ•°å±æ€§ï¼Œç»å¸¸åœ¨æŸ¥è¯¢åœ°ç†ç»çº¬åº¦çš„æ—¶å€™ä¼šç”¨åˆ°ã€‚ # sql_attr_float = lat_radians # sql_attr_float = long_radians // å¤šå€¼å±æ€§ï¼ˆMVAï¼‰ // è¯•æƒ³ä¸€ä¸‹ï¼Œæœ‰ä¸€ä¸ªæ–‡ç« ç³»ç»Ÿï¼Œæ¯ç¯‡æ–‡ç« éƒ½æœ‰å¤šä¸ªæ ‡ç­¾ï¼Œè¿™ä¸ªæ–‡ç« å°±å«åšå¤šå€¼å±æ€§ã€‚ // æˆ‘è¦å¯¹æŸä¸ªæ ‡ç­¾è¿›è¡ŒæŸ¥è¯¢è¿‡æ»¤ï¼Œé‚£ä¹ˆåœ¨å»ºç«‹æŸ¥è¯¢çš„æ—¶å€™å°±åº”è¯¥æŠŠè¿™ä¸ªæ ‡ç­¾çš„å€¼æ”¾å…¥åˆ°ç´¢å¼•ä¸­ã€‚ // è¿™ä¸ªå­—æ®µï¼Œsql_attr_multiå°±æ˜¯ç”¨æ¥åšè¿™ä¸ªäº‹æƒ…çš„ã€‚ # sql_attr_multi = uint tag from query; SELECT docid, tagid FROM tags # sql_attr_multi = uint tag from ranged-query; \\ # SELECT docid, tagid FROM tags WHERE id&gt;=$start AND id&lt;=$end; \\ # SELECT MIN(docid), MAX(docid) FROM tags // å­—ç¬¦ä¸²å±æ€§ã€‚ # sql_attr_string = stitle // æ–‡æ¡£è¯æ±‡æ•°è®°å½•å±æ€§ã€‚æ¯”å¦‚ä¸‹é¢å°±æ˜¯åœ¨ç´¢å¼•å»ºç«‹çš„æ—¶å€™å¢åŠ ä¸€ä¸ªè¯æ±‡æ•°çš„å­—æ®µ # sql_attr_str2wordcount = stitle // å­—ç¬¦ä¸²å­—æ®µï¼Œå¯å…¨æ–‡æœç´¢ï¼Œå¯è¿”å›åŸå§‹æ–‡æœ¬ä¿¡æ¯ã€‚ # sql_field_string = author // æ–‡æ¡£è¯æ±‡æ•°è®°å½•å­—æ®µï¼Œå¯å…¨æ–‡æœç´¢ï¼Œå¯è¿”å›åŸå§‹ä¿¡æ¯ # sql_field_str2wordcount = title // å–åæŸ¥è¯¢ï¼Œåœ¨sql_queryæ‰§è¡Œåç«‹å³æ“ä½œã€‚ // å®ƒå’Œsql_query_post_indexçš„åŒºåˆ«å°±æ˜¯æ‰§è¡Œæ—¶é—´ä¸åŒ // sql_query_postæ˜¯åœ¨sql_queryæ‰§è¡Œåæ‰§è¡Œï¼Œè€Œsql_query_post_indexæ˜¯åœ¨ç´¢å¼•å»ºç«‹å®Œæˆåæ‰æ‰§è¡Œã€‚ // æ‰€ä»¥å¦‚æœè¦è®°å½•æœ€åç´¢å¼•æ‰§è¡Œæ—¶é—´ï¼Œé‚£ä¹ˆåº”è¯¥åœ¨sql_query_post_indexä¸­æ‰§è¡Œã€‚ # sql_query_post = // å‚è€ƒsql_query_postçš„è¯´æ˜ã€‚ # sql_query_post_index = REPLACE INTO counters ( id, val ) \\ # VALUES ( &#39;max_indexed_id&#39;, $maxid ) // å‘½ä»¤è¡Œè·å–ä¿¡æ¯æŸ¥è¯¢ã€‚ // ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ // æˆ‘ä»¬è¿›è¡Œç´¢å¼•ä¸€èˆ¬åªä¼šè¿”å›ä¸»é”®idï¼Œè€Œä¸ä¼šè¿”å›è¡¨ä¸­çš„æ‰€æœ‰å­—æ®µã€‚ // ä½†æ˜¯åœ¨è°ƒè¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€èˆ¬éœ€è¦è¿”å›è¡¨ä¸­çš„å­—æ®µï¼Œé‚£è¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦ä½¿ç”¨sql_query_infoã€‚ // åŒæ—¶è¿™ä¸ªå­—æ®µåªåœ¨æ§åˆ¶å°æœ‰æ•ˆï¼Œåœ¨apiä¸­æ˜¯æ— æ•ˆçš„ã€‚ sql_query_info = SELECT * FROM documents WHERE id=$id // æ¯”å¦‚æœ‰ä¸¤ä¸ªç´¢å¼•ï¼Œä¸€ä¸ªç´¢å¼•æ¯”è¾ƒæ—§ï¼Œä¸€ä¸ªç´¢å¼•æ¯”è¾ƒæ–°ï¼Œé‚£ä¹ˆæ—§ç´¢å¼•ä¸­å°±ä¼šæœ‰æ•°æ®æ˜¯æ—§çš„ã€‚ // å½“æˆ‘è¦å¯¹ä¸¤ä¸ªç´¢å¼•è¿›è¡Œæœç´¢çš„æ—¶å€™ï¼Œå“ªäº›æ•°æ®è¦æŒ‰ç…§æ–°çš„ç´¢å¼•æ¥è¿›è¡ŒæŸ¥è¯¢å‘¢ã€‚ // è¿™ä¸ªæ—¶å€™å°±ä½¿ç”¨åˆ°äº†è¿™ä¸ªå­—æ®µäº†ã€‚ // è¿™é‡Œçš„ä¾‹å­ï¼ˆhttp://www.coreseek.cn/docs/coreseek_4.1-sphinx_2.0.1-beta.html#conf-sql-query-killlistï¼‰ç»™çš„éå¸¸æ¸…æ™°äº†ã€‚ # sql_query_killlist = SELECT id FROM documents WHERE edited&gt;=@last_reindex // ä¸‹é¢å‡ ä¸ªå‹ç¼©è§£å‹çš„é…ç½®éƒ½æ˜¯ä¸ºäº†ä¸€ä¸ªç›®çš„ï¼šè®©ç´¢å¼•é‡å»ºçš„æ—¶å€™ä¸è¦å½±å“æ•°æ®åº“çš„æ€§èƒ½è¡¨ç°ã€‚ // SQLæ•°æ®æºè§£å‹å­—æ®µè®¾ç½® # unpack_zlib = zlib_column // MySQLæ•°æ®æºè§£å‹å­—æ®µè®¾ç½® # unpack_mysqlcompress = compressed_column # unpack_mysqlcompress = compressed_column_2 // MySQLæ•°æ®æºè§£å‹ç¼“å†²åŒºè®¾ç½® # unpack_mysqlcompress_maxsize = 16M // xmlpipeçš„æ•°æ®æºå°±æ˜¯ä¸€ä¸ªxmlæ–‡æ¡£ # type = xmlpipe // è¯»å–æ•°æ®æºçš„å‘½ä»¤ # xmlpipe_command = cat /home/yejianfeng/instance/coreseek/var/test.xml // å­—æ®µ # xmlpipe_field = subject # xmlpipe_field = content // å±æ€§ # xmlpipe_attr_timestamp = published # xmlpipe_attr_uint = author_id // UTF-8ä¿®å¤è®¾ç½® // åªé€‚ç”¨xmlpipe2æ•°æ®æºï¼Œæ•°æ®æºä¸­æœ‰å¯èƒ½æœ‰éutf-8çš„å­—ç¬¦ï¼Œè¿™ä¸ªæ—¶å€™è§£æå°±æœ‰å¯èƒ½å‡ºç°é—®é¢˜ // å¦‚æœè®¾ç½®äº†è¿™ä¸ªå­—æ®µï¼Œéutf-8åºåˆ—å°±ä¼šå…¨éƒ¨è¢«æ›¿æ¢ä¸ºç©ºæ ¼ã€‚ # xmlpipe_fixup_utf8 = 1 } // sphinxçš„sourceæ˜¯æœ‰ç»§æ‰¿è¿™ä¹ˆä¸€ç§å±æ€§çš„ï¼Œæ„æ€å°±æ˜¯é™¤äº†çˆ¶sourceä¹‹å¤–ï¼Œè¿™ä¸ªsourceè¿˜æœ‰è¿™ä¸ªç‰¹æ€§ source src1throttled : src1 { sql_ranged_throttle = 100 } // ç´¢å¼•test1 index test1 { // ç´¢å¼•ç±»å‹ï¼ŒåŒ…æ‹¬æœ‰plainï¼Œdistributedå’Œrtã€‚åˆ†åˆ«æ˜¯æ™®é€šç´¢å¼•/åˆ†å¸ƒå¼ç´¢å¼•/å¢é‡ç´¢å¼•ã€‚é»˜è®¤æ˜¯plainã€‚ # type = plain // ç´¢å¼•æ•°æ®æº source = src1 // ç´¢å¼•æ–‡ä»¶å­˜æ”¾è·¯å¾„ path = /home/yejianfeng/instance/coreseek/var/data/test1 // æ–‡æ¡£ä¿¡æ¯çš„å­˜å‚¨æ¨¡å¼ï¼ŒåŒ…æ‹¬æœ‰none,extern,inlineã€‚é»˜è®¤æ˜¯externã€‚ // docinfoæŒ‡çš„å°±æ˜¯æ•°æ®çš„æ‰€æœ‰å±æ€§ï¼ˆfieldï¼‰æ„æˆçš„ä¸€ä¸ªé›†åˆã€‚ // é¦–å…ˆæ–‡æ¡£idæ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­çš„ï¼ˆspaï¼‰ // å½“ä½¿ç”¨inlineçš„æ—¶å€™ï¼Œæ–‡æ¡£çš„å±æ€§å’Œæ–‡ä»¶çš„idéƒ½æ˜¯å­˜æ”¾åœ¨spaä¸­çš„ï¼Œæ‰€ä»¥è¿›è¡ŒæŸ¥è¯¢è¿‡æ»¤çš„æ—¶å€™ï¼Œä¸éœ€è¦è¿›è¡Œé¢å¤–æ“ä½œã€‚ // å½“ä½¿ç”¨externçš„æ—¶å€™ï¼Œæ–‡æ¡£çš„å±æ€§æ˜¯å­˜æ”¾åœ¨å¦å¤–ä¸€ä¸ªæ–‡ä»¶ï¼ˆspdï¼‰ä¸­çš„ï¼Œä½†æ˜¯å½“å¯åŠ¨searchdçš„æ—¶å€™ï¼Œä¼šæŠŠè¿™ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ // externå°±æ„å‘³ç€æ¯æ¬¡åšæŸ¥è¯¢è¿‡æ»¤çš„æ—¶å€™ï¼Œé™¤äº†æŸ¥æ‰¾æ–‡æ¡£idä¹‹å¤–ï¼Œè¿˜éœ€è¦å»å†…å­˜ä¸­æ ¹æ®å±æ€§è¿›è¡Œè¿‡æ»¤ã€‚ // ä½†æ˜¯å³ä½¿è¿™æ ·ï¼Œexternç”±äºæ–‡ä»¶å¤§å°å°ï¼Œæ•ˆç‡ä¹Ÿä¸ä½ã€‚æ‰€ä»¥ä¸æ˜¯æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨extern docinfo = extern // ç¼“å†²å†…å­˜é”å®šã€‚ // searchdä¼šè®²spaå’Œspié¢„è¯»å–åˆ°å†…å­˜ä¸­ã€‚ä½†æ˜¯å¦‚æœè¿™éƒ¨åˆ†å†…å­˜æ•°æ®é•¿æ—¶é—´æ²¡æœ‰è®¿é—®ï¼Œåˆ™å®ƒä¼šè¢«äº¤æ¢åˆ°ç£ç›˜ä¸Šã€‚ // è®¾ç½®äº†mlockå°±ä¸ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œè¿™éƒ¨åˆ†æ•°æ®ä¼šä¸€ç›´å­˜æ”¾åœ¨å†…å­˜ä¸­çš„ã€‚ mlock = 0 // è¯å½¢å¤„ç†å™¨ // è¯å½¢å¤„ç†æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæ¯”å¦‚åœ¨è‹±è¯­ä¸­ï¼Œdogsæ˜¯dogçš„å¤æ•°ï¼Œæ‰€ä»¥dogæ˜¯dogsçš„è¯å¹²ï¼Œè¿™ä¸¤ä¸ªå®é™…ä¸Šæ˜¯åŒä¸€ä¸ªè¯ã€‚ // æ‰€ä»¥è‹±è¯­çš„è¯å½¢å¤„ç†å™¨ä¼šè®²dogså½“åšdogæ¥è¿›è¡Œå¤„ç†ã€‚ morphology = none // è¯å½¢å¤„ç†æœ‰çš„æ—¶å€™ä¼šæœ‰é—®é¢˜ï¼Œæ¯”å¦‚å°†gpså¤„ç†æˆgpï¼Œè¿™ä¸ªè®¾ç½®å¯ä»¥å…è®¸æ ¹æ®è¯çš„é•¿åº¦æ¥å†³å®šæ˜¯å¦è¦ä½¿ç”¨è¯å½¢å¤„ç†å™¨ã€‚ # min_stemming_len = 1 // è¯å½¢å¤„ç†åæ˜¯å¦è¿˜è¦æ£€ç´¢åŸè¯ï¼Ÿ # index_exact_words = 1 // åœæ­¢è¯ï¼Œåœæ­¢è¯æ˜¯ä¸è¢«ç´¢å¼•çš„è¯ã€‚ # stopwords = /home/yejianfeng/instance/coreseek/var/data/stopwords.txt // è‡ªå®šä¹‰è¯å½¢å­—å…¸ # wordforms = /home/yejianfeng/instance/coreseek/var/data/wordforms.txt // è¯æ±‡ç‰¹æ®Šå¤„ç†ã€‚ // æœ‰çš„ä¸€äº›ç‰¹æ®Šè¯æˆ‘ä»¬å¸Œæœ›æŠŠå®ƒå½“æˆå¦å¤–ä¸€ä¸ªè¯æ¥å¤„ç†ã€‚æ¯”å¦‚ï¼Œc++ =&gt; cplusplusæ¥å¤„ç†ã€‚ # exceptions = /home/yejianfeng/instance/coreseek/var/data/exceptions.txt // æœ€å°ç´¢å¼•è¯é•¿åº¦ï¼Œå°äºè¿™ä¸ªé•¿åº¦çš„è¯ä¸ä¼šè¢«ç´¢å¼•ã€‚ min_word_len = 1 // å­—ç¬¦é›†ç¼–ç ç±»å‹ï¼Œå¯ä»¥ä¸ºsbcs,utf-8ã€‚å¯¹äºCoreseekï¼Œè¿˜å¯ä»¥æœ‰zh_cn.utf-8,zh_ch.gbk,zh_ch.big5 charset_type = sbcs // å­—ç¬¦è¡¨å’Œå¤§å°å†™è½¬æ¢è§„åˆ™ã€‚å¯¹äºCoreseekï¼Œè¿™ä¸ªå­—æ®µæ— æ•ˆã€‚ # &#39;sbcs&#39; default value is # charset_table = 0..9, A..Z-&gt;a..z, _, a..z, U+A8-&gt;U+B8, U+B8, U+C0..U+DF-&gt;U+E0..U+FF, U+E0..U+FF # # &#39;utf-8&#39; default value is # charset_table = 0..9, A..Z-&gt;a..z, _, a..z, U+410..U+42F-&gt;U+430..U+44F, U+430..U+44F // å¿½ç•¥å­—ç¬¦è¡¨ã€‚åœ¨å¿½ç•¥å­—ç¬¦è¡¨ä¸­çš„å‰åè¯ä¼šè¢«è¿èµ·æ¥å½“åšä¸€ä¸ªå•ç‹¬å…³é”®è¯å¤„ç†ã€‚ # ignore_chars = U+00AD // æ˜¯å¦å¯ç”¨é€šé…ç¬¦ï¼Œé»˜è®¤ä¸º0ï¼Œä¸å¯ç”¨ # enable_star = 1 // min_prefix_len,min_infix_len,prefix_fields,infix_fieldséƒ½æ˜¯åœ¨enable_starå¼€å¯çš„æ—¶å€™æ‰æœ‰æ•ˆæœã€‚ // æœ€å°å‰ç¼€ç´¢å¼•é•¿åº¦ // ä¸ºä»€ä¹ˆè¦æœ‰è¿™ä¸ªé…ç½®é¡¹å‘¢ï¼Ÿ // é¦–å…ˆè¿™ä¸ªæ˜¯å½“å¯ç”¨é€šé…ç¬¦é…ç½®å¯ç”¨çš„å‰æä¸‹è¯´çš„ï¼Œå‰ç¼€ç´¢å¼•ä½¿å¾—ä¸€ä¸ªå…³é”®è¯äº§ç”Ÿäº†å¤šä¸ªç´¢å¼•é¡¹ï¼Œå¯¼è‡´ç´¢å¼•æ–‡ä»¶ä½“ç§¯å’Œæœç´¢æ—¶é—´å¢åŠ å·¨å¤§ã€‚ // é‚£ä¹ˆæˆ‘ä»¬å°±æœ‰å¿…è¦é™åˆ¶ä¸‹å‰ç¼€ç´¢å¼•çš„å‰ç¼€é•¿åº¦ï¼Œæ¯”å¦‚exampleï¼Œå½“å‰ç¼€ç´¢å¼•é•¿åº¦è®¾ç½®ä¸º5çš„æ—¶å€™ï¼Œå®ƒåªä¼šåˆ†è§£ä¸ºexamplï¼Œexampleäº†ã€‚ # min_prefix_len = 0 // æœ€å°ç´¢å¼•ä¸­ç¼€é•¿åº¦ã€‚ç†è§£åŒä¸Šã€‚ # min_infix_len = 0 // å‰ç¼€ç´¢å¼•å’Œä¸­ç¼€ç´¢å¼•å­—æ®µåˆ—è¡¨ã€‚å¹¶ä¸æ˜¯æ‰€æœ‰çš„å­—æ®µéƒ½éœ€è¦è¿›è¡Œå‰ç¼€å’Œä¸­ç¼€ç´¢å¼•ã€‚ # prefix_fields = filename # infix_fields = url, domain // è¯æ±‡å±•å¼€ // æ˜¯å¦å°½å¯èƒ½å±•å¼€å…³é”®å­—çš„ç²¾ç¡®æ ¼å¼æˆ–è€…å‹å·å½¢å¼ # expand_keywords = 1 // N-Gramç´¢å¼•çš„åˆ†è¯æŠ€æœ¯ // N-Gramæ˜¯æŒ‡ä¸æŒ‰ç…§è¯å…¸ï¼Œè€Œæ˜¯æŒ‰ç…§å­—é•¿æ¥åˆ†è¯ï¼Œè¿™ä¸ªä¸»è¦æ˜¯é’ˆå¯¹éè‹±æ–‡ä½“ç³»çš„ä¸€äº›è¯­è¨€æ¥åšçš„ï¼ˆä¸­æ–‡ã€éŸ©æ–‡ã€æ—¥æ–‡ï¼‰ // å¯¹coreseekæ¥è¯´ï¼Œè¿™ä¸¤ä¸ªé…ç½®é¡¹å¯ä»¥å¿½ç•¥ã€‚ # ngram_len = 1 # ngram_chars = U+3000..U+2FA1F // è¯ç»„è¾¹ç•Œç¬¦åˆ—è¡¨å’Œæ­¥é•¿ // å“ªäº›å­—ç¬¦è¢«çœ‹åšåˆ†éš”ä¸åŒè¯ç»„çš„è¾¹ç•Œã€‚ # phrase_boundary = ., ?, !, U+2026 # horizontal ellipsis # phrase_boundary_step = 100 // æ··åˆå­—ç¬¦åˆ—è¡¨ # blend_chars = +, &amp;, U+23 # blend_mode = trim_tail, skip_pure // htmlæ ‡è®°æ¸…ç†ï¼Œæ˜¯å¦ä»è¾“å‡ºå…¨æ–‡æ•°æ®ä¸­å»é™¤HTMLæ ‡è®°ã€‚ html_strip = 0 // HTMLæ ‡è®°å±æ€§ç´¢å¼•è®¾ç½®ã€‚ # html_index_attrs = img=alt,title; a=title; // éœ€è¦æ¸…ç†çš„htmlå…ƒç´  # html_remove_elements = style, script // searchdæ˜¯é¢„å…ˆæ‰“å¼€å…¨éƒ¨ç´¢å¼•è¿˜æ˜¯æ¯æ¬¡æŸ¥è¯¢å†æ‰“å¼€ç´¢å¼•ã€‚ # preopen = 1 // å­—å…¸æ–‡ä»¶æ˜¯ä¿æŒåœ¨ç£ç›˜ä¸Šè¿˜æ˜¯å°†ä»–é¢„å…ˆç¼“å†²åœ¨å†…å­˜ä¸­ã€‚ # ondisk_dict = 1 // ç”±äºåœ¨ç´¢å¼•å»ºç«‹çš„æ—¶å€™ï¼Œéœ€è¦å»ºç«‹ä¸´æ—¶æ–‡ä»¶å’Œå’Œå‰¯æœ¬ï¼Œè¿˜æœ‰æ—§çš„ç´¢å¼• // è¿™ä¸ªæ—¶å€™ç£ç›˜ä½¿ç”¨é‡ä¼šæš´å¢ï¼Œäºæ˜¯æœ‰ä¸ªæ–¹æ³•æ˜¯ä¸´æ—¶æ–‡ä»¶é‡å¤åˆ©ç”¨ // è¿™ä¸ªé…ç½®ä¼šæå¤§å‡å°‘å»ºç«‹ç´¢å¼•æ—¶å€™çš„ç£ç›˜å‹åŠ›ï¼Œä»£ä»·æ˜¯ç´¢å¼•å»ºç«‹é€Ÿåº¦å˜æ…¢ã€‚ # inplace_enable = 1 # inplace_hit_gap = 0 # preallocated hitlist gap size # inplace_docinfo_gap = 0 # preallocated docinfo gap size # inplace_reloc_factor = 0.1 # relocation buffer size within arena # inplace_write_factor = 0.1 # write buffer size within arena // åœ¨ç»è¿‡è¿‡çŸ­çš„ä½ç½®åå¢åŠ ä½ç½®å€¼ # overshort_step = 1 // åœ¨ç»è¿‡ åœç”¨è¯ å¤„åå¢åŠ ä½ç½®å€¼ # stopword_step = 1 // ä½ç½®å¿½ç•¥è¯æ±‡åˆ—è¡¨ # hitless_words = all # hitless_words = hitless.txt // æ˜¯å¦æ£€æµ‹å¹¶ç´¢å¼•å¥å­å’Œæ®µè½è¾¹ç•Œ # index_sp = 1 // å­—æ®µå†…éœ€è¦ç´¢å¼•çš„HTML/XMLåŒºåŸŸçš„æ ‡ç­¾åˆ—è¡¨ # index_zones = title, h*, th } index test1stemmed : test1 { path = /home/yejianfeng/instance/coreseek/var/data/test1stemmed morphology = stem_en } index dist1 { type = distributed local = test1 local = test1stemmed // åˆ†å¸ƒå¼ç´¢å¼•ï¼ˆdistributed indexï¼‰ä¸­çš„è¿œç¨‹ä»£ç†å’Œç´¢å¼•å£°æ˜ agent = localhost:9313:remote1 agent = localhost:9314:remote2,remote3 # agent = /var/run/searchd.sock:remote4 // åˆ†å¸ƒå¼ç´¢å¼•ï¼ˆ distributed indexï¼‰ä¸­å£°æ˜è¿œç¨‹é»‘æ´ä»£ç† # agent_blackhole = testbox:9312:testindex1,testindex2 // è¿œç¨‹ä»£ç†çš„è¿æ¥è¶…æ—¶æ—¶é—´ agent_connect_timeout = 1000 // è¿œç¨‹æŸ¥è¯¢è¶…æ—¶æ—¶é—´ agent_query_timeout = 3000 } index rt { type = rt path = /home/yejianfeng/instance/coreseek/var/data/rt // RTç´¢å¼•å†…å­˜é™åˆ¶ # rt_mem_limit = 512M // å…¨æ–‡å­—æ®µå®šä¹‰ rt_field = title rt_field = content // æ— ç¬¦å·æ•´æ•°å±æ€§å®šä¹‰ rt_attr_uint = gid // å„ç§å±æ€§å®šä¹‰ # rt_attr_bigint = guid # rt_attr_float = gpa # rt_attr_timestamp = ts_added # rt_attr_string = author } indexer { // å»ºç«‹ç´¢å¼•çš„æ—¶å€™ï¼Œç´¢å¼•å†…å­˜é™åˆ¶ mem_limit = 32M // æ¯ç§’æœ€å¤§I/Oæ“ä½œæ¬¡æ•°ï¼Œç”¨äºé™åˆ¶I/Oæ“ä½œ # max_iops = 40 // æœ€å¤§å…è®¸çš„I/Oæ“ä½œå¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œç”¨äºI/OèŠ‚æµ # max_iosize = 1048576 // å¯¹äºXMLLpipe2æ•°æ®æºå…è®¸çš„æœ€å¤§çš„å­—æ®µå¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ # max_xmlpipe2_field = 4M // å†™ç¼“å†²åŒºçš„å¤§å°ï¼Œå•ä½æ˜¯å­—èŠ‚ # write_buffer = 1M // æ–‡ä»¶å­—æ®µå¯ç”¨çš„æœ€å¤§ç¼“å†²åŒºå¤§å°ï¼Œå­—èŠ‚ä¸ºå•ä½ # max_file_field_buffer = 32M } // æœç´¢æœåŠ¡é…ç½® searchd { # listen = 127.0.0.1 # listen = 192.168.0.1:9312 # listen = 9312 # listen = /var/run/searchd.sock // ç›‘å¬ç«¯å£ listen = 9312 listen = 9306:mysql41 // ç›‘å¬æ—¥å¿— log = /home/yejianfeng/instance/coreseek/var/log/searchd.log // æŸ¥è¯¢æ—¥å¿— query_log = /home/yejianfeng/instance/coreseek/var/log/query.log // å®¢æˆ·ç«¯è¯»è¶…æ—¶æ—¶é—´ read_timeout = 5 // å®¢æˆ·ç«¯æŒä¹…è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå³å®¢æˆ·ç«¯è¯»ä¸€æ¬¡ä»¥åï¼ŒæŒä¹…è¿æ¥ï¼Œç„¶åå†è¯»ä¸€æ¬¡ã€‚ä¸­é—´è¿™ä¸ªæŒä¹…è¿æ¥çš„æ—¶é—´ã€‚ client_timeout = 300 // å¹¶è¡Œæ‰§è¡Œæœç´¢çš„æ•°ç›® max_children = 30 // è¿›ç¨‹idæ–‡ä»¶ pid_file = /home/yejianfeng/instance/coreseek/var/log/searchd.pid // å®ˆæŠ¤è¿›ç¨‹åœ¨å†…å­˜ä¸­ä¸ºæ¯ä¸ªç´¢å¼•æ‰€ä¿æŒå¹¶è¿”å›ç»™å®¢æˆ·ç«¯çš„åŒ¹é…æ•°ç›®çš„æœ€å¤§å€¼ max_matches = 1000 // æ— ç¼è½®è½¬ã€‚é˜²æ­¢ searchd è½®æ¢åœ¨éœ€è¦é¢„å–å¤§é‡æ•°æ®çš„ç´¢å¼•æ—¶åœæ­¢å“åº” // å½“è¿›è¡Œç´¢å¼•è½®æ¢çš„æ—¶å€™ï¼Œå¯èƒ½éœ€è¦æ¶ˆè€—å¤§é‡çš„æ—¶é—´åœ¨è½®æ¢ç´¢å¼•ä¸Šã€‚ // ä½†æ˜¯å¯åŠ¨äº†æ— ç¼è½®è½¬ï¼Œå°±ä»¥æ¶ˆè€—å†…å­˜ä¸ºä»£ä»·å‡å°‘è½®è½¬çš„æ—¶é—´ seamless_rotate = 1 // ç´¢å¼•é¢„å¼€å¯ï¼Œæ˜¯å¦å¼ºåˆ¶é‡æ–°æ‰“å¼€æ‰€æœ‰ç´¢å¼•æ–‡ä»¶ preopen_indexes = 1 // ç´¢å¼•è½®æ¢æˆåŠŸä¹‹åï¼Œæ˜¯å¦åˆ é™¤ä»¥.oldä¸ºæ‰©å±•åçš„ç´¢å¼•æ‹·è´ unlink_old = 1 // å±æ€§åˆ·æ–°å‘¨æœŸ // å°±æ˜¯ä½¿ç”¨UpdateAttributes()æ›´æ–°çš„æ–‡æ¡£å±æ€§æ¯éš”å¤šå°‘æ—¶é—´å†™å›åˆ°ç£ç›˜ä¸­ã€‚ # attr_flush_period = 900 // ç´¢å¼•å­—å…¸å­˜å‚¨æ–¹å¼ # ondisk_dict_default = 1 // ç”¨äºå¤šå€¼å±æ€§MVAæ›´æ–°çš„å­˜å‚¨ç©ºé—´çš„å†…å­˜å…±äº«æ± å¤§å° mva_updates_pool = 1M // ç½‘ç»œé€šè®¯æ—¶å…è®¸çš„æœ€å¤§çš„åŒ…çš„å¤§å° max_packet_size = 8M // å´©æºƒæ—¥å¿—æ–‡ä»¶ # crash_log_path = /home/yejianfeng/instance/coreseek/var/log/crash // æ¯æ¬¡æŸ¥è¯¢å…è®¸è®¾ç½®çš„è¿‡æ»¤å™¨çš„æœ€å¤§ä¸ªæ•° max_filters = 256 // å•ä¸ªè¿‡æ»¤å™¨å…è®¸çš„å€¼çš„æœ€å¤§ä¸ªæ•° max_filter_values = 4096 // TCPç›‘å¬å¾…å¤„ç†é˜Ÿåˆ—é•¿åº¦ # listen_backlog = 5 // æ¯ä¸ªå…³é”®å­—çš„è¯»ç¼“å†²åŒºçš„å¤§å° # read_buffer = 256K // æ— åŒ¹é…æ—¶è¯»æ“ä½œçš„å¤§å° # read_unhinted = 32K // æ¯æ¬¡æ‰¹é‡æŸ¥è¯¢çš„æŸ¥è¯¢æ•°é™åˆ¶ max_batch_queries = 32 // æ¯ä¸ªæŸ¥è¯¢çš„å…¬å…±å­æ ‘æ–‡æ¡£ç¼“å­˜å¤§å° # subtree_docs_cache = 4M // æ¯ä¸ªæŸ¥è¯¢çš„å…¬å…±å­æ ‘å‘½ä¸­ç¼“å­˜å¤§å° # subtree_hits_cache = 8M // å¤šå¤„ç†æ¨¡å¼ï¼ˆMPMï¼‰ã€‚ å¯é€‰é¡¹ï¼›å¯ç”¨å€¼ä¸ºnoneã€forkã€preforkï¼Œä»¥åŠthreadsã€‚ é»˜è®¤åœ¨Unixç±»ç³»ç»Ÿä¸ºformï¼ŒWindowsç³»ç»Ÿä¸ºthreadsã€‚ workers = threads # for RT to work // å¹¶å‘æŸ¥è¯¢çº¿ç¨‹æ•° # dist_threads = 4 // äºŒè¿›åˆ¶æ—¥å¿—è·¯å¾„ # binlog_path = # disable logging # binlog_path = /home/yejianfeng/instance/coreseek/var/data # binlog.001 etc will be created there // äºŒè¿›åˆ¶æ—¥å¿—åˆ·æ–° # binlog_flush = 2 // äºŒè¿›åˆ¶æ—¥å¿—å¤§å°é™åˆ¶ # binlog_max_log_size = 256M // çº¿ç¨‹å †æ ˆ # thread_stack = 128K // å…³é”®å­—å±•å¼€é™åˆ¶ # expansion_limit = 1000 // RTç´¢å¼•åˆ·æ–°å‘¨æœŸ # rt_flush_period = 900 // æŸ¥è¯¢æ—¥å¿—æ ¼å¼ // å¯é€‰é¡¹ï¼Œå¯ç”¨å€¼ä¸ºplainã€sphinxqlï¼Œé»˜è®¤ä¸ºplainã€‚ # query_log_format = sphinxql // MySQLç‰ˆæœ¬è®¾ç½® # mysql_version_string = 5.0.37 // æ’ä»¶ç›®å½• # plugin_dir = /usr/local/sphinx/lib // æœåŠ¡ç«¯é»˜è®¤å­—ç¬¦é›† # collation_server = utf8_general_ci // æœåŠ¡ç«¯libcå­—ç¬¦é›† # collation_libc_locale = ru_RU.UTF-8 // çº¿ç¨‹æœåŠ¡çœ‹å®ˆ # watchdog = 1 // å…¼å®¹æ¨¡å¼ # compat_sphinxql_magics = 1 } è½¬è½½è‡ª: è½©è„‰åˆƒdeåˆ€å…‰å‰‘å½±","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"å¤§ç†ŠBIGBEAR/Mysql","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/"},{"name":"Sphinx","slug":"å¤§ç†ŠBIGBEAR/Mysql/Sphinx","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/Sphinx/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"PHP","permalink":"http://blog.pulsating.cn/tags/PHP/"},{"name":"Mysql","slug":"Mysql","permalink":"http://blog.pulsating.cn/tags/Mysql/"},{"name":"Sphinx","slug":"Sphinx","permalink":"http://blog.pulsating.cn/tags/Sphinx/"}]},{"title":"ä»0åˆ°1,Sphinx Windowsæœ¬åœ°å®‰è£…åŠPHPä½¿ç”¨Sphinxapiç¤ºä¾‹","slug":"Install-Sphinx-in-Windows-and-use-Sphinxapi-in-php","date":"2019-11-12T15:01:44.000Z","updated":"2020-01-07T15:19:57.545Z","comments":true,"path":"2019/11/12/Install-Sphinx-in-Windows-and-use-Sphinxapi-in-php/","link":"","permalink":"http://blog.pulsating.cn/2019/11/12/Install-Sphinx-in-Windows-and-use-Sphinxapi-in-php/","excerpt":"&emsp;&emsp;æœ€è¿‘ä¸€ä¸ªé¡¹ç›®éœ€è¦å®ç°è¿™æ ·ä¸€ä¸ªéœ€æ±‚:mysqlæ•°æ®åº“ä¸€å¼ è¡¨ä¸­å­˜äº†ç™¾ä¸‡å¼ èœå“å›¾ç‰‡,éœ€è¦æ ¹æ®èœå“åç§°æˆ–æè¿°,æ¨¡ç³ŠåŒ¹é…å‡ºç¬¦åˆæ¡ä»¶çš„èœå“å›¾ç‰‡,å¹¶å±•ç¤ºå‡ºæ¥ select * from table_name where column like &#39;%é±¼é¦™è‚‰ä¸%&#39;; &emsp;&emsp;å¦‚æœåƒä¸Šé¢é‚£æ ·,ç›´æ¥ä½¿ç”¨mysql likeæŸ¥è¯¢çš„è¯,ä¼šè¿›è¡Œå…¨è¡¨æ‰«æ,ä¸èµ°ç´¢å¼•,å¤§å¤§çš„å½±å“æŸ¥è¯¢æ•ˆç‡,æ‰€ä»¥å¼€å§‹å­¦ä¹ ä½¿ç”¨Sphinxå…¨æ–‡æœç´¢å¼•æ“,ä¸‹é¢è®°å½•ä¸‹ç¬¬ä¸€æ¬¡é…ç½®ä½¿ç”¨çš„è¿‡ç¨‹,ä»¥åŠè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å’Œç–‘é—®,æœ›æŒ‡æ­£.","text":"&emsp;&emsp;æœ€è¿‘ä¸€ä¸ªé¡¹ç›®éœ€è¦å®ç°è¿™æ ·ä¸€ä¸ªéœ€æ±‚:mysqlæ•°æ®åº“ä¸€å¼ è¡¨ä¸­å­˜äº†ç™¾ä¸‡å¼ èœå“å›¾ç‰‡,éœ€è¦æ ¹æ®èœå“åç§°æˆ–æè¿°,æ¨¡ç³ŠåŒ¹é…å‡ºç¬¦åˆæ¡ä»¶çš„èœå“å›¾ç‰‡,å¹¶å±•ç¤ºå‡ºæ¥ select * from table_name where column like &#39;%é±¼é¦™è‚‰ä¸%&#39;; &emsp;&emsp;å¦‚æœåƒä¸Šé¢é‚£æ ·,ç›´æ¥ä½¿ç”¨mysql likeæŸ¥è¯¢çš„è¯,ä¼šè¿›è¡Œå…¨è¡¨æ‰«æ,ä¸èµ°ç´¢å¼•,å¤§å¤§çš„å½±å“æŸ¥è¯¢æ•ˆç‡,æ‰€ä»¥å¼€å§‹å­¦ä¹ ä½¿ç”¨Sphinxå…¨æ–‡æœç´¢å¼•æ“,ä¸‹é¢è®°å½•ä¸‹ç¬¬ä¸€æ¬¡é…ç½®ä½¿ç”¨çš„è¿‡ç¨‹,ä»¥åŠè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å’Œç–‘é—®,æœ›æŒ‡æ­£. 1. ä¸‹è½½sphinxæºç å‹ç¼©åŒ…ç‚¹å‡»ä¸‹è½½æŒ‰ç…§è‡ªå·±çš„éœ€æ±‚,ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬,æˆ‘è¿™é‡Œä¸‹è½½çš„æ˜¯Windows x64 binaries 3.1.1 ç‰ˆæœ¬ 2. ä¸‹è½½åçš„sphinxæºç ç›®å½• 3.é…ç½®æ–‡ä»¶æ‰“å¼€etcç›®å½•,é‡Œé¢æœ‰ä¸‰ä¸ªæ–‡ä»¶,example,sqlæ˜¯åˆ›å»ºæµ‹è¯•è¡¨çš„è„šæœ¬,æˆ‘ä»¬ç¨åä¼šç”¨åˆ°,sphinx.conf.distæ˜¯å®Œæ•´ç‰ˆé»˜è®¤é…ç½®,è¿™é‡Œæˆ‘é€‰æ‹©äº†sphinx-min.conf.distç®€åŒ–ç‰ˆ,æš‚æ—¶å¯ä»¥æ»¡è¶³éœ€æ±‚,å¤åˆ¶ä¸€ä»½åˆ°binç›®å½•ä¸‹,å¹¶ä¸”é‡å‘½åä¸ºsphinx.conf. 4. sphinx.configæ–‡ä»¶é…ç½®é…ç½®æ–‡ä»¶çš„å‡ ä¸ªç»„æˆéƒ¨åˆ†: source æ•°æ®æº,è¿™é‡Œé…ç½®ä½ è¦è¿›è¡Œå…¨æ–‡æ£€ç´¢çš„æ•°æ®çš„æ¥æº index ç´¢å¼•,ä»ä¸Šé¢çš„æ•°æ®æºå¤„æ„å»ºç´¢å¼•,ç›¸å½“äºå­—å…¸æ£€ç´¢,è¦æœ‰æ•´æœ¬å­—å…¸å†…å®¹åæ‰ä¼šæœ‰ç´¢å¼• indexer æ„å»ºç´¢å¼•,éœ€è¦é‡æ–°æ„å»ºç´¢å¼•æ—¶,å…¶å®å°±æ˜¯è°ƒç”¨indexerè¿™ä¸ªå‘½ä»¤ searchd æä¾›æœç´¢æŸ¥è¯¢çš„æœåŠ¡,åå°è¿è¡Œsource src1 ## src1ä¸ºæ•°æ®æºå‘½åçš„åç§°,å¯ä»¥æ ¹æ®æ•°æ®æºçš„å±æ€§æ›´æ”¹ { type = mysql ## æ•°æ®æº,æœ¬é¡¹ç›®ä½¿ç”¨mysql sql_host = localhost ## æ•°æ®åº“æœåŠ¡å™¨,è¿™é‡Œå› ä¸ºæ˜¯æµ‹è¯•,ä½¿ç”¨çš„æ˜¯æœ¬åœ°æ•°æ®åº“ sql_user = root # æ•°æ®åº“ç”¨æˆ·å sql_pass = root # æ•°æ®åº“å¯†ç  sql_db = hongbao ## æ•°æ®åº“åç§°,æ›¿æ¢æˆä½ è‡ªå·±çš„æ•°æ®åº“åç§° sql_port = 3306 ## æ•°æ®åº“ç«¯å£,é»˜è®¤3306 sql_query_pre = SET NAMES utf8 ## å¦‚æœä½ çš„æ•°æ®åº“ä¸æ˜¯uft8ç¼–ç çš„,æ³¨é‡Šæ‰æœ¬è¡Œ sql_query = \\ ## ä¸»æŸ¥è¯¢,æŸ¥è¯¢å‡ºæ‰€æœ‰åœ¨æ£€ç´¢èŒƒå›´çš„æ•°æ® SELECT id, group_id, UNIX_TIMESTAMP(date_added) AS date_added, title, content \\ FROM documents sql_attr_uint = group_id ## å±æ€§ sql_attr_timestamp = date_added ## å±æ€§,å¯ç”¨æ¥æ’åº } index test1 ## ç´¢å¼•åç§°,è‡ªè¡Œå‘½å{ source = src1 ## åŸºäºè¿™ä¸ªæ•°æ®æºæ„å»ºç´¢å¼• path = D:/sphinx/data/ ## å­˜æ”¾ç´¢å¼•çš„ç›®å½•,è‡ªå·±åˆ›å»º charset_table = 0..9, A..Z-&gt;a..z, _, a..z, U+410..U+42F-&gt;U+430..U+44F, U+430..U+44F ## æŒ‡å®šutf-8çš„ç¼–ç è¡¨ mlock = 0 morphology = none ## è¯å½¢å¤„ç†å™¨,å¦‚æœæ£€ç´¢ä¸­æ–‡ç”¨ä¸åˆ°,dogs&lt;==&gt;dog min_word_len = 1 ## æœ€å°ç´¢å¼•è¯é•¿åº¦,å°äºè¿™ä¸ªé•¿åº¦çš„è¯ä¸ä¼šè¢«ç´¢å¼• ngram_len = 1 ## ç®€å•åˆ†è¯,åªæ”¯æŒ0å’Œ1,å¦‚æœè¦æœç´¢ä¸­æ–‡,è¯·æŒ‡å®šä¸º1 ngram_chars = U+3000..U+2FA1F ## éœ€è¦åˆ†è¯çš„å­—ç¬¦,å¦‚æœè¦æœç´¢ä¸­æ–‡,è¯·æ”¾å¼€è¿™è¡Œ html_strip = 0 ## htmlæ ‡è®°æ¸…ç†,æ˜¯å¦ä»è¾“å‡ºå…¨æ–‡æ•°æ®ä¸­å»é™¤HTMLæ ‡è®°} indexer{ # memory limit, in bytes, kiloytes (16384K) or megabytes (256M) # optional, default is 128M, max is 2047M, recommended is 256M to 1024M mem_limit = 128M ## å»ºç«‹ç´¢å¼•çš„æ—¶å€™,ç´¢å¼•å†…å­˜é™åˆ¶} searchd{ listen = 9312 ## ç›‘å¬ç«¯å£ listen = 9306:mysql41 log = D:/sphinx/log/searchd.log ## ç›‘å¬æ—¥å¿— query_log = D:/sphinx/log/query.log ## æŸ¥è¯¢æ—¥å¿— pid_file = D:/sphinx/log/searchd.pid ## ## è¿›ç¨‹idæ–‡ä»¶ read_timeout = 5 ## å®¢æˆ·ç«¯è¯»è¶…æ—¶æ—¶é—´ client_timeout = 300 ## å®¢æˆ·ç«¯æŒä¹…è¿æ¥è¶…æ—¶æ—¶é—´,å³å®¢æˆ·ç«¯è¯»ä¸€æ¬¡ä»¥å,æŒä¹…è¿æ¥,ç„¶åå†è¯»ä¸€æ¬¡,ä¸­é—´è¿™ä¸ªæŒä¹…è¿æ¥çš„æ—¶é—´ max_children = 30 ## å¹¶è¡Œæ‰§è¡Œæœç´¢çš„æ•°ç›® persistent_connections_limit = 30 preopen_indexes = 1 ## ç´¢å¼•é¢„å¼€å¯ï¼Œæ˜¯å¦å¼ºåˆ¶é‡æ–°æ‰“å¼€æ‰€æœ‰ç´¢å¼•æ–‡ä»¶ unlink_old = 1 ## ç´¢å¼•è½®æ¢æˆåŠŸä¹‹åï¼Œæ˜¯å¦åˆ é™¤ä»¥.oldä¸ºæ‰©å±•åçš„ç´¢å¼•æ‹·è´ max_packet_size = 8M ## ç½‘ç»œé€šè®¯æ—¶å…è®¸çš„æœ€å¤§çš„åŒ…çš„å¤§å° max_filters = 256 ## æ¯æ¬¡æŸ¥è¯¢å…è®¸è®¾ç½®çš„è¿‡æ»¤å™¨çš„æœ€å¤§ä¸ªæ•° max_filter_values = 4096 ## å•ä¸ªè¿‡æ»¤å™¨å…è®¸çš„å€¼çš„æœ€å¤§ä¸ªæ•° max_batch_queries = 32 ## æ¯æ¬¡æ‰¹é‡æŸ¥è¯¢çš„æŸ¥è¯¢æ•°é™åˆ¶ workers = threads # for RT to work å¤šå¤„ç†æ¨¡å¼ï¼ˆMPMï¼‰ã€‚ å¯é€‰é¡¹ï¼›å¯ç”¨å€¼ä¸ºnoneã€forkã€preforkï¼Œä»¥åŠthreadsã€‚ é»˜è®¤åœ¨Unixç±»ç³»ç»Ÿä¸ºformï¼ŒWindowsç³»ç»Ÿä¸ºthreadsã€‚} &lt;br&gt; __æ³¨:é…ç½®æ–‡ä»¶æ›´æ”¹å®Œæˆä¹‹å,å›åˆ°æ ¹ç›®å½•æ–°å»ºé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨åˆ°çš„dataå’Œlogä¸¤ä¸ªç›®å½•__ å¯¼å…¥æºç é‡Œæä¾›çš„ç¤ºä¾‹æ•°æ®,æ‰§è¡Œetcç›®å½•ä¸‹çš„example.sqlè„šæœ¬: ![å¯¼å…¥æµ‹è¯•æ•°æ®](https://upload-images.jianshu.io/upload_images/14618365-f72b58fee6c8b94f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) æˆ–è€…ä½¿ç”¨mysqlå›¾å½¢å¤„ç†ç•Œé¢å·¥å…·: ![å¯¼å…¥æµ‹è¯•æ•°æ®.png](https://upload-images.jianshu.io/upload_images/14618365-5e7913e3b77827cf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) ###### 5. æ ¹æ®sphinx.confåˆ›å»ºç´¢å¼•æ„å»ºç´¢å¼•è¯­æ³•:indexer -c é…ç½®æ–‡ä»¶ ç´¢å¼•åå­— - æ‰“å¼€windows å‘½ä»¤æç¤ºè¡Œå·¥å…·,è¿›å…¥åˆ°sphinx/binç›®å½•ä¸‹ ![æ ¹æ®sphinx.confåˆ›å»ºç´¢å¼•](https://upload-images.jianshu.io/upload_images/14618365-b051e3066904d801.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) - å¯åŠ¨sphinxæ£€ç´¢æœåŠ¡,åå°å¸¸é©» ![å¯åŠ¨](https://upload-images.jianshu.io/upload_images/14618365-4f8b1e2d6cc27b6a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) - æŸ¥çœ‹ç´¢å¼•åˆ›å»ºæƒ…å†µ é‡æ–°æ‰“å¼€ä¸€ä¸ªå‘½ä»¤è¡Œçª—å£, ![ç´¢å¼•å»ºç«‹æƒ…å†µ](https://upload-images.jianshu.io/upload_images/14618365-71ee147c00cedb1b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) ###### 6. Sphinxapi.phpä½¿ç”¨(æˆ–è€…å®‰è£…phpæ‰©å±•) sphinxæä¾›äº†å„ç§è¯­è¨€çš„ä»£ç ,phpä½¿ç”¨sphinx,åªéœ€è¦å¼•å…¥sphinxapi.php,æ‰“å¼€æ ¹ç›®å½•ä¸‹çš„apiç›®å½•,å°†sphinxapi.phpæ–‡ä»¶å¤åˆ¶åˆ°ä½ çš„é¡¹ç›®ç›®å½•ä¸‹,æ–¹ä¾¿è°ƒç”¨&lt;?php/** Demo.php Create on 2018/8/29 10:42 Create by liu Administrator / class Demo extends CI_Controller{ private $sphinx; public function construct() { parent::construct(); require_once APPPATH . â€˜libraries/Sphinxapi.phpâ€™; $this-&gt;sphinx = new SphinxClient(); } public function sphinx() { //è®¾ç½®æ“ä½œå“ªä¸ªsphinxæœåŠ¡å™¨ $this-&gt;sphinx-&gt;setServer(&#39;localhost&#39;,9312); $keyword = &quot;é“¶è¡Œ&quot;;//è¦æœç´¢çš„å…³é”®å­— $index = &#39;bank&#39;;//ç´¢å¼•åç§° //æŸ¥è¯¢å‡ºå…³é”®å­—æ‰€åœ¨çš„ä¸»é”®id $this-&gt;sphinx-&gt;_limit = 2000; $res = $this-&gt;sphinx-&gt;Query($keyword,$index); echo &#39;&lt;pre&gt;&#39;; if (isset($res[&#39;matches&#39;])){ $ids = array_keys($res[&#39;matches&#39;]); $ids = implode(&#39;,&#39;,$ids); }else{ print_r(&quot;å†…å®¹ä¸å­˜åœ¨&quot;); return; } //è·å–åŒ¹é…åˆ°çš„ä¸»é”®id $mysql_con = mysqli_connect(&#39;localhost&#39;,&#39;root&#39;,&#39;&#39;,&#39;hongbao&#39;);//æœ¬åœ°æ•°æ®åº“ mysqli_query($mysql_con,&#39;set name utf8&#39;); mysqli_query($mysql_con,&#39;use hongbao&#39;); $sql = &quot;select * from bank where id in ($ids)&quot;; $res = mysqli_query($mysql_con,$sql); while ($row = mysqli_fetch_assoc($res)){ $data[] = $row; } foreach ($data as $key =&gt; $v){ $v = str_replace($keyword,&quot;&lt;font color=&#39;red&#39;&gt;{$keyword}&lt;/font&gt;&quot;,$v); $data[$key] = $v; } print_r($data); }} ``` ä»£ç è¿è¡Œç»“æœ","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"å¤§ç†ŠBIGBEAR/PHP","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/PHP/"},{"name":"Mysql","slug":"å¤§ç†ŠBIGBEAR/Mysql","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/"},{"name":"Sphinx","slug":"å¤§ç†ŠBIGBEAR/Mysql/Sphinx","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/Sphinx/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"PHP","permalink":"http://blog.pulsating.cn/tags/PHP/"},{"name":"Mysql","slug":"Mysql","permalink":"http://blog.pulsating.cn/tags/Mysql/"},{"name":"Sphinx","slug":"Sphinx","permalink":"http://blog.pulsating.cn/tags/Sphinx/"},{"name":"Sphinxapi","slug":"Sphinxapi","permalink":"http://blog.pulsating.cn/tags/Sphinxapi/"}]},{"title":"Windows+PHP5.6ç¯å¢ƒä¸‹å®‰è£…imagickæ‰©å±•å’Œimagemagick","slug":"Install-imagick-extend-and-imagemagick-in-windows-php5.6","date":"2019-11-12T14:40:35.000Z","updated":"2020-01-07T15:19:57.480Z","comments":true,"path":"2019/11/12/Install-imagick-extend-and-imagemagick-in-windows-php5.6/","link":"","permalink":"http://blog.pulsating.cn/2019/11/12/Install-imagick-extend-and-imagemagick-in-windows-php5.6/","excerpt":"å…¶å®å›è¿‡å¤´çœ‹,å®‰è£…è¿‡ç¨‹ä¸­æœ€å®¹æ˜“å‡ºé”™çš„åè€Œæ˜¯ä¸‹è½½é˜¶æ®µ,ä¸€å®šè¦å°†imagemagickå’Œimagickçš„ç‰ˆæœ¬å’Œphpinfoçš„ä¿¡æ¯å¯¹åº”å¥½!ä¸‹å›¾ä¸­å‡ ç‚¹éœ€è¦æ³¨æ„,æ¯ä¸ªäººçš„ä¿¡æ¯å¯èƒ½ä¸åŒ,æ ¹æ®ä½ è‡ªå·±çš„phpinfoæ¥é€‰æ‹©æ¥ä¸‹æ¥çš„ä¸‹è½½çš„ç¨‹åºåŠæ‰©å±•ç‰ˆæœ¬: PHP Version: PHPç‰ˆæœ¬ compiler: MSVC11 Architecture: x86 Thread Safety: disabled éçº¿ç¨‹å®‰å…¨,ä¹Ÿå°±æ˜¯NTS,ç›¸åçš„åˆ™æ˜¯çº¿ç¨‹å®‰å…¨TS","text":"å…¶å®å›è¿‡å¤´çœ‹,å®‰è£…è¿‡ç¨‹ä¸­æœ€å®¹æ˜“å‡ºé”™çš„åè€Œæ˜¯ä¸‹è½½é˜¶æ®µ,ä¸€å®šè¦å°†imagemagickå’Œimagickçš„ç‰ˆæœ¬å’Œphpinfoçš„ä¿¡æ¯å¯¹åº”å¥½!ä¸‹å›¾ä¸­å‡ ç‚¹éœ€è¦æ³¨æ„,æ¯ä¸ªäººçš„ä¿¡æ¯å¯èƒ½ä¸åŒ,æ ¹æ®ä½ è‡ªå·±çš„phpinfoæ¥é€‰æ‹©æ¥ä¸‹æ¥çš„ä¸‹è½½çš„ç¨‹åºåŠæ‰©å±•ç‰ˆæœ¬: PHP Version: PHPç‰ˆæœ¬ compiler: MSVC11 Architecture: x86 Thread Safety: disabled éçº¿ç¨‹å®‰å…¨,ä¹Ÿå°±æ˜¯NTS,ç›¸åçš„åˆ™æ˜¯çº¿ç¨‹å®‰å…¨TS æ­£æ–‡éƒ¨åˆ† ä¸€. Imagemagickéƒ¨åˆ†1. ä¸‹è½½ ä¸‹è½½Imagemagickç¨‹åºä¸‹è½½åœ°å€:Imagemagickç¨‹åºä¸‹è½½åœ°å€æ‰“å¼€é“¾æ¥,æ‰¾åˆ°Imagemagickçš„ä¸‹è½½åŒºåŸŸ,æ ¹æ®phpinfoæˆ‘åº”è¯¥é€‰æ‹©vc11,32ä½çš„ä¸‹è½½é“¾æ¥,ä¹Ÿå°±æ˜¯ä¸‹å›¾ä¸­åœˆå‡ºçš„éƒ¨åˆ† 2. å®‰è£… è§£å‹ç¼© å°†ä¸‹è½½åçš„å‹ç¼©åŒ…,ç›´æ¥è§£å‹åˆ°ä½ æƒ³æ”¾ç½®çš„ç›®å½•ä¸‹,ä¸è¦æœ‰ä¸­æ–‡å’Œç‰¹æ®Šå­—ç¬¦,æˆ‘æŠŠå®ƒæ”¾åœ¨äº†D:\\install_dir\\imagemagickä¸‹,å¹¶ä¸”è®°ä½ä¸è¦å¿˜è®°è¿™ä¸ªè·¯å¾„ ç¯å¢ƒå˜é‡é…ç½® ä¸ºäº†æ›´æ–¹ä¾¿,å…¨å±€éƒ½å¯ä»¥ä½¿ç”¨,æˆ‘ä»¬éœ€è¦é…ç½®ä¸‹ç¯å¢ƒå˜é‡,è¿›å…¥åˆšæ‰è§£å‹ç¼©çš„ç›®å½•,å†è¿›å…¥/binç›®å½•ä¸‹,å¤åˆ¶å½“å‰è·¯å¾„,æˆ‘çš„è·¯å¾„ä¸ºD:\\install_dir\\imagemagick\\bin,å³å‡»æˆ‘çš„ç”µè„‘(è®¡ç®—æœº),æŒ‰ç…§ä¸‹å›¾ä¾æ¬¡æ‰“å¼€ç¯å¢ƒå˜é‡é…ç½®ä½ç½®,å°†è·¯å¾„ç²˜è´´è¿›å»(æ³¨æ„:Pathä¸­å¯èƒ½æœ‰å¤šä¸ªè·¯å¾„,å¤šä¸ªè·¯å¾„é—´ç”¨;åˆ†å·åˆ†å‰²å°±å¥½) å¯¼å…¥DLLæ–‡ä»¶ è¿›å…¥imagemagickçš„binç›®å½•ä¸‹,å¤åˆ¶æ‰€æœ‰.dllåç¼€çš„æ–‡ä»¶åˆ°ä½ çš„phpæ ¹ç›®å½•ä¸‹(æˆ‘ä½¿ç”¨çš„æ˜¯Phpstudyå»ºçš„ç¯å¢ƒ,æˆ‘çš„phpè·¯å¾„ä¸º:D:\\phpStudy\\php\\php-5.6.27-nts)æˆ‘çš„ç‰ˆæœ¬æœ‰147ä¸ªæ–‡ä»¶,è¿™é‡Œæœ‰ä¸ªå°æŠ€å·§,åœ¨æ–‡ä»¶ç®¡ç†å™¨å³ä¸Šè§’æœç´¢.dll,ç„¶åå…¨é€‰å¤åˆ¶,ä¼šæ–¹ä¾¿ä¸€ç‚¹ äºŒ. Imagickæ‰©å±•éƒ¨åˆ†&emsp;&emsp;é¦–å…ˆimagickä¸€ä¸ªphpæ‰©å±•,å¯ä»¥ä½¿ç”¨phpæ§åˆ¶imagemagickç¨‹åº 1. ä¸‹è½½ ä¸‹è½½imagick ä¸‹è½½åœ°å€ ä»ç„¶æ˜¯æ ¹æ®ä½ çš„phpinfoé€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬,æ ¹æ®æ–‡ç« å¼€å§‹çš„å›¾ç‰‡,æˆ‘åº”è¯¥é€‰æ‹©php_imagick-3.4.3-5.6-ts-vc11-x86.zip 2. å®‰è£… php_imagick.dll æ‰¾åˆ°åˆšä¸‹è½½çš„å‹ç¼©åŒ…,è§£å‹å,æ‰¾åˆ°php_imagick.dllæ–‡ä»¶,å°†å…¶å¤åˆ¶ç²˜è´´åˆ°phpæ ¹ç›®å½•ä¸‹çš„extç›®å½•ä¸‹ å…¶ä»–.DLLæ–‡ä»¶ å°†è§£å‹åçš„imagickç›®å½•ä¸‹çš„å…¶ä»–.dllåç¼€çš„æ–‡ä»¶å…¨éƒ¨å¤åˆ¶ç²˜è´´åˆ°phpæ ¹ç›®å½•ä¸‹ php.ini æ‰¾åˆ°php.iniæ–‡ä»¶å¹¶æ‰“å¼€ç¼–è¾‘,åŠ å…¥extension=php_imagick.dllè¿™ä¸€è¡Œ ä¸‰. é‡å¯åˆ°è¿™é‡ŒåŸºæœ¬ä¸Šå¯ä»¥æˆåŠŸå®‰è£…äº†,imagemagickéœ€è¦é‡å¯ç”µè„‘åæ‰ä¼šç”Ÿæ•ˆ,é‡å¯ç”µè„‘å,æŸ¥çœ‹phpinfo,å¦‚æœæˆåŠŸå®‰è£…äº†,ä¼šçœ‹åˆ°ä¸‹å›¾ä¸­çš„éƒ¨åˆ†","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"å¤§ç†ŠBIGBEAR/PHP","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/PHP/"},{"name":"å›¾åƒå¤„ç†","slug":"å¤§ç†ŠBIGBEAR/å›¾åƒå¤„ç†","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"PHP","slug":"PHP","permalink":"http://blog.pulsating.cn/tags/PHP/"},{"name":"imagick","slug":"imagick","permalink":"http://blog.pulsating.cn/tags/imagick/"},{"name":"Imagemagick","slug":"Imagemagick","permalink":"http://blog.pulsating.cn/tags/Imagemagick/"}]},{"title":"Mysql Review ä¹‹å¼•æ“","slug":"Mysql-Review-engine","date":"2019-11-12T14:31:31.000Z","updated":"2019-12-20T13:00:36.174Z","comments":true,"path":"2019/11/12/Mysql-Review-engine/","link":"","permalink":"http://blog.pulsating.cn/2019/11/12/Mysql-Review-engine/","excerpt":"","text":"1. Mysqlå…·æœ‰å¤šä¸ªå¼•æ“,éƒ½éšè—åœ¨MysqlæœåŠ¡å™¨å†…,å…¨éƒ½å¯ä»¥æ‰§è¡ŒCERATE TABLE å’ŒSELECTç­‰å‘½ä»¤2. ä¸åŒçš„å¼•æ“æœ‰ä¸åŒçš„åŠŸèƒ½å’Œçµæ´»æ€§,ä¸‹é¢åˆ—å‡ºå‡ ä¸ªå¿…é¡»è¦çŸ¥é“çš„å¼•æ“: InnoDB æ˜¯ä¸€ä¸ªå¯é çš„äº‹åŠ¡å¤„ç†å¼•æ“,ä¸æ”¯æŒå…¨æ–‡æœ¬æœç´¢.__ MEMORY åŠŸèƒ½ä¸Šç­‰äºMyISAM,ä½†ç”±äºæ•°æ®å­˜å‚¨åœ¨å†…å­˜(ä¸æ˜¯ç£ç›˜),é€Ÿåº¦å¾ˆå¿«,ç‰¹åˆ«é€‚ç”¨äºä¸´æ—¶è¡¨. MyISAM æ€§èƒ½æé«˜,æ”¯æŒå…¨æ–‡æœ¬æœç´¢.ä½†æ˜¯æ”¯æŒäº‹åŠ¡å¤„ç†. 3. å¼•æ“ç±»å‹å¯ä»¥æ··ç”¨ æ³¨:å¤–é”®ä¸å¯ä»¥è·¨å¼•æ“,å³ä½¿ç”¨ä¸€ä¸ªå¼•æ“çš„è¡¨ä¸èƒ½å¼•ç”¨å…·æœ‰ä¸ç”¨å¼•æ“çš„è¡¨çš„å¤–é”®,è¿™ä¹Ÿæ˜¯æ··ç”¨å¼•æ“çš„ä¸€å¤§ç¼ºé™·","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"å¤§ç†ŠBIGBEAR/Mysql","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/"},{"name":"MysqlåŸºç¡€","slug":"å¤§ç†ŠBIGBEAR/Mysql/MysqlåŸºç¡€","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/Mysql%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"Mysql","permalink":"http://blog.pulsating.cn/tags/Mysql/"},{"name":"MysqlåŸºç¡€","slug":"MysqlåŸºç¡€","permalink":"http://blog.pulsating.cn/tags/Mysql%E5%9F%BA%E7%A1%80/"}]},{"title":"Mysql Review ä¹‹è¡¨è”ç»“å…¥é—¨ç¯‡","slug":"Mysql-Review-JOIN","date":"2019-11-12T14:30:06.000Z","updated":"2019-12-20T13:00:36.175Z","comments":true,"path":"2019/11/12/Mysql-Review-JOIN/","link":"","permalink":"http://blog.pulsating.cn/2019/11/12/Mysql-Review-JOIN/","excerpt":"","text":"1. ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è”ç»“?è”ç»“å¯ä»¥åˆ©ç”¨ä¸€æ¡SELECTè¯­å¥æ£€ç´¢å‡ºå­˜å‚¨åœ¨å¤šä¸ªå…³ç³»è¡¨ä¸Šçš„æ•°æ®,ä¹Ÿå°±æ˜¯è”ç»“å¤šä¸ªè¡¨è¿”å›ä¸€ç»„æ•°æ®.2. ä¸€ä¸ªåˆ›å»ºè”ç»“çš„ç®€å•ä¾‹å­SELECT vend_name,prod_name,prod_price //æ£€ç´¢å‡ºè¿™ä¸‰åˆ—æ•°æ® FROM vendors,products //ä»è¿™ä¸¤ä¸ªè¡¨ä¸­ WHERE vendors.vend_id = product.vend_id //æ¡ä»¶æ˜¯ä¸¤ä¸ªè¡¨ä¸­çš„vend_idç›¸ç­‰ ORDER BY vend_name,prod_name; //é€šè¿‡vend_name,prod_nameæ’åºåˆ›å»ºè”ç»“è¯­å¥æ—¶,ä¸€å®šè¦æ³¨æ„çš„WHEREå­å¥,å¦‚æœæ²¡æœ‰WHEREå­å¥,ç¬¬ä¸€ä¸ªè¡¨ä¸­çš„æ¯ä¸€è¡Œéƒ½iå°†äºç¬¬äºŒä¸ªè¡¨ä¸­çš„è¡Œé…å¯¹,ä»è€Œäº§ç”Ÿå¤§é‡ä¸å¸Œæœ›æ£€ç´¢å‡ºçš„ç»“æœ,ä¹Ÿå°±æ˜¯ç¬›å¡å„¿ç§¯(æ²¡æœ‰è”ç»“æ¡ä»¶çš„è¡¨å…³ç³»è¿”å›çš„ç»“æœ) åº”è¯¥ä¿è¯æ‰€æœ‰è”ç»“éƒ½æœ‰WHEREå­å¥,å¹¶ä¸”ä¿è¯WHEREå­å¥çš„æ­£ç¡®æ€§","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"å¤§ç†ŠBIGBEAR/Mysql","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/"},{"name":"MysqlåŸºç¡€","slug":"å¤§ç†ŠBIGBEAR/Mysql/MysqlåŸºç¡€","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/Mysql%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"Mysql","permalink":"http://blog.pulsating.cn/tags/Mysql/"},{"name":"MysqlåŸºç¡€","slug":"MysqlåŸºç¡€","permalink":"http://blog.pulsating.cn/tags/Mysql%E5%9F%BA%E7%A1%80/"}]},{"title":"Mysql Review ä¹‹å‡½æ•°ç¯‡","slug":"Mysql-Review-function","date":"2019-11-12T14:24:39.000Z","updated":"2019-12-20T13:00:36.172Z","comments":true,"path":"2019/11/12/Mysql-Review-function/","link":"","permalink":"http://blog.pulsating.cn/2019/11/12/Mysql-Review-function/","excerpt":"","text":"æ•°æ®å¤„ç†å‡½æ•° Mqsql å’Œå…¶ä»–å¤§å¤šæ•°è®¡ç®—æœºè¯­è¨€ä¸€æ ·,æ”¯æŒåˆ©ç”¨å‡½æ•°å¤„ç†æ•°æ®,å¤§å¤šæ•°SQLéƒ½æ”¯æŒä»¥ä¸‹ç±»å‹çš„å‡½æ•°. å¤„ç†æ–‡æœ¬ä¸²çš„æ–‡æœ¬å‡½æ•° æ•°å€¼æ•°æ®ä¸Šè¿›è¡Œç®—æœ¯æ“ä½œçš„æ•°å€¼å‡½æ•° å¤„ç†æ—¥æœŸå’Œæ—¶é—´å€¼å¹¶ä»è¿™äº›å€¼ä¸­æå–ç‰¹å®šæˆåˆ†çš„æ—¥æœŸå’Œæ—¶é—´å‡½æ•° è¿”å›DBMSæ­£ä½¿ç”¨çš„ç‰¹æ®Šä¿¡æ¯çš„ç³»ç»Ÿå‡½æ•° 1. æ–‡æœ¬å¤„ç†å‡½æ•°å¸¸ç”¨çš„æ–‡æœ¬å¤„ç†å‡½æ•°ä¸€è§ˆ å‡½æ•° è¯´æ˜ ç¤ºä¾‹ Left() or Right() è¿”å›å­—ç¬¦ä¸²å·¦ or å³è¾¹çš„å­—ç¬¦ Length() è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ Locate() æ‰¾å‡ºå­—ç¬¦ä¸²çš„ä¸€ä¸ªå­ä¸² Lower() or Upper() å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå° or å¤§å†™ LTrim() or RTrim() å»æ‰å­—ç¬¦ä¸²å·¦ or å³è¾¹çš„ç©ºæ ¼ Substring() æˆªå–å­—ç¬¦ä¸²çš„å­å­—ç¬¦ä¸² 2. æ—¥æœŸå¤„ç†å‡½æ•°å¸¸ç”¨çš„æ—¥æœŸå’Œæ—¶é—´å¤„ç†å‡½æ•° å‡½æ•° è¯´æ˜ ç¤ºä¾‹ AddDate() or AddTime() å¢åŠ ä¸€ä¸ªæ—¥æœŸ or æ—¶é—´ CurDate() or CurTime() è¿”å›å½“å‰æ—¥æœŸ or æ—¶é—´ Date() è¿”å›æ—¥æœŸéƒ¨åˆ† DateDiff() è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹å·® Date_Format() è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„æ—¥æœŸæˆ–æ—¶é—´ä¸² DayOfWeek() è¿”å›ä¸€ä¸ªæ—¥æœŸ,å¯¹åº”çš„æ˜¯æ˜ŸæœŸå‡  3. æ•°å€¼å¤„ç†å‡½æ•°å¸¸ç”¨çš„æ•°å€¼å¤„ç†å‡½æ•° å‡½æ•° è¯´æ˜ ç¤ºä¾‹ ABS() è¿”å›ç»å¯¹å€¼ Mod() è¿”å›é™¤æ“ä½œçš„ä½™æ•° Rand() è¿”å›ä¸€ä¸ªéšæœºæ•° Sqrt() è¿”å›ä¸€ä¸ªæ•°çš„å¹³æ–¹æ ¹","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"å¤§ç†ŠBIGBEAR/Mysql","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/"},{"name":"MysqlåŸºç¡€","slug":"å¤§ç†ŠBIGBEAR/Mysql/MysqlåŸºç¡€","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/Mysql%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"Mysql","permalink":"http://blog.pulsating.cn/tags/Mysql/"},{"name":"MysqlåŸºç¡€","slug":"MysqlåŸºç¡€","permalink":"http://blog.pulsating.cn/tags/Mysql%E5%9F%BA%E7%A1%80/"}]},{"title":"Mysql Review ä¹‹å¸¸ç”¨è¯æ±‡ æœ¯è¯­","slug":"Mysql-Review-terminology","date":"2019-11-12T14:23:09.000Z","updated":"2019-12-20T13:00:36.174Z","comments":true,"path":"2019/11/12/Mysql-Review-terminology/","link":"","permalink":"http://blog.pulsating.cn/2019/11/12/Mysql-Review-terminology/","excerpt":"","text":"1. database æ•°æ®åº“ 2. DBMS æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ 3. table è¡¨ (ç»“æ„åŒ–æ–‡ä»¶,å­˜å‚¨æŸç§ç‰¹å®šç±»å‹çš„æ•°æ®) 4. schema æ¨¡å¼(åŒ…æ‹¬æ•°æ®åº“åŠè¡¨é—´å…³ç³») 5. column åˆ—(è¡¨ç”±åˆ—ç»„æˆ,è¡¨ä¸­çš„ä¸€ä¸ªå­—æ®µ,ä»£è¡¨ä¸€åˆ—) 6. datatype æ•°æ®ç±»å‹(int varcharç­‰,æ¯ä¸ªå­—æ®µéƒ½æœ‰ç›¸åº”çš„æ•°æ®ç±»å‹,é™åˆ¶å­˜å…¥çš„æ•°æ®ç§ç±»,ä¾‹å¦‚intç±»å‹ä¸èƒ½å­˜å­—ç¬¦å€¼) 7. row è¡Œ(ä¸€è¡Œä¹Ÿå°±æ˜¯ä¸€æ¡æ•°æ®åº“è®°å½•,ä½†ä»æŠ€æœ¯ä¸Šè¯´,è¡Œæ‰æ˜¯æ­£ç¡®çš„æœ¯è¯­) 8. primary key ä¸»é”® 9. sql Structured Query Language ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€(ä¸æ•°æ®åº“é€šè®¯çš„è¯­è¨€) 10. field å­—æ®µ åŸºæœ¬ä¸Šä¸columnæ„æ€ç›¸åŒ 11. concatenate æ‹¼æ¥ å°†å€¼è¿ç»“åˆ°ä¸€èµ·æ„æˆå•ä¸ªå€¼ 12. join è”ç»“ 13. foreign key å¤–é”® 14. scale å¯ä¼¸ç¼©æ€§ èƒ½å¤Ÿé€‚åº”ä¸æ–­å¢åŠ çš„å·¥ä½œé‡è€Œä¸å¤±è´¥,è®¾è®¡è‰¯å¥½çš„æ•°æ®åº“æˆ–åº”ç”¨ç¨‹åºç§°ä¹‹ä¸ºå¯ä¼¸ç¼©æ€§å¥½(scale well) 15. view è§†å›¾ 16. variable å˜é‡","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"å¤§ç†ŠBIGBEAR/Mysql","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/"},{"name":"MysqlåŸºç¡€","slug":"å¤§ç†ŠBIGBEAR/Mysql/MysqlåŸºç¡€","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/Mysql%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"Mysql","permalink":"http://blog.pulsating.cn/tags/Mysql/"},{"name":"MysqlåŸºç¡€","slug":"MysqlåŸºç¡€","permalink":"http://blog.pulsating.cn/tags/Mysql%E5%9F%BA%E7%A1%80/"}]},{"title":"Mysql Review ä¹‹å¸¸ç”¨sqlè¯­å¥","slug":"Mysql-Review-common-sql","date":"2019-11-12T14:13:03.000Z","updated":"2020-01-07T15:19:57.654Z","comments":true,"path":"2019/11/12/Mysql-Review-common-sql/","link":"","permalink":"http://blog.pulsating.cn/2019/11/12/Mysql-Review-common-sql/","excerpt":"","text":"ä¸€. ç»¼åˆ ä½¿ç”¨.sqlè„šæœ¬ SOURCE + è„šæœ¬è·¯å¾„; æ‰“å¼€æ•°æ®åº“ USE database; æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“åç§° SHOW databases; æ˜¾ç¤ºæ‰€æœ‰è¡¨åç§° SHOW tables; æ˜¾ç¤ºè¡¨ä¸­çš„åˆ—åŠå±æ€§ SHOW column FROM table_name; äºŒ. æ£€ç´¢/æŸ¥è¯¢è¯­å¥æ™®é€šæŸ¥è¯¢ æ£€ç´¢æŸä¸€åˆ— SELECT column_name FROM table_name; æ£€ç´¢æ‰€æœ‰åˆ—,ä½¿ç”¨ * é€šé…ç¬¦ SELECT * FROM table_name;DISTINCT æ£€ç´¢ç»“æœå»é‡ SELECT DISTINCT column_name FROM TABLE_NAMELIMIT é™åˆ¶æ£€ç´¢ç»“æœè¡Œæ•° SELECT column FROM table_name LIMIT 5 ## ç»“æœä¸è¶…è¿‡5è¡Œ SELECT column FROM table_name 5,5 ## è¿”å›ä»è¡Œ5å¼€å§‹çš„5è¡Œ SELECT column FROM table_name 5 OFFSET 4 ## limit m,nçš„æ›¿ä»£è¯­æ³•,è¿”å›5è¡Œ,ä»è¡Œ4å¼€å§‹ ORDER BY æ£€ç´¢ç»“æœæ’åº SELECT * FROM table_name ORDER BY id DESC é™åº/å€’åº SELECT * FROM table_name ORDER BY id ASC ## å‡åº/æ­£åº æŒ‰å¤šä¸ªåˆ—æ’åºSELECT * FROM table_name order by column1,column2;## å…ˆæŒ‰column1 æ’åº,å¦‚æœcolumn1æœ‰2ä¸ªæˆ–å¤šä¸ªå€¼ç›¸åŒ,åˆ™å†æŒ‰ç…§column2æ’åº WHEREå­å¥ SELECT * FROM table_name WHERE price = 2.5;## æ£€ç´¢å‡ºä»·æ ¼ä¸º2.5çš„äº§å“ WHERE å­å¥æ“ä½œç¬¦ æ“ä½œç¬¦ è¯´æ˜ = ç­‰äº &lt;&gt; ä¸ç­‰äº != ä¸ç­‰äº &lt; å°äº &lt;= å°äºç­‰äº &gt; å¤§äº &gt;= å¤§äºç­‰äº BETWEEN m AND n æŒ‡å®šçš„ä¸¤ä¸ªå€¼ä¹‹é—´ ç©ºå€¼æ£€æŸ¥ WHERE column IS NULL; ## ç‰¹æ®Šçš„where å­å¥ é€»è¾‘æ“ä½œç¬¦(operator) and WHERE age = 19 AND score &gt; 80 ; or WHERE user_id = 1 or user_id = 2; in WHERE user_id in (1,2,3,4); not å¦å®šåè·Ÿæ¡ä»¶çš„å…³é”®å­— 11.ä½¿ç”¨é€šé…ç¬¦è¿›è¡Œè¿‡æ»¤é€šé…ç¬¦(wildcard) ç”¨æ¥åŒ¹é…å€¼çš„ä¸€éƒ¨åˆ†çš„ç‰¹æ®Šå­—ç¬¦.æœç´¢æ¨¡å¼(search pattern) ç”±å­—é¢å€¼,é€šé…ç¬¦,æˆ–ä¸¤è€…ç»„åˆæ„æˆçš„æœç´¢æ¡ä»¶. ç™¾åˆ†å·%é€šé…ç¬¦,å¯ä»¥åœ¨æœç´¢æ¨¡å¼çš„ä»»æ„ä½ç½®ä½¿ç”¨ä»»æ„ä¸ªé€šé…ç¬¦,SELECT * FROM table_name WHERE username LIKE &#39;rise%&#39;; ##æ£€ç´¢ä»¥riseå¼€å¤´çš„ç”¨æˆ·å ä¸‹åˆ’çº¿_é€šé…ç¬¦,ç”¨é€”å’Œ%ä¸€æ ·,ä½†æ˜¯åªèƒ½åŒ¹é…å•ä¸ªå­—ç¬¦è€Œä¸æ˜¯å¤šä¸ªSELECT * FROM table_name WHERE price LIKE &#39;_000&#39;; ##æ£€ç´¢å‡ºä»·æ ¼ä¸º1000,2000ç­‰çš„å•†å“ ä¸è¦è¿‡åº¦ä½¿ç”¨é€šé…ç¬¦,å¹¶ä¸”å°½é‡ä¸è¦åœ¨æœç´¢æ¨¡å¼çš„å¼€å§‹å‡ºä½¿ç”¨,æœç´¢é€Ÿåº¦å·¨æ…¢! Mysqlä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼SELECT * FROM table_name WHERE prod_name REGEXP &#39;æ­£åˆ™è¡¨è¾¾å¼&#39;; è®¡ç®—å­—æ®µ Concat()æ‹¼æ¥ä¸¤ä¸ªåˆ— ## å°†ä¸¤ä¸ªåˆ—æ‹¼æ¥èµ·æ¥,å˜æˆä¸€ä¸ªæ–°å­—æ®µvend-title,ç±»ä¼¼ &#39;å€¼name(location) &#39;çš„å½¢å¼,åŒæ—¶å»æ‰ä¸¤ä¸ªå­—æ®µå³ä¾§çš„ç©ºæ ¼. ## RTrim(),LTrim(),Trim() ## AS ç”¨asèµ‹äºˆåˆ«å (åˆå«å¯¼å‡ºåˆ—) SELECT Concat(RTrim(vend_name) , &#39; (&#39;, RTrim(vend_country), &#39;) &#39;) AS vend_title FROM vendors ORDER BY vend_name; æ‰§è¡Œç®—æœ¯è®¡ç®—##é€šè¿‡å•ä»·å’Œæ•°é‡ä¸¤ä¸ªåˆ—è¿ç®—å‡ºå•†å“æ€»ä»·å¹¶å½¢æˆä¸€ä¸ªæ–°å­—æ®µ expanded_price SELECT prod_id, quantity, item_price, quantity * item_price AS expanded_price FROM orderitems WHERE order_num = 20005; æµ‹è¯•è®¡ç®— SELECT 3 * 2; SELECT Trim(&#39;abc&#39;); SELECT Now();","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"å¤§ç†ŠBIGBEAR/Mysql","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/"},{"name":"MysqlåŸºç¡€","slug":"å¤§ç†ŠBIGBEAR/Mysql/MysqlåŸºç¡€","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Mysql/Mysql%E5%9F%BA%E7%A1%80/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Mysql","slug":"Mysql","permalink":"http://blog.pulsating.cn/tags/Mysql/"},{"name":"MysqlåŸºç¡€","slug":"MysqlåŸºç¡€","permalink":"http://blog.pulsating.cn/tags/Mysql%E5%9F%BA%E7%A1%80/"}]},{"title":"JS é€šè¿‡User-Agentåˆ¤æ–­ç”¨æˆ·ä½¿ç”¨çš„è®¾å¤‡ æˆ–å¹³å°","slug":"Determine-the-device-or-platform-used-by-UserAgent","date":"2019-11-12T14:08:21.000Z","updated":"2020-01-07T15:18:28.852Z","comments":true,"path":"2019/11/12/Determine-the-device-or-platform-used-by-UserAgent/","link":"","permalink":"http://blog.pulsating.cn/2019/11/12/Determine-the-device-or-platform-used-by-UserAgent/","excerpt":"","text":"&lt;script&gt; var browser = { versions: function() { var u = navigator.userAgent, app = navigator.appVersion; return { trident: u.indexOf(&#39;Trident&#39;) &gt; -1, //IEå†…æ ¸ presto: u.indexOf(&#39;Presto&#39;) &gt; -1, //operaå†…æ ¸ webKit: u.indexOf(&#39;AppleWebKit&#39;) &gt; -1, //è‹¹æœã€è°·æ­Œå†…æ ¸ gecko: u.indexOf(&#39;Gecko&#39;) &gt; -1 &amp;&amp; u.indexOf(&#39;KHTML&#39;) == -1, //ç«ç‹å†…æ ¸ mobile: !!u.match(/AppleWebKit.*Mobile.*/), //æ˜¯å¦ä¸ºç§»åŠ¨ç»ˆç«¯ ios: !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/), //iosç»ˆç«¯ android: u.indexOf(&#39;Android&#39;) &gt; -1 || u.indexOf(&#39;Adr&#39;) &gt; -1, //androidç»ˆç«¯ iPhone: u.indexOf(&#39;iPhone&#39;) &gt; -1, //æ˜¯å¦ä¸ºiPhoneæˆ–è€…QQHDæµè§ˆå™¨ iPad: u.indexOf(&#39;iPad&#39;) &gt; -1, //æ˜¯å¦iPad webApp: u.indexOf(&#39;Safari&#39;) == -1, //æ˜¯å¦webåº”è¯¥ç¨‹åºï¼Œæ²¡æœ‰å¤´éƒ¨ä¸åº•éƒ¨ weixin: u.indexOf(&#39;MicroMessenger&#39;) &gt; -1, //æ˜¯å¦å¾®ä¿¡ ï¼ˆ2015-01-22æ–°å¢ï¼‰ qq: u.match(/\\sQQ/i) == &quot; qq&quot;, //æ˜¯å¦QQ eleme: u.indexOf(&#39;Needle&#39;) &gt; -1//æ˜¯å¦é¥¿äº†ä¹ˆ }; }(), language: (navigator.browserLanguage || navigator.language).toLowerCase() }; console.log(browser[&#39;versions&#39;][&#39;eleme&#39;]); if (browser[&#39;versions&#39;][&#39;eleme&#39;]){ show(); } &lt;/script&gt;","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"å‰ç«¯","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/"},{"name":"JavaScript","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯/JavaScript","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/JavaScript/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://blog.pulsating.cn/tags/%E5%89%8D%E7%AB%AF/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.pulsating.cn/tags/JavaScript/"}]},{"title":"å›¾ç‰‡æ‡’åŠ è½½ æ»šåŠ¨åŠ è½½ ç‚¹å‡»å›¾ç‰‡é¢„è§ˆå®ç°è¿‡ç¨‹","slug":"Image-lazy-load-and-preview","date":"2019-11-12T14:03:12.000Z","updated":"2020-01-07T15:19:57.338Z","comments":true,"path":"2019/11/12/Image-lazy-load-and-preview/","link":"","permalink":"http://blog.pulsating.cn/2019/11/12/Image-lazy-load-and-preview/","excerpt":"ä½œè€…æ˜¯ä¸ªå‰ç«¯èœé¸Ÿ,åªèƒ½é ç€ä¸œæ‹¼è¥¿å‡‘æ‰èƒ½ç”Ÿå­˜ä¸‹æ¥è¿™æ ·å­ ä¸Šæ¬¡å†™äº†ä¸€ä¸ªå®ç°æœç´¢æ¡†è‡ªåŠ¨è¡¥å…¨çš„å°åŠŸèƒ½çš„æ–‡ç« ,ä»Šå¤©è¿™ä¸ªåœ¨å…¶åŸºç¡€ä¸Š,åŠ å…¥äº†å‡ ä¸ªæ–°åŠŸèƒ½,ä¸¤è€…å¡å¯ä»¥ç»“åˆä½¿ç”¨,ä¹Ÿå¯ä»¥åˆ†å¼€ç‹¬è‡ªä½¿ç”¨,æ²¡æœ‰å½±å“çš„,æƒ³äº†è§£çš„åŒå­¦,å¯ä»¥å…ˆå»äº†è§£ä¸€ä¸‹,[ä¼ é€é—¨],ä¸‹é¢å¼€å§‹å®ç°æ ‡é¢˜çš„åŠŸèƒ½ 1. å‡†å¤‡é˜¶æ®µ WEUI: WEUIæ˜¯ä¸€å¥—åŒå¾®ä¿¡åŸç”Ÿè§†è§‰ä½“éªŒä¸€è‡´çš„åŸºç¡€æ ·å¼åº“,ç”±å¾®ä¿¡å®˜æ–¹è®¾è®¡å›¢é˜Ÿä¸ºå¾®ä¿¡å†…ç½‘é¡µå’Œå°ç¨‹åºé‡èº«å®šåˆ¶,ä»¤ç”¨æˆ·æ„ŸçŸ¥æ›´åŠ ç»Ÿä¸€,ç‚¹å‡»è¿›è¡Œåœ¨çº¿ä½“éªŒ. Jquery WEUI:JQuery WeUI æ˜¯ä¸“ä¸ºå¾®ä¿¡å…¬ä¼—è´¦å·å¼€å‘è€Œè®¾è®¡çš„ä¸€ä¸ªç®€æ´è€Œå¼ºå¤§çš„UIåº“ï¼ŒåŒ…å«å…¨éƒ¨WeUIå®˜æ–¹çš„CSSç»„ä»¶ï¼Œå¹¶ä¸”é¢å¤–æä¾›äº†å¤§é‡çš„æ‹“å±•ç»„ä»¶ï¼Œä¸°å¯Œçš„ç»„ä»¶åº“å¯ä»¥æå¤§å‡å°‘å‰ç«¯å¼€å‘æ—¶é—´,JQuery WeUIå®˜ç½‘. ECHO JS:ECHO JS æ˜¯ä¸€ä¸ªçº¯javascriptè½»é‡çº§å»¶è¿ŸåŠ è½½æ’ä»¶,ç”¨æ¥å®ç°æ‡’åŠ è½½éƒ¨åˆ†","text":"ä½œè€…æ˜¯ä¸ªå‰ç«¯èœé¸Ÿ,åªèƒ½é ç€ä¸œæ‹¼è¥¿å‡‘æ‰èƒ½ç”Ÿå­˜ä¸‹æ¥è¿™æ ·å­ ä¸Šæ¬¡å†™äº†ä¸€ä¸ªå®ç°æœç´¢æ¡†è‡ªåŠ¨è¡¥å…¨çš„å°åŠŸèƒ½çš„æ–‡ç« ,ä»Šå¤©è¿™ä¸ªåœ¨å…¶åŸºç¡€ä¸Š,åŠ å…¥äº†å‡ ä¸ªæ–°åŠŸèƒ½,ä¸¤è€…å¡å¯ä»¥ç»“åˆä½¿ç”¨,ä¹Ÿå¯ä»¥åˆ†å¼€ç‹¬è‡ªä½¿ç”¨,æ²¡æœ‰å½±å“çš„,æƒ³äº†è§£çš„åŒå­¦,å¯ä»¥å…ˆå»äº†è§£ä¸€ä¸‹,[ä¼ é€é—¨],ä¸‹é¢å¼€å§‹å®ç°æ ‡é¢˜çš„åŠŸèƒ½ 1. å‡†å¤‡é˜¶æ®µ WEUI: WEUIæ˜¯ä¸€å¥—åŒå¾®ä¿¡åŸç”Ÿè§†è§‰ä½“éªŒä¸€è‡´çš„åŸºç¡€æ ·å¼åº“,ç”±å¾®ä¿¡å®˜æ–¹è®¾è®¡å›¢é˜Ÿä¸ºå¾®ä¿¡å†…ç½‘é¡µå’Œå°ç¨‹åºé‡èº«å®šåˆ¶,ä»¤ç”¨æˆ·æ„ŸçŸ¥æ›´åŠ ç»Ÿä¸€,ç‚¹å‡»è¿›è¡Œåœ¨çº¿ä½“éªŒ. Jquery WEUI:JQuery WeUI æ˜¯ä¸“ä¸ºå¾®ä¿¡å…¬ä¼—è´¦å·å¼€å‘è€Œè®¾è®¡çš„ä¸€ä¸ªç®€æ´è€Œå¼ºå¤§çš„UIåº“ï¼ŒåŒ…å«å…¨éƒ¨WeUIå®˜æ–¹çš„CSSç»„ä»¶ï¼Œå¹¶ä¸”é¢å¤–æä¾›äº†å¤§é‡çš„æ‹“å±•ç»„ä»¶ï¼Œä¸°å¯Œçš„ç»„ä»¶åº“å¯ä»¥æå¤§å‡å°‘å‰ç«¯å¼€å‘æ—¶é—´,JQuery WeUIå®˜ç½‘. ECHO JS:ECHO JS æ˜¯ä¸€ä¸ªçº¯javascriptè½»é‡çº§å»¶è¿ŸåŠ è½½æ’ä»¶,ç”¨æ¥å®ç°æ‡’åŠ è½½éƒ¨åˆ† 2. å®ç°æ€è·¯ ç›‘å¬é”®ç›˜:ç›‘å¬é”®ç›˜çš„æœç´¢åŠ¨ä½œ(ä¹Ÿå°±æ˜¯Enteré”®), æ¥æ”¶åˆ°åå°çš„æ•°æ®å,å¾ªç¯appendåˆ°imgå®¹å™¨ä¸­,è¿™é‡Œä½¿ç”¨çš„æ˜¯WEUIçš„ä¹å®«æ ¼,å°†ä¸‰åˆ—è°ƒæˆäº†ä¸¤åˆ—,å°†å›¾ç‰‡å±•ç¤ºå‡ºæ¥ ç‚¹å‡»é¢„è§ˆ ç›‘å¬ç”¨æˆ·çš„é¼ æ ‡ç‚¹å‡»åŠ¨ä½œ,å½“ç”¨æˆ·ç‚¹å‡»æŸä¸€å¼ å›¾ç‰‡æ—¶,è°ƒç”¨Photo Browser,å¹¶ä½¿ç”¨pb.open();æ‰“å¼€é¢„è§ˆå›¾ æ‡’åŠ è½½ å°†éœ€è¦æ‡’åŠ è½½çš„imgæ ‡ç­¾æ·»åŠ data-echoå±æ€§,å¹¶ä¸”å°†åŸsrcæ”¹ä¸ºä¸€å¼ é€æ˜çš„loading gifå›¾,echojså°±ä¼šè‡ªåŠ¨å®ç°æ‡’åŠ è½½äº†,ä½¿ç”¨èµ·æ¥éå¸¸ç®€å• æ»šåŠ¨åŠ è½½ æ»šåŠ¨åŠ è½½ä½¿ç”¨çš„æ˜¯JQuery WEUIçš„infinite,å½“æ»‘åŠ¨åˆ°æœ€ä¸‹é¢æ—¶,è§¦å‘åŠ è½½åŠ¨ä½œ,å‘åå°å‘èµ·ajaxè¯·æ±‚,åŒæ—¶è®°å½•å½“å‰é¡µæ•° 3. ä¸å¤šB,ä¸Šä»£ç &lt;!doctype html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt; &lt;title&gt;å›¾ç‰‡æœç´¢&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;/static/jquery-weui-build/dist/lib/weui.min.css&quot;&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;/static/jquery-weui-build/dist/css/jquery-weui.css&quot;&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;/static/jquery-weui-build/demos/css/demos.css&quot;&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;/static/jquery-ui/jquery-ui.css&quot;&gt; &lt;script src=&quot;/static/js/jquery-3.3.1.min.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;/static/jquery-weui-build/dist/js/jquery-weui.js&quot;&gt;&lt;/script&gt; &lt;script type=&#39;text/javascript&#39; src=&#39;/static/jquery-weui-build/dist/js/swiper.js&#39; charset=&#39;utf-8&#39;&gt;&lt;/script&gt; &lt;script src=&quot;/static/jquery-ui/jquery-ui.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;/static/waterfall/js/echo.min.js&quot;&gt;&lt;/script&gt; &lt;script&gt; echo.init({//åˆå§‹åŒ–echo.js offset: 0, throttle: 0 }); &lt;/script&gt; &lt;style&gt; body { background: #efeff4; } img { width: 100%; height: 100%; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&quot;body&quot;&gt; &lt;div class=&quot;ui-widget&quot;&gt; &lt;div class=&quot;weui-search-bar&quot; id=&quot;searchBar&quot;&gt; &lt;form class=&quot;weui-search-bar__form&quot; action=&quot;#&quot;&gt; &lt;div class=&quot;weui-search-bar__box&quot;&gt; &lt;i class=&quot;weui-icon-search&quot;&gt;&lt;/i&gt; &lt;input type=&quot;search&quot; class=&quot;weui-search-bar__input&quot; id=&quot;tags&quot; placeholder=&quot;æœç´¢&quot; required=&quot;&quot;&gt; &lt;a href=&quot;javascript:&quot; class=&quot;weui-icon-clear&quot; id=&quot;searchClear&quot;&gt;&lt;/a&gt; &lt;/div&gt; &lt;label class=&quot;weui-search-bar__label&quot; id=&quot;searchText&quot; style=&quot;transform-origin: 0px 0px 0px; opacity: 1; transform: scale(1, 1);&quot;&gt; &lt;i class=&quot;weui-icon-search&quot;&gt;&lt;/i&gt; &lt;span&gt;æœç´¢&lt;/span&gt; &lt;/label&gt; &lt;/form&gt; &lt;a href=&quot;javascript:&quot; class=&quot;weui-search-bar__cancel-btn&quot; id=&quot;searchCancel&quot;&gt;å–æ¶ˆ&lt;/a&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=&quot;weui-grids&quot; id=&quot;item&quot;&gt;&lt;/div&gt; &lt;div class=&quot;weui-loadmore&quot;&gt; &lt;i class=&quot;weui-loading&quot;&gt;&lt;/i&gt; &lt;span class=&quot;weui-loadmore__tips&quot;&gt;æ­£åœ¨åŠ è½½&lt;/span&gt; &lt;/div&gt; &lt;/div&gt; &lt;script&gt; var availableTags = [];//æ•°æ®æº var keyword = &#39;&#39;;//æœç´¢å…³é”®å­— var page = 1;//å½“å‰é¡µæ•° //å…ˆåˆå§‹åŒ–è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ $(&quot;#tags&quot;).autocomplete({ source: availableTags //æ•°æ®æº }); if (!$(&#39;#item&#39;).html()){ $(&#39;.weui-loadmore&#39;).html(&#39;&lt;div class=&quot;weui-loadmore weui-loadmore_line&quot;&gt; &lt;span class=&quot;weui-loadmore__tips&quot;&gt;æš‚æ— æ•°æ®&lt;/span&gt; &lt;/div&gt;&#39;);//æ ·å¼éœ€è¦è°ƒæ•´ } //å»æ‰å­—ç¬¦ä¸²ä¸­ä»»æ„ä½ç½®çš„ç©ºæ ¼ function Trim(str, is_global) { var result; result = str.replace(/(^\\s+)|(\\s+$)/g, &quot;&quot;); if (is_global.toLowerCase() == &quot;g&quot;) { result = result.replace(/\\s/g, &quot;&quot;); } return result; } //åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦å…¨æ˜¯ä¸­æ–‡ function isChn(str) { var reg = /^[\\u4E00-\\u9FA5]+$/; if (!reg.test(str)) { return false; } else { return true; } } //è¯·æ±‚åç«¯è·å–æ•°æ®æº function get_source(word = null) { var url = &quot;&lt;?php echo base_url(&#39;Picture/source&#39;);?&gt;?keyword=&quot; + word; $.get({ type: &#39;GET&#39;, url: url, async: false,//æ”¹ä¸ºåŒæ­¥ dataType: &#39;json&#39;, success: function (response) { availableTags = response; } }); } //æœç´¢å’Œè‡ªåŠ¨è¡¥å…¨ç»“åˆ $(&#39;#tags&#39;).keyup(function () { keyword = $(&#39;#tags&#39;).val(); if (event.which == &#39;13&#39;) { $(&#39;#item&#39;).empty();//åˆå§‹åŒ–å›¾ç‰‡åˆ—è¡¨ page = 1;//åˆå§‹åŒ–å½“å‰é¡µ call(); return; } if (isChn(Trim(keyword, &#39;g&#39;))) { get_source(keyword); $(&quot;#tags&quot;).autocomplete({ source: availableTags //æ•°æ®æº }); } }); //å‘åå°è¯·æ±‚æ•°æ® function call() { var pay_url = &quot;&lt;?php echo base_url(&#39;Picture/search&#39;);?&gt;&quot;; $.ajax({ type: &#39;GET&#39;, url: pay_url + &#39;?keyword=&#39; + keyword + &#39;&amp;page=&#39; + page, //æœç´¢ dataType: &#39;json&#39;, success: function (data) { if (data[&#39;errno&#39;] == 40001){ no_data_style(); return; } $(&#39;.weui-loadmore&#39;).html(&#39;&lt;i class=&quot;weui-loading&quot;&gt;&lt;/i&gt; &lt;span class=&quot;weui-loadmore__tips&quot;&gt;æ­£åœ¨åŠ è½½&lt;/span&gt;&#39;); $.each(data, function (index, item) { $(&#39;#item&#39;).append(&#39;&lt;a href=&quot;javascript:void(0)&quot; class=&quot;weui-grid&quot; style=&quot;width: 50%;&quot; onclick=big_img(&quot;&#39;+item.img+&#39;&quot;,&quot;&#39;+Trim(item.name, &#39;g&#39;)+&#39;&quot;)&gt; &lt;img src=&quot;/static/img/index_32.png&quot; data-echo=&quot;&#39;+item.img+&#39;&quot; alt=&quot;&#39;+item.name+&#39;&quot;&gt; &lt;p style=&quot;text-align: center;font-size: 12px;color: black;margin-top: 10px&quot;&gt;&#39;+item.name+&#39;&lt;/p&gt;&lt;/a&gt;&#39;); if (data.length &lt;= 8 &amp;&amp; page == 1){ no_data_style(); } }); echo.init({//è·å¾—æ•°æ®ååˆå§‹åŒ–echojs offset: 0, throttle: 0 }); } }) } function no_data_style() { $(&#39;.weui-loadmore&#39;).empty(); $(&#39;.weui-loadmore&#39;).append(&#39;&lt;div class=&quot;weui-loadmore weui-loadmore_line&quot;&gt; &lt;span class=&quot;weui-loadmore__tips&quot;&gt;æš‚æ— æ›´å¤š&lt;/span&gt; &lt;/div&gt;&#39;);//æ ·å¼éœ€è¦è°ƒæ•´ } &lt;/script&gt; &lt;!--ç‚¹å‡»é¢„è§ˆå…¨å›¾--&gt; &lt;script&gt; function big_img(img,name) { var imgs = [{&#39;image&#39;:img,&#39;caption&#39;:name}]; var pb = $.photoBrowser({ items: imgs, }); pb.open(); } &lt;/script&gt; &lt;!--æ»šåŠ¨åŠ è½½--&gt; &lt;script&gt; //æ»šåŠ¨åŠ è½½ var loading = false; $(document.body).infinite().on(&quot;infinite&quot;, function () { if (loading) return; loading = true; setTimeout(function () { page++; call(); loading = false; echo.init({ offset: 0, throttle: 0 }); }, 1000); }); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt;","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"å‰ç«¯","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/"},{"name":"JavaScript","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯/JavaScript","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/JavaScript/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://blog.pulsating.cn/tags/%E5%89%8D%E7%AB%AF/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.pulsating.cn/tags/JavaScript/"},{"name":"WeUI","slug":"WeUI","permalink":"http://blog.pulsating.cn/tags/WeUI/"},{"name":"Jquery WEUI","slug":"Jquery-WEUI","permalink":"http://blog.pulsating.cn/tags/Jquery-WEUI/"},{"name":"ECHO JS","slug":"ECHO-JS","permalink":"http://blog.pulsating.cn/tags/ECHO-JS/"},{"name":"æ‡’åŠ è½½","slug":"æ‡’åŠ è½½","permalink":"http://blog.pulsating.cn/tags/%E6%87%92%E5%8A%A0%E8%BD%BD/"}]},{"title":"æœç´¢æ¡†è‡ªåŠ¨è¡¥å…¨(æ¨¡ç³ŠåŒ¹é…)åŠŸèƒ½å®ç°","slug":"Searchinput-auto-complated","date":"2019-11-12T13:57:06.000Z","updated":"2020-01-07T15:19:57.796Z","comments":true,"path":"2019/11/12/Searchinput-auto-complated/","link":"","permalink":"http://blog.pulsating.cn/2019/11/12/Searchinput-auto-complated/","excerpt":"&emsp;&emsp;æœ¬åœ°å®ç°äº†ä¸€ä¸ªæœç´¢æ¡†è‡ªåŠ¨è¡¥å…¨çš„å°åŠŸèƒ½,åœ¨JQuery UIçš„autocompleteæ’ä»¶çš„åŸºç¡€ä¸Š,åŠ å…¥äº†è‡ªå·±çš„ä¸šåŠ¡ä»£ç ,è´´å‡ºæ¥å›é¡¾ä¸€ä¸‹,åŒæ—¶å¯ä»¥ç»™å¤§å®¶ä¸€ä¸ªå‚è€ƒ","text":"&emsp;&emsp;æœ¬åœ°å®ç°äº†ä¸€ä¸ªæœç´¢æ¡†è‡ªåŠ¨è¡¥å…¨çš„å°åŠŸèƒ½,åœ¨JQuery UIçš„autocompleteæ’ä»¶çš„åŸºç¡€ä¸Š,åŠ å…¥äº†è‡ªå·±çš„ä¸šåŠ¡ä»£ç ,è´´å‡ºæ¥å›é¡¾ä¸€ä¸‹,åŒæ—¶å¯ä»¥ç»™å¤§å®¶ä¸€ä¸ªå‚è€ƒ &emsp;&emsp;é¦–å…ˆè´´å‡ºçš„æ˜¯JQuery Ui çš„è‡ªåŠ¨è¡¥å…¨æ’ä»¶éƒ¨åˆ†çš„ä»£ç ,åé¢çš„åŠŸèƒ½éƒ½æ˜¯åœ¨å…¶åŸºç¡€ä¸Šè¿½åŠ çš„,ç›´æ¥æ‹·è´åˆ°ä½ çš„æœ¬åœ°å°±å¯ä»¥ç›´è§‚çš„çœ‹åˆ°è¿è¡Œæ•ˆæœ,ä¹Ÿå¯ä»¥åˆ°å®˜ç½‘ä¸Šé¢ä½“éªŒå’ŒæŸ¥çœ‹,ä¸ºäº†æ–¹ä¾¿,æˆ‘è¿™é‡Œæ˜¯ç›´æ¥å¼•å…¥çš„JSé“¾æ¥ç‚¹å‡»ä¸‹è½½JQuery UIçš„æºç  &lt;!doctype html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt; &lt;title&gt;jQuery UI Autocomplete - Default functionality&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css&quot;&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;/resources/demos/style.css&quot;&gt; &lt;script src=&quot;https://code.jquery.com/jquery-1.12.4.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://code.jquery.com/ui/1.12.1/jquery-ui.js&quot;&gt;&lt;/script&gt; &lt;script&gt; $( function() { var availableTags = [//è¿™é‡Œè¦æ”¹æˆæ ¹æ®ç”¨æˆ·çš„è¾“å…¥,è‡ªåŠ¨æ›´æ¢è¯åº“çš„å½¢å¼ &quot;ActionScript&quot;, &quot;AppleScript&quot;, &quot;Asp&quot;, &quot;BASIC&quot;, &quot;C&quot;, &quot;C++&quot;, &quot;Clojure&quot;, &quot;COBOL&quot;, &quot;ColdFusion&quot;, &quot;Erlang&quot;, &quot;Fortran&quot;, &quot;Groovy&quot;, &quot;Haskell&quot;, &quot;Java&quot;, &quot;JavaScript&quot;, &quot;Lisp&quot;, &quot;Perl&quot;, &quot;PHP&quot;, &quot;Python&quot;, &quot;Ruby&quot;, &quot;Scala&quot;, &quot;Scheme&quot; ]; $( &quot;#tags&quot; ).autocomplete({//è°ƒç”¨è¡¥å…¨åŠŸèƒ½ source: availableTags }); } ); &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;div class=&quot;ui-widget&quot;&gt; &lt;label for=&quot;tags&quot;&gt;Tags: &lt;/label&gt; &lt;input id=&quot;tags&quot;&gt; &lt;/div&gt; &lt;/body&gt; &lt;/html&gt;è¿è¡Œæˆªå›¾ ä¸‹é¢è¯´ä¸‹æˆ‘è¿½åŠ çš„éƒ¨åˆ†åŠŸèƒ½åŠå®ç°æ€è·¯,æœ‰å¯ä»¥æ”¹è¿›çš„åœ°æ–¹è¿˜è¯·æŒ‡æ•™: é¦–å…ˆ,æ•°æ®æºè¦æ ¹æ®ç”¨æˆ·è¾“å…¥çš„å†…å®¹å®æ—¶æ›´æ–°.è¾“å…¥æ¡†çš„å€¼éšç€ç”¨æˆ·çš„è¾“å…¥ä¼šä¸€ç›´å˜åŠ¨.æ‰€ä»¥,è¾“å…¥æ¡†ä¸‹æ–¹çš„æ¨èè¡¥å…¨çš„å†…å®¹è¦è¾“å…¥çš„å€¼è¿›è¡Œå˜åŠ¨,è¿™é‡Œä½¿ç”¨onkeyupå±æ€§æ¥ç›‘å¬é”®ç›˜åŠ¨ä½œ,å¹¶ä¼ é€’æ­¤æ—¶inputçš„valueå€¼åˆ°jså‡½æ•°ä¸­. //html &lt;input type=&quot;search&quot; class=&quot;&quot; id=&quot;tags&quot; placeholder=&quot;æœç´¢&quot; required=&quot;&quot; onkeyup=&quot;catch_keyword(this.value)&quot;&gt; //jsä»£ç  function catch_keyword(word) {//è¿™é‡Œæ¥å—å¹¶logå‡ºvalue console.log(word); } ç¬¬2æ­¥,è€ƒè™‘åˆ°æ•°æ®åº“ä¸­éœ€è¦æ¨¡ç³Šæ£€ç´¢çš„å­—æ®µéƒ½æ˜¯ä¸­æ–‡çš„èœå“åç§°.æ‰€ä»¥,å½“ç”¨æˆ·è¾“å…¥å­—æ¯çš„æ—¶å€™,è¿›è¡Œäº†ä¸€ä¸‹è¿‡æ»¤,å½“è¾“å…¥çš„å†…å®¹ä¸­å­˜åœ¨å­—æ¯æ—¶,ä¸æäº¤ç»™åå°å¤„ç† //å­—ç¬¦ä¸²åˆ¤æ–­å‡½æ•° //åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ··æœ‰å­—æ¯,å…¨ä¸­æ–‡è¿”å›true function isChn(str) { var reg = /^[\\u4E00-\\u9FA5]+$/; if (!reg.test(str)) { return false; } else { return true; } } å‘ç°å½“å­—ç¬¦ä¸²ä¸­å«æœ‰ç©ºæ ¼çš„æ—¶å€™,ä¸Šé¢çš„å­—ç¬¦ä¸²åˆ¤æ–­å‡½æ•°,è¿”å›çš„å†…å®¹ä¸ç¬¦åˆé¢„æœŸ,ç„¶ååŠ å…¥äº†ä¸€ä¸ªå»é™¤å­—ç¬¦ä¸²ä¸­æ‰€æœ‰ç©ºæ ¼çš„åŠŸèƒ½ //å»æ‰å­—ç¬¦ä¸²ä¸­ä»»æ„ä½ç½®çš„ç©ºæ ¼,è¿”å›å»é™¤ç©ºæ ¼åçš„å­—ç¬¦ä¸² function Trim(str, is_global) { var result; result = str.replace(/(^\\s+)|(\\s+$)/g, &quot;&quot;); if (is_global.toLowerCase() == &quot;g&quot;) { result = result.replace(/\\s/g, &quot;&quot;); } return result; } å¤„ç†ç»“æŸç”¨æˆ·çš„è¾“å…¥å,å°±æ˜¯æäº¤åˆ°åå°,ç„¶åè¿”å›æ•°æ®æºäº†,ä¹Ÿå°±æ˜¯availableTags;è¿™é‡Œæˆ‘æŠŠavailableTagså£°æ˜ä¸ºå…¨å±€å˜é‡.å¹¶ä¸”ç”¨åŒæ­¥çš„Ajaxæ–¹å¼å–å›æ•°æ®,ç„¶åèµ‹å€¼ç»™availableTags,ç„¶ååœ¨ç›‘å¬é”®ç›˜çš„å‡½æ•°ä¸­,ä½¿ç”¨è¿”å›çš„æ•°æ®è°ƒç”¨è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½. //è¯·æ±‚åç«¯è·å–æ•°æ®æº function get_source(word = null) { var url = &quot;&lt;?php echo base_url(&#39;admin/Demo/source&#39;);?&gt;?keyword=&quot; + word; $.get({ type: &#39;GET&#39;, url: url, async: false,//æ”¹ä¸ºåŒæ­¥ dataType: &#39;json&#39;, success: function (response) { console.log(&#39;1&#39;); availableTags = response; } }); } &amp;emsp;è¿™é‡Œæ›´æ–°ä¸‹æœ€å¼€å§‹çš„æ¥æ”¶ç›‘å¬é”®ç›˜åçš„valueå€¼çš„å‡½æ•° //æ•æ‰é”®å…¥çš„å…³é”®å­— function catch_keyword(word = null) { if (isChn(Trim(word, &#39;g&#39;))) {//å»æ‰ç©ºæ ¼åæ£€æŸ¥å­—ç¬¦ä¸²,å¦‚æœç¬¦åˆ,ç»§ç»­è¯·æ±‚åå° get_source(word); $(&quot;#tags&quot;).autocomplete({ source: availableTags //æ•°æ®æº }); } } 5. åˆ°è¿™é‡Œ,è¿™ä¸ªåŠŸèƒ½å·²ç»åŸºæœ¬ç»“æŸäº†,åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°äº†ä¸€ä¸ªå°é—®é¢˜,__æ¯æ¬¡ç¬¬ä¸€æ¬¡è·å–ç”¨æˆ·è¾“å…¥çš„æ—¶å€™,è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½æ²¡æœ‰è§¦å‘,åœ¨ç”¨æˆ·ç»§ç»­è¾“å…¥å,æ‰è§¦å‘æˆåŠŸ__,ç»è¿‡è°ƒè¯•,æˆ‘åœ¨é¡µé¢åŠ è½½å®Œæˆå,åˆå§‹åŒ–ä¸€ä¸‹è‡ªåŠ¨è¡¥å…¨æ’ä»¶,è§£å†³äº†è¿™ä¸ªé—®é¢˜ __é™„: å®Œæ•´ä»£ç __ ä¸çŸ¥é“å¦‚ä½•åœ¨markdownä¸­æ·»åŠ ä¸‹è½½é“¾æ¥,åªå¥½æŠŠå®Œæ•´ä»£ç æ”¾ä¸Šæ¥å•¦! &lt;script src=&quot;https://code.jquery.com/jquery-1.12.4.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;/static/jquery-weui-build/dist/lib/fastclick.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://code.jquery.com/ui/1.12.1/jquery-ui.js&quot;&gt;&lt;/script&gt; &lt;script&gt; $(function () { FastClick.attach(document.body); }); &lt;/script&gt; &lt;script src=&quot;/jquery-weui-build/dist/js/jquery-weui.js&quot;&gt;&lt;/script&gt; &lt;div class=&quot;weui-search-bar&quot; id=&quot;searchBar&quot;&gt; &lt;form class=&quot;weui-search-bar__form&quot; action=&quot;#&quot;&gt; &lt;div class=&quot;weui-search-bar__box&quot;&gt; &lt;i class=&quot;weui-icon-search&quot;&gt;&lt;/i&gt; &lt;input type=&quot;search&quot; class=&quot;weui-search-bar__input&quot; id=&quot;tags&quot; placeholder=&quot;æœç´¢&quot; required=&quot;&quot; onkeyup=&quot;catch_keyword(this.value)&quot;&gt; &lt;a href=&quot;javascript:&quot; class=&quot;weui-icon-clear&quot; id=&quot;searchClear&quot;&gt;&lt;/a&gt; &lt;/div&gt; &lt;label class=&quot;weui-search-bar__label&quot; id=&quot;searchText&quot; style=&quot;transform-origin: 0px 0px 0px; opacity: 1; transform: scale(1, 1);&quot;&gt; &lt;i class=&quot;weui-icon-search&quot;&gt;&lt;/i&gt; &lt;span&gt;æœç´¢&lt;/span&gt; &lt;/label&gt; &lt;/form&gt; &lt;a href=&quot;javascript:&quot; class=&quot;weui-search-bar__cancel-btn&quot; id=&quot;searchCancel&quot;&gt;å–æ¶ˆ&lt;/a&gt; &lt;/div&gt; var availableTags = [];//æ•°æ®æº //å…ˆåˆå§‹åŒ–è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ $(\"#tags\").autocomplete({ source: availableTags //æ•°æ®æº }); //å»æ‰å­—ç¬¦ä¸²ä¸­ä»»æ„ä½ç½®çš„ç©ºæ ¼ function Trim(str, is_global) { var result; result = str.replace(/(^\\s+)|(\\s+$)/g, \"\"); if (is_global.toLowerCase() == \"g\") { result = result.replace(/\\s/g, \"\"); } return result; } //åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦å…¨æ˜¯ä¸­æ–‡ function isChn(str) { var reg = /^[\\u4E00-\\u9FA5]+$/; if (!reg.test(str)) { return false; } else { return true; } } //æ•æ‰é”®å…¥çš„å…³é”®å­— function catch_keyword(word = null) { if (isChn(Trim(word, 'g'))) { get_source(word); $(\"#tags\").autocomplete({ source: availableTags //æ•°æ®æº }); } } //è¯·æ±‚åç«¯è·å–æ•°æ®æº function get_source(word = null) { var url = \"?keyword=\" + word; $.get({ type: 'GET', url: url, async: false,//æ”¹ä¸ºåŒæ­¥ dataType: 'json', success: function (response) { console.log('1'); availableTags = response; } }); } ```","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"å‰ç«¯","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/"},{"name":"JavaScript","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯/JavaScript","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/JavaScript/"},{"name":"JQuery UI","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯/JavaScript/JQuery-UI","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/JavaScript/JQuery-UI/"},{"name":"autocomplete","slug":"å¤§ç†ŠBIGBEAR/å‰ç«¯/JavaScript/JQuery-UI/autocomplete","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E5%89%8D%E7%AB%AF/JavaScript/JQuery-UI/autocomplete/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://blog.pulsating.cn/tags/%E5%89%8D%E7%AB%AF/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://blog.pulsating.cn/tags/JavaScript/"},{"name":"JQuery","slug":"JQuery","permalink":"http://blog.pulsating.cn/tags/JQuery/"}]},{"title":"æŸ¥çœ‹Andriodæ‰‹æœºå®æ—¶åˆ·æ–°ç‡","slug":"Check-android-mobile-refresh-rate-in-real-time","date":"2019-11-12T13:53:56.000Z","updated":"2020-01-07T15:18:03.878Z","comments":true,"path":"2019/11/12/Check-android-mobile-refresh-rate-in-real-time/","link":"","permalink":"http://blog.pulsating.cn/2019/11/12/Check-android-mobile-refresh-rate-in-real-time/","excerpt":"1. ä¸‹è½½ADB2. adb shell &quot;dumpsys window|grep mCurrentFocus è·å–appåŒ…å3. æ“ä½œéœ€æµ‹è¯•çš„app4. adb shell dumpsys gfxinfo â€˜appçš„åŒ…åâ€™ &gt;FPS.txt è¾“å‡ºæ—¥å¿—5. æ‰“å¼€æŸ¥çœ‹Profile data in msä¸‹çš„å†…å®¹:FPS = 1000/Draw + Prepare + Process + Execute","text":"1. ä¸‹è½½ADB2. adb shell &quot;dumpsys window|grep mCurrentFocus è·å–appåŒ…å3. æ“ä½œéœ€æµ‹è¯•çš„app4. adb shell dumpsys gfxinfo â€˜appçš„åŒ…åâ€™ &gt;FPS.txt è¾“å‡ºæ—¥å¿—5. æ‰“å¼€æŸ¥çœ‹Profile data in msä¸‹çš„å†…å®¹:FPS = 1000/Draw + Prepare + Process + Execute","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"æ‚","slug":"å¤§ç†ŠBIGBEAR/æ‚","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/%E6%9D%82/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"adb","slug":"adb","permalink":"http://blog.pulsating.cn/tags/adb/"},{"name":"Andriod","slug":"Andriod","permalink":"http://blog.pulsating.cn/tags/Andriod/"}]},{"title":"ä½¿ç”¨Hexoæ­å»ºä¸ªäººåšå®¢","slug":"Create-personal-blog-use-hexo","date":"2019-11-12T02:59:00.000Z","updated":"2020-01-07T15:19:57.996Z","comments":true,"path":"2019/11/12/Create-personal-blog-use-hexo/","link":"","permalink":"http://blog.pulsating.cn/2019/11/12/Create-personal-blog-use-hexo/","excerpt":"","text":"","categories":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"Blog","slug":"å¤§ç†ŠBIGBEAR/Blog","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Blog/"},{"name":"Hexo","slug":"å¤§ç†ŠBIGBEAR/Blog/Hexo","permalink":"http://blog.pulsating.cn/categories/%E5%A4%A7%E7%86%8ABIGBEAR/Blog/Hexo/"}],"tags":[{"name":"å¤§ç†ŠBIGBEAR","slug":"å¤§ç†ŠBIGBEAR","permalink":"http://blog.pulsating.cn/tags/%E5%A4%A7%E7%86%8ABIGBEAR/"},{"name":"article","slug":"article","permalink":"http://blog.pulsating.cn/tags/article/"},{"name":"å»ºç«™","slug":"å»ºç«™","permalink":"http://blog.pulsating.cn/tags/%E5%BB%BA%E7%AB%99/"},{"name":"SPA","slug":"SPA","permalink":"http://blog.pulsating.cn/tags/SPA/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"http://blog.pulsating.cn/tags/%E6%95%99%E7%A8%8B/"}]}]}